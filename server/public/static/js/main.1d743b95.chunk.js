(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{151:function(e,t,a){e.exports=a.p+"static/media/logo.6c9c9c6a.png"},251:function(e,t,a){},276:function(e,t,a){e.exports=a(563)},290:function(e,t,a){},442:function(e,t,a){},448:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},522:function(e,t,a){},554:function(e,t,a){},556:function(e,t,a){},563:function(e,t,a){"use strict";a.r(t);a(277);var n=a(26),r=a(0),l=a.n(r),i=a(20),s=a.n(i),c=a(14),o=a(15),m=a(17),u=a(16),d=a(18),p=a(79),h=a(90),f=(a(30),a(6)),E=(a(38),a(2)),g=(a(39),a(8)),y=(a(53),a(5)),b=a(4),v=a.n(b),x=(a(49),a(31)),k=(a(290),a(151)),w=a.n(k),I=a(196),D=a.n(I);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n){("GET"===a?D.a.get(e,{params:t}):D.a.post(e,t)).then((function(e){n(e.data)})).catch((function(e){x.a.error("\u8bf7\u6c42\u5931\u8d25 "+e.message)}))}))}var C=a(258),S=a.n(C);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a){"LOABZ-ONL6F-CLXJZ-N4A2L-AB74O-ITFWZ"===t.key?t.output="jsonp":t.ouput=void 0,S.a.ajax({url:e,type:"post",dataType:"jsonp",data:t,jsonp:"callback",success:function(e){a(e)}})}))}var F="https://free-api.heweather.net/s6/weather/now",j="https://apis.map.qq.com/ws/location/v1/ip",N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0894aab8b0394389a7ac887e32db9c30";return O(F,{location:e,key:t},"GET")},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOABZ-ONL6F-CLXJZ-N4A2L-AB74O-ITFWZ";return T(j,{key:e})},M=function(e,t){return O("/login",{username:e,password:t},"POST")},V=function(){return O("/shop/info",null,"GET")},Y=function(e){return O("/shop/update",e,"POST")},L=function(){return O("/category/list",null,"GET")},q=function(e){return O("/category/update",e,"POST")},P=function(e){return O("/category/search",{name:e},"GET")},W=function(e){return O("/category/delete",{id:e},"GET")},z=function(e){return O("/category/add",e,"POST")},_=function(){return O("/product/list",null,"GET")},R=function(e){return O("/product/delete",{id:e},"POST")},H=function(e){return O("/product/update",e,"POST")},U=function(e){return O("/product/add",e,"POST")},G=function(e){return O("/product/search",e,"POST")},B=function(e){return O("/file/delete",{name:e},"GET")},K=function(){return O("/stock/list",null,"GET")},Z=function(){return O("/stock/category",null,"GET")},J=function(e){return O("/stock/delete",{id:e},"GET")},$=function(e){return O("/stock/search",{name:e},"GET")},X=function(e){return O("/stock/add",e,"POST")},Q=function(e){return O("/stock/update",e,"POST")},ee=function(e){return O("/stock/stocklog-list",e,"GET")},te=function(e){return O("/stock/stocklog-add",e,"POST")},ae=function(){return O("/customer/list",null,"GET")},ne=function(){return O("/customer/member-list",null,"GET")},re=function(e){return O("/customer/member-search",{value:e},"GET")},le=function(e){return O("/customer/delete",{id:e},"GET")},ie=function(e){return O("/customer/add",e,"POST")},se=function(e){return O("/customer/update",e,"POST")},ce=function(){return O("/employee/list",null,"GET")},oe=function(e){return O("/employee/delete",{id:e},"GET")},me=function(e){return O("/employee/search",{value:e},"GET")},ue=function(e){return O("/employee/add",e,"POST")},de=function(e){return O("/employee/update",e,"POST")},pe=function(){return O("/inventory/list",null,"GET")},he=function(e){return O("/inventory/add",e,"POST")},fe=function(e){return O("/inventory/update",e,"POST")},Ee=function(e){return O("/inventory/delete",{id:e},"GET")},ge=function(){return O("/user/list",null,"GET")},ye=function(e){return O("/user/delete",{id:e},"GET")},be=function(e){return O("/user/add",e,"POST")},ve=function(e){return O("/user/update",e,"POST")},xe=function(){return O("/order/list",null,"GET")},ke=function(){return O("/order/frontdesk-list",null,"GET")},we=function(e){return O("/order/search",{id:e},"GET")},Ie=function(e,t){return O("/order/range",{start:e,end:t},"GET")},De=function(e){return O("/order/update",e,"POST")},Oe=function(){return O("/role/list",null,"GET")},Ce=function(e){return O("/role/delete",{id:e},"GET")},Se=function(e){return O("/role/add",e,"POST")},Te=function(e){return O("/role/update",e,"POST")},Fe=function(e){return O("/rule/update",e,"POST")},je={user:{},others:{}},Ne=a(348),Ae={saveUser:function(e){Ne.set("user_key",e)},getUser:function(){return Ne.get("user_key")||{}},removeUser:function(){Ne.remove("user_key")}},Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r,l,i,s,c;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=11;break}return n=t.username,r=t.password,o.next=4,v.a.awrap(M(n,r));case 4:return l=o.sent,o.next=7,v.a.awrap(Oe());case 7:i=o.sent,0===l.status&&0===i.status&&(x.a.success("\u767b\u5f55\u6210\u529f"),s=l.data,c=[],i.data.forEach((function(e){l.data.role===e.id&&(c=e.permission.split("-"))})),s.permission=c,je.user=l.data,Ae.saveUser(l.data),a.props.history.replace("/")),o.next=12;break;case 11:console.log("\u6821\u9a8c\u5931\u8d25");case 12:case"end":return o.stop()}}))}))},a.validatePwd=function(e,t,a){t?t.length<4?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?t.length>12?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):a():a("\u5bc6\u7801\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u7ec4\u6210"):a("\u8bf7\u8f93\u5165\u5bc6\u7801")},a.validateUser=function(e,t,a){t?t.length<4?a("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?t.length>12?a("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):a():a("\u7528\u6237\u540d\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u7ec4\u6210"):a("\u8bf7\u8f93\u5165\u7528\u6237\u540d")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=je.user;if("{}"!==JSON.stringify(e))return l.a.createElement(h.a,{to:"/"});var t=this.props.form;return l.a.createElement("div",{className:"login"},l.a.createElement("header",{className:"login-header"},l.a.createElement("img",{src:w.a,alt:"logo"}),l.a.createElement("h3",null,"\u9910\u996e\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),l.a.createElement("section",{className:"login-content"},l.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),l.a.createElement(E.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(E.a.Item,null,t.getFieldDecorator("username",{rules:[{validator:this.validateUser}]})(l.a.createElement(g.a,{prefix:l.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),l.a.createElement(E.a.Item,null,t.getFieldDecorator("password",{rules:[{validator:this.validatePwd}]})(l.a.createElement(g.a,{prefix:l.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55")))))}}]),t}(l.a.Component),Ve=E.a.create()(Me),Ye=(a(439),a(118)),Le=(a(564),a(265)),qe=(a(442),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(A());case 2:return 0===(e=n.sent).status?je.others.location=e.result.ad_info.district:console.log("\u8bf7\u6c42\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25  "+e.message),n.next=6,v.a.awrap(N(je.others.location));case 6:"ok"===(t=n.sent).HeWeather6[0].status?(je.others.weather_txt=t.HeWeather6[0].now.cond_txt,je.others.weather_code=t.HeWeather6[0].now.cond_code):console.log("\u8bf7\u6c42\u5929\u6c14\u4fe1\u606f\u5931\u8d25  "+t.HeWeather6[0].status),a.intervalId=setInterval((function(){var e=new Date,t=e.getMonth()+1;a.setState({username:je.user.username,location:je.others.location,weather_txt:je.others.weather_txt,weather_code:je.others.weather_code,date:e.getFullYear()+"-"+t+"-"+e.getDate()})}),1e3);case 9:case"end":return n.stop()}}))},a.logout=function(){return a.setState({loading:!0}),new Promise((function(e){setTimeout((function(){je.user={},je.others={},Ae.removeUser(),a.props.history.replace("/login"),e()}),1e3)})).catch((function(){return console.log("\u767b\u51fa\u5931\u8d25")}))},a.state={username:"-",location:"-",weather_txt:"-",weather_code:"100",date:"-",loading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return l.a.createElement("div",{className:"header"},l.a.createElement("span",null,this.state.date),l.a.createElement("span",null,this.state.location),l.a.createElement("img",{src:"https://cdn.heweather.com/cond_icon/"+this.state.weather_code+".png",alt:"weather"}),l.a.createElement("span",{style:{marginRight:"100px"}},this.state.weather_txt),l.a.createElement("span",{style:{marginRight:"20px"}},"\u6b22\u8fce! ",this.state.username),l.a.createElement(Le.a,{placement:"bottomRight",title:"\u786e\u5b9a\u8981\u9000\u51fa\u7cfb\u7edf\u5417\uff1f",okType:"danger",onConfirm:this.logout,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},l.a.createElement(f.a,{style:{marginRight:"50px"},type:"primary",loading:this.state.loading},"\u9000\u51fa")))}}]),t}(l.a.Component)),Pe=Object(h.g)(qe),We=(a(445),a(91)),ze=(a(448),We.a.SubMenu),_e=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e=[{key:"/home",title:"\u9996\u9875",icon:"home",display:1},{key:"/order",title:"\u8ba2\u5355\u7ba1\u7406",icon:"account-book",display:0,children:[{key:"/order",title:"\u5168\u90e8\u8ba2\u5355",display:0},{key:"/order/stage",title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{key:"/product",title:"\u5546\u54c1\u7ba1\u7406",icon:"shopping",display:0,children:[{key:"/product/category",title:"\u5546\u54c1\u5206\u7c7b",display:0},{key:"/product",title:"\u5546\u54c1\u5217\u8868",display:0},{key:"/product/add",title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{key:"/stock",title:"\u5e93\u5b58\u7ba1\u7406",icon:"appstore",display:0,children:[{key:"/stock",title:"\u5e93\u5b58\u4fe1\u606f",display:0},{key:"/stock/inventory",title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{key:"/member",title:"\u4f1a\u5458\u7ba1\u7406",icon:"crown",display:0,children:[{key:"/member",title:"\u4f1a\u5458\u5217\u8868",display:0},{key:"/member/add",title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{key:"/employee",title:"\u4eba\u4e8b\u7ba1\u7406",icon:"team",display:0,children:[{key:"/employee",title:"\u5458\u5de5\u5217\u8868",display:0},{key:"/employee/user",title:"\u7528\u6237\u5217\u8868",display:0},{key:"/employee/role",title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];je.user.permission.forEach((function(t){switch(t){case"\u5168\u90e8\u8ba2\u5355":e[1].display=1,e[1].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":e[1].display=1,e[1].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":e[2].display=1,e[2].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":e[2].display=1,e[2].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":e[2].display=1,e[2].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":e[3].display=1,e[3].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":e[3].display=1,e[3].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":e[4].display=1,e[4].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":e[4].display=1,e[4].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":e[5].display=1,e[5].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":e[5].display=1,e[5].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":e[5].display=1,e[5].children[2].display=1}})),a.setState({menu:e,selectedKeys:a.getSelectedKeys(a.props.location.pathname),openKeys:a.getOpenKeys(a.props.location.pathname)})},a.rootSubmenuKeys=["/home","/order","/product","/category","/stock","/member","/employee"],a.onOpenChange=function(e){var t=e.find((function(e){return-1===a.state.openKeys.indexOf(e)}));-1===a.rootSubmenuKeys.indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a.closeSubmenuAll=function(){a.setState({openKeys:[]})},a.getSelectedKeys=function(e){var t="";switch(e){case"/home":case"/home/edit":t="/home";break;case"/order":case"/order/view":t="/order";break;case"/order/stage":case"/order/stage/view":t="/order/stage";break;case"/product":case"/product/view":case"/product/edit":t="/product";break;case"/product/add":t="/product/add";break;case"/product/category":case"/product/category/view":case"/product/category/add":case"/product/category/edit":t="/product/category";break;case"/stock":case"/stock/view":case"/stock/add":case"/stock/edit":case"/stock/log":t="/stock";break;case"/stock/inventory":case"/stock/inventory/view":case"/stock/inventory/add":t="/stock/inventory";break;case"/member":case"/member/view":case"/member/edit":t="/member";break;case"/member/add":t="/member/add";break;case"/employee":case"/employee/view":case"/employee/add":case"/employee/edit":t="/employee";break;case"/employee/user":case"/employee/user/add":case"/employee/user/edit":t="/employee/user";break;case"/employee/role":case"/employee/role/add":case"/employee/role/edit":t="/employee/role"}return[t]},a.getOpenKeys=function(e){var t="";switch(e){case"/product/category":t="/product";break;case"/stock/inventory":t="/stock";break;case"/employee/role":case"/employee/user":t="/employee";break;default:t="/"+e.split("/")[1]}return[t]},a.state={menu:[],selectedKeys:[],openKeys:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"left-nav"},l.a.createElement(p.b,{to:"/"},l.a.createElement("div",{className:"left-nav-header"},l.a.createElement("img",{src:w.a,alt:"logo"}),l.a.createElement("h1",null,"\u9910\u5385\u540e\u53f0"))),l.a.createElement(We.a,{selectedKeys:this.getSelectedKeys(this.props.location.pathname),mode:"inline",openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,theme:"dark"},this.state.menu.map((function(e){return e.children?l.a.createElement(ze,{key:e.key,title:l.a.createElement("span",null,l.a.createElement(y.a,{type:e.icon}),e.title),style:{display:0===e.display?"none":"block"}},e.children.map((function(e){return l.a.createElement(We.a.Item,{key:e.key,style:{display:0===e.display?"none":"block"}},l.a.createElement(p.b,{to:e.key},e.title))}))):l.a.createElement(We.a.Item,{key:e.key,style:{display:0===e.display?"none":"block"}},l.a.createElement(p.b,{to:e.key},l.a.createElement(y.a,{type:e.icon}),e.title))}))))}}]),t}(l.a.Component),Re=Object(h.g)(_e),He=(a(40),a(25)),Ue=(a(456),a(457),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"top-nav-container"},this.props.nav.map((function(t,a){return 0===a&&a===e.props.nav.length?l.a.createElement("span",{key:a},l.a.createElement("span",{style:{fontWeight:"bold",cursor:"default"}},t),l.a.createElement("span",{style:{margin:"0 10px",color:"#98a9c4"}},"/")):a+1===e.props.nav.length?l.a.createElement("span",{key:a,style:{color:"#98a9c4",cursor:"default"}},t):l.a.createElement("span",{key:a},l.a.createElement("span",{key:a,style:{fontWeight:"bold",cursor:"default"}},t),l.a.createElement("span",{style:{margin:"0 10px",color:"#98a9c4"}},"/"))})))}}]),t}(l.a.Component)),Ge=Object(h.g)(Ue),Be=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(V());case 2:0===(e=n.sent).status&&((t=e.data).profile="http://localhost:3001/upload/"+t.profile,a.setState({data:t}));case 4:case"end":return n.stop()}}))},a.handleEdit=function(){a.props.history.push({pathname:"/home/edit",state:{data:a.state.data}})},a.state={data:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"home-container"},l.a.createElement(Ge,{nav:["\u9996\u9875"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u95e8\u5e97\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:this.handleEdit},"\u7f16\u8f91"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:7},wrapperCol:{span:11}},{style:{marginTop:"20px",textIndent:"20px",fontWeight:"bold"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u5e97\u540d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u5730\u5740"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.address)),l.a.createElement(E.a.Item,{label:"\u684c\u6570"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.seats)),l.a.createElement(E.a.Item,{label:"\u7535\u8bdd"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tel)),l.a.createElement(E.a.Item,{label:"\u516c\u544a"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.notice)),l.a.createElement(E.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.businesshour)))))}}]),t}(l.a.Component),Ke=(a(232),a(130)),Ze=(a(82),a(41)),Je=a(22),$e=a.n(Je),Xe=(a(56),a(35)),Qe=(a(256),a(158)),et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previewVisible:!1,previewImage:"",fileList:[]},a.UNSAFE_componentWillMount=function(){console.log(a.props);var e=[];e.push({uid:-1,name:a.props.img,status:"done",url:"/upload/"+a.props.img}),a.setState({fileList:e})},a.getBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,v.a.awrap(a.getBase64(e.originFileObj));case 3:e.preview=t.sent;case 4:a.setState({previewImage:e.url||e.preview,previewVisible:!0});case 5:case"end":return t.stop()}}))},a.handleChange=function(e){var t,n,r,l,i;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.file,n=e.fileList,"done"!==t.status){s.next=8;break}r=t.response,(t=n[n.length-1]).name=r.data.name,t.url=r.data.url,s.next=13;break;case 8:if("removed"!==t.status){s.next=13;break}return s.next=11,v.a.awrap(B(t.name));case 11:0===s.sent.status&&(l=0,n.forEach((function(e,a){e.name===t.name&&(l=a)})),n.splice(l,1));case 13:i=n.map((function(e){return e.url})),a.props.onChange(i.join(",")),a.setState({fileList:n});case 16:case"end":return s.stop()}}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement(y.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",{className:"clearfix"},l.a.createElement(Qe.a,{action:"/file/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:this.state.fileList,onPreview:this.handlePreview,onChange:this.handleChange},this.state.fileList.length>=1?null:e),l.a.createElement(Xe.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})))}}]),t}(l.a.Component),tt=E.a.create({name:"category-add"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(V());case 2:0===(e=n.sent).status&&((t=e.data).opentime=t.businesshour.split(" ~ ")[0],t.closetime=t.businesshour.split(" ~ ")[1],a.setState({data:t}),console.log(t));case 4:case"end":return n.stop()}}))},a.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=10;break}return(n=t).profile=n.profile.split("upload/")[1],n.businesshour=$e()(n.opentime,"HH:mm")._i+" ~ "+$e()(n.closetime,"HH:mm")._i,delete n.opentime,delete n.closetime,r.next=8,v.a.awrap(Y(n));case 8:0===r.sent.status&&(x.a.success("\u66f4\u65b0\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u54c1\u7c7b\u5217\u8868",2),a.timerID=setTimeout((function(){a.props.history.push("/home")}),2e3));case 10:case"end":return r.stop()}}))}))},a.state={data:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u9996\u9875","\u7f16\u8f91"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u95e8\u5e97\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/home")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"ID\uff1a",style:{display:"none"}},t.getFieldDecorator("id",{initialValue:this.state.data.id})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u54c1\u724c\u540d\u79f0\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:this.state.data.name})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u5934\u50cf\uff1a"},t.getFieldDecorator("profile",{rules:[{required:!0}]})(l.a.createElement(et,{img:this.state.data.profile}))),l.a.createElement(E.a.Item,{label:"\u5730\u5740\uff1a"},t.getFieldDecorator("address",{rules:[{required:!0}],initialValue:this.state.data.address})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u684c\u6570\uff1a"},t.getFieldDecorator("seats",{initialValue:this.state.data.seats})(l.a.createElement(Ze.a,null))),l.a.createElement(E.a.Item,{label:"\u7535\u8bdd\uff1a"},t.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:this.state.data.tel})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u516c\u544a\uff1a"},t.getFieldDecorator("notice",{rules:[{required:!0}],initialValue:this.state.data.notice})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4\uff1a"},t.getFieldDecorator("opentime",{rules:[{required:!0}],initialValue:$e()(this.state.data.opentime,"HH:mm")})(l.a.createElement(Ke.a,{format:"HH:mm"}))),l.a.createElement(E.a.Item,{label:"\u6253\u70ca\u65f6\u95f4\uff1a"},t.getFieldDecorator("closetime",{rules:[{required:!0}],initialValue:$e()(this.state.data.closetime,"HH:mm")})(l.a.createElement(Ke.a,{format:"HH:mm"}))),l.a.createElement(E.a.Item,{label:"\u54c1\u724c\u6545\u4e8b\uff1a"},t.getFieldDecorator("story",{initialValue:this.state.data.story})(l.a.createElement(g.a.TextArea,{rows:10}))),l.a.createElement(E.a.Item,{label:"\u4f1a\u5458\u6761\u6b3e\uff1a"},t.getFieldDecorator("treaty",{initialValue:this.state.data.treaty})(l.a.createElement(g.a.TextArea,{rows:5}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),at=(a(78),a(51)),nt=(a(77),a(45)),rt=(a(149),a(80)),lt=(a(194),a(112)),it=(a(522),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"loading-container"},l.a.createElement(lt.a,{size:"large"}),l.a.createElement("span",null,"Loading. . ."))}}]),t}(l.a.Component)),st=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(L());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.refreshTable=function(e){a.setState({isLoading:!0}),a.timerID=setTimeout((function(){if(0===e.status){var t=e.data.map((function(e,t){switch(e.index=t,e.level){case 0:e.levelText="\u4e00\u7ea7";break;case 1:e.levelText="\u4e8c\u7ea7";break;case 2:e.levelText="\u4e09\u7ea7";break;case 3:e.levelText="\u56db\u7ea7";break;case 4:e.levelText="\u4e94\u7ea7";break;case 5:e.levelText="\u516d\u7ea7";break;case 6:e.levelText="\u4e03\u7ea7";break;case 7:e.levelText="\u516b\u7ea7";break;case 8:e.levelText="\u4e5d\u7ea7";break;case 9:e.levelText="\u5341\u7ea7"}return e}));a.setState({isLoading:!1,data:t})}else 1===e.status&&(x.a.error(e.msg),a.setState({isLoading:!1,data:null}))}),300)},a.handleIsnavChange=function(e){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(q({id:e.id,isnav:1-e.isnav}));case 2:t=r.sent,n=a.state.data,0===t.status?(n.forEach((function(t){return t.isnav=t.id===e.id?1-t.isnav:t.isnav})),a.setState({data:n})):1===t.status&&(a.setState({data:n}),x.a.error(t.msg));case 5:case"end":return r.stop()}}))},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=6;break}return n.next=3,v.a.awrap(L());case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,v.a.awrap(P(e));case 8:n.t0=n.sent;case 9:t=n.t0,a.refreshTable(t);case 11:case"end":return n.stop()}}))},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u54c1\u7c7b"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(W(e.id));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.id===e.id?t.push():t.push(a)})),a.setState({data:t}));case 4:case"end":return n.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleAdd=function(){a.props.history.push("/product/category/add")},a.handleEdit=function(e){a.props.history.push({pathname:"/product/category/edit",state:{data:e}})},a.handleView=function(e){a.props.history.push({pathname:"/product/category/view",state:{data:e}})},a.state={isLoading:!0,data:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u54c1\u7c7b\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u6392\u5e8f",dataIndex:"levelText",key:"levelText",sorter:function(e,t){return e.level-t.level}},{title:"\u5b50\u9879\u6570\u91cf",dataIndex:"son",key:"son",sorter:function(e,t){return e.son-t.son}},{title:"\u662f\u5426\u663e\u793a",dataIndex:"isnav",key:"isnav",render:function(t,a){return l.a.createElement(rt.a,{size:"small",onClick:function(){return e.handleIsnavChange(a)},defaultChecked:1===t})},filters:[{text:"\u5df2\u663e\u793a",value:1},{text:"\u672a\u663e\u793a",value:0}],onFilter:function(e,t){return e===t.isnav}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(f.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u54c1\u7c7b\u540d\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component),ct=(a(62),a(13)),ot=E.a.create({name:"category-add"})(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=9;break}return(n=t).level=Number(n.level),n.isnav=n.isnav?1:0,n.son=0,r.next=7,v.a.awrap(z(n));case 7:0===r.sent.status&&(x.a.success("\u65b0\u589e\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u54c1\u7c7b\u5217\u8868",2),a.timerID=setTimeout((function(){a.props.history.push("/product/category")}),2e3));case 9:case"end":return r.stop()}}))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u65b0\u589e\u54c1\u7c7b"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5546\u54c1\u54c1\u7c7b"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u540d\u79f0\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}]})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u7ea7\u522b\uff1a"},t.getFieldDecorator("level",{rules:[{required:!0}]})(l.a.createElement(ct.a,null,l.a.createElement(ct.a.Option,{key:0},"\u7b2c\u4e00\u7ea7"),l.a.createElement(ct.a.Option,{key:1},"\u7b2c\u4e8c\u7ea7"),l.a.createElement(ct.a.Option,{key:2},"\u7b2c\u4e09\u7ea7"),l.a.createElement(ct.a.Option,{key:3},"\u7b2c\u56db\u7ea7"),l.a.createElement(ct.a.Option,{key:4},"\u7b2c\u4e94\u7ea7"),l.a.createElement(ct.a.Option,{key:5},"\u7b2c\u516d\u7ea7"),l.a.createElement(ct.a.Option,{key:6},"\u7b2c\u4e03\u7ea7"),l.a.createElement(ct.a.Option,{key:7},"\u7b2c\u516b\u7ea7"),l.a.createElement(ct.a.Option,{key:9},"\u7b2c\u4e5d\u7ea7"),l.a.createElement(ct.a.Option,{key:10},"\u7b2c\u5341\u7ea7")))),l.a.createElement(E.a.Item,{label:"\u662f\u5426\u663e\u793a"},t.getFieldDecorator("isnav",{rules:[{required:!0}],valuePropName:"checked",initialValue:!1})(l.a.createElement(rt.a,null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),mt=E.a.create({name:"category-add"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){a.setState({data:a.props.location.state.data})},a.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=12;break}return(n=a.props.location.state.data).name=t.name,n.level=t.level,n.isnav=!0===t.isnav?1:0,n.note=t.note,delete n.index,delete n.levelText,r.next=10,v.a.awrap(q(n));case 10:0===r.sent.status&&(x.a.success("\u66f4\u65b0\u54c1\u7c7b\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u54c1\u7c7b\u5217\u8868\u9875\u9762",2),a.timerID=setTimeout((function(){a.props.history.push("/product/category")}),2e3));case 12:case"end":return r.stop()}}))}))},a.state={data:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u7f16\u8f91\u54c1\u7c7b"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5546\u54c1\u54c1\u7c7b"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u540d\u79f0\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:this.state.data.name})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u7ea7\u522b\uff1a"},t.getFieldDecorator("level",{rules:[{required:!0}],initialValue:this.state.data.level})(l.a.createElement(ct.a,null,l.a.createElement(ct.a.Option,{key:0,value:0},"\u4e00\u7ea7"),l.a.createElement(ct.a.Option,{key:1,value:1},"\u4e8c\u7ea7"),l.a.createElement(ct.a.Option,{key:2,value:2},"\u4e09\u7ea7"),l.a.createElement(ct.a.Option,{key:3,value:3},"\u56db\u7ea7"),l.a.createElement(ct.a.Option,{key:4,value:4},"\u4e94\u7ea7"),l.a.createElement(ct.a.Option,{key:5,value:5},"\u516d\u7ea7"),l.a.createElement(ct.a.Option,{key:6,value:6},"\u4e03\u7ea7"),l.a.createElement(ct.a.Option,{key:7,value:7},"\u516b\u7ea7"),l.a.createElement(ct.a.Option,{key:8,value:8},"\u4e5d\u7ea7"),l.a.createElement(ct.a.Option,{key:9,value:9},"\u5341\u7ea7")))),l.a.createElement(E.a.Item,{label:"\u662f\u5426\u663e\u793a"},t.getFieldDecorator("isnav",{rules:[{required:!0}],valuePropName:"checked",initialValue:1===this.state.data.isnav})(l.a.createElement(rt.a,null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),ut=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.props.location.state.data,console.log(e),a.setState({data:e});case 3:case"end":return t.stop()}}))},a.state={data:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u54c1\u7c7b\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u54c1\u7c7b\u8be6\u60c5"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px",textIndent:"20px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u540d\u79f0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u7ea7\u522b"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.levelText)),l.a.createElement(E.a.Item,{label:"\u662f\u5426\u663e\u793a"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.isnav?"\u662f":"\u5426")),l.a.createElement(E.a.Item,{label:"\u5b50\u9879\u6570\u91cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.son)),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note)))))}}]),t}(l.a.Component),dt=(a(124),a(52)),pt=(a(550),a(274)),ht=(a(125),a(32)),ft=(a(59),a(24)),Et=(a(251),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(_());case 2:0===(e=t.sent).status&&a.refreshTable(e.data);case 4:case"end":return t.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.formRef={},a.rowSelection={onChange:function(e){a.setState({selectedRowKeys:e})}},a.refreshTable=function(e){var t,n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,v.a.awrap(L());case 2:0===(t=i.sent).status&&(n=[{value:"onsale-1",label:"\u5546\u54c1\u4e0a\u67b6"},{value:"onsale-0",label:"\u5546\u54c1\u4e0b\u67b6"},{value:"recommend-1",label:"\u8bbe\u4e3a\u63a8\u8350"},{value:"recommend-0",label:"\u53d6\u6d88\u63a8\u8350"},{value:"isnew-1",label:"\u8bbe\u4e3a\u65b0\u54c1"},{value:"isnew-0",label:"\u53d6\u6d88\u65b0\u54c1"},{value:"delete",label:"\u5220\u9664\u5546\u54c1"}],r=[],l=[],t.data.forEach((function(t){r.push({label:t.name,value:t.id}),e.map((function(e){return-1===l.indexOf(t.name)?l.push(t.name):l.push(),e.category===t.id&&(e.categoryName=t.name),999===e.category&&(e.categoryName="\u672a\u5206\u7c7b"),e}))})),(l=l.map((function(e){return{text:e,value:e}}))).push({text:"\u672a\u5206\u7c7b",value:"\u672a\u5206\u7c7b"}),console.log(l),n.push({label:"\u79fb\u81f3",value:"move",children:r}),a.setState({isLoading:!0,options1:n,options2:r,categoryFilters:l}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:e})}),300));case 4:case"end":return i.stop()}}))},a.handleStateChange=function(e,t){var n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return(n={id:e.id})[t]=1-e[t],i.next=4,v.a.awrap(H(n));case 4:r=i.sent,l=a.state.data,0===r.status&&(l.forEach((function(a){return a[t]=a.id===e.id?1-a[t]:a[t]})),a.setState({data:l}));case 7:case"end":return i.stop()}}))},a.handleAdd=function(){a.props.history.push("/product/add")},a.handleView=function(e){a.props.history.push({pathname:"/product/view",state:{data:e}})},a.handleEdit=function(e){a.props.history.push({pathname:"/product/edit",state:{data:e}})},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5546\u54c1"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(t=[]).push(e.id),r.next=4,v.a.awrap(R(t));case 4:0===r.sent.status&&(n=[],a.state.data.forEach((function(t){t.id===e.id?n.push():n.push(t)})),a.setState({data:n}));case 6:case"end":return r.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleSelectChange=function(e){a.setState({selectedType:e})},a.handleSearch=function(e){var t,n,r,l,i;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(""!==(t={status:a.state.selectedType,value:e}).value||""!==t.status){s.next=8;break}return s.next=4,v.a.awrap(_());case 4:0===(n=s.sent).status&&a.refreshTable(n.data),s.next=13;break;case 8:for(r in t)t.hasOwnProperty(r)&&0!==t[r].length&&("status"===r?(l=t.status.split("-"),t[l[0]]=Number(l[1])):t[r]="object"===typeof t[r]?t[r][0]:t[r]);return s.next=11,v.a.awrap(G(t));case 11:0===(i=s.sent).status&&a.refreshTable(i.data);case 13:case"end":return s.stop()}}))},a.handleCascaderChange=function(e){a.setState({operation:e})},a.handleOperate=function(){var e,t,n,r,l,i,s,c,o,m;return v.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(0!==(e=a.state.operation).length){u.next=6;break}a.setState({selectedRowKeys:[]}),a.refreshTable(a.state.data),u.next=46;break;case 6:if(1!==e.length){u.next=35;break}if("delete"!==e[0]){u.next=16;break}if(0!==R(a.state.selectedRowKeys).status){u.next=14;break}return u.next=12,v.a.awrap(_());case 12:0===(t=u.sent).status&&((n=t.data).forEach((function(e){a.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),a.timerID=setTimeout((function(){a.formRef1.props.form.resetFields(),a.refreshTable(n)}),500));case 14:u.next=33;break;case 16:if("move"!==e[0]){u.next=21;break}a.formRef1.props.form.resetFields(),a.refreshTable(a.state.data),u.next=33;break;case 21:return r={},l=e[0].split("-"),r.id=a.state.selectedRowKeys,r[l[0]]=Number(l[1]),u.next=27,v.a.awrap(H(r));case 27:if(0!==u.sent.status){u.next=33;break}return u.next=31,v.a.awrap(_());case 31:0===(i=u.sent).status&&((s=i.data).forEach((function(e){a.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),a.timerID=setTimeout((function(){a.refreshTable(s)}),500));case 33:u.next=46;break;case 35:return(c={}).id=a.state.selectedRowKeys,c.category=e[1],u.next=40,v.a.awrap(H(c));case 40:if(0!==u.sent.status){u.next=46;break}return u.next=44,v.a.awrap(_());case 44:0===(o=u.sent).status&&((m=o.data).forEach((function(e){a.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),a.refreshTable(m));case 46:case"end":return u.stop()}}))},a.state={isLoading:!0,data:[],options1:[],options2:[],selectedRowKeys:[],operation:"",selectedCategory:[],categoryFilters:[],selectedType:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u8d27\u53f7",key:"number",dataIndex:"number"},{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t,999===a.category?l.a.createElement(ft.a,{size:"small",color:"red"},"\u672a\u5206\u7c7b"):null)}},{title:"\u5206\u7c7b",key:"categoryName",dataIndex:"categoryName",render:function(e,t){return l.a.createElement("span",null,999===t.category?"\u672a\u8bbe\u7f6e\u5206\u7c7b":e)},filters:this.state.categoryFilters,onFilter:function(e,t){return e===t.categoryName}},{title:"\u552e\u4ef7",key:"price",dataIndex:"price",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.price-t.price}},{title:"\u9500\u91cf/\u5468",key:"sales",dataIndex:"sales",render:function(e,t){return l.a.createElement("span",null,999===t.category?"/":e+t.unit)},sorter:function(e,t){return e.sales-t.sales}},{title:"\u72b6\u6001",key:"status",render:function(t){return 999===t.category?l.a.createElement("span",null,"/"):l.a.createElement("span",null,l.a.createElement("span",null,"\u4e0a\u67b6\uff1a"),l.a.createElement(rt.a,{size:"small",defaultChecked:1===t.onsale,onClick:function(){return e.handleStateChange(t,"onsale")}}),l.a.createElement("br",null),l.a.createElement("span",null,"\u65b0\u54c1\uff1a"),l.a.createElement(rt.a,{size:"small",style:{marginTop:"5px"},defaultChecked:1===t.isnew,onClick:function(){return e.handleStateChange(t,"isnew")}}),l.a.createElement("br",null),l.a.createElement("span",null,"\u63a8\u8350\uff1a"),l.a.createElement(rt.a,{size:"small",style:{marginTop:"5px"},defaultChecked:1===t.recommend,onClick:function(){return e.handleStateChange(t,"recommend")}}))}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(f.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"product-container"},l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868"]}),l.a.createElement("div",{className:"product-header"},l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:8},l.a.createElement(f.a,{type:"primary",onClick:function(){return e.handleAdd()}},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u5546\u54c1")),l.a.createElement(ht.a,{span:6,style:{marginTop:"-1px"}},l.a.createElement(pt.a,{style:{width:"120px",marginRight:"15px"},placeholder:"\u6279\u91cf\u64cd\u4f5c",options:this.state.options1,onChange:this.handleCascaderChange}),l.a.createElement(f.a,{type:"primary",onClick:this.handleOperate},"\u786e\u8ba4")),l.a.createElement(ht.a,{span:10,style:{textAlign:"right"}},l.a.createElement(ct.a,{style:{width:"110px",textAlign:"left"},placeholder:"\u9009\u62e9\u72b6\u6001",onChange:this.handleSelectChange},l.a.createElement(ct.a.Option,{value:""},"\u5168\u90e8"),l.a.createElement(ct.a.Option,{value:"onsale-1"},"\u5df2\u4e0a\u67b6"),l.a.createElement(ct.a.Option,{value:"onsale-0"},"\u672a\u4e0a\u67b6"),l.a.createElement(ct.a.Option,{value:"isnew-1"},"\u65b0\u54c1"),l.a.createElement(ct.a.Option,{value:"isnew-0"},"\u975e\u65b0\u54c1"),l.a.createElement(ct.a.Option,{value:"recommend-1"},"\u5df2\u63a8\u8350"),l.a.createElement(ct.a.Option,{value:"recommend-0"},"\u672a\u63a8\u8350")),l.a.createElement(g.a.Search,{placeholder:"\u641c\u7d22\u5546\u54c1\u540d\u79f0/\u8d27\u53f7",style:{width:"200px",float:"right",margin:"0 15px "},onSearch:function(t){return e.handleSearch(t)},enterButton:!0})))),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{rowSelection:this.rowSelection,style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component)),gt=(a(127),a(27)),yt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previewVisible:!1,previewImage:"",fileList:[]},a.UNSAFE_componentWillMount=function(){if(a.props.hasOwnProperty("imgs")){var e=a.props.imgs.split(","),t=[];e.forEach((function(e,a){t.push({uid:-1-a,name:e,status:"done",url:"/upload/"+e})})),a.setState({fileList:t})}},a.getBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,v.a.awrap(a.getBase64(e.originFileObj));case 3:e.preview=t.sent;case 4:a.setState({previewImage:e.url||e.preview,previewVisible:!0});case 5:case"end":return t.stop()}}))},a.handleChange=function(e){var t,n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.file,n=e.fileList,"done"!==t.status){i.next=8;break}r=t.response,(t=n[n.length-1]).name=r.data.name,t.url=r.data.url,i.next=11;break;case 8:if("removed"!==t.status){i.next=11;break}return i.next=11,v.a.awrap(B(t.name));case 11:l=n.map((function(e){return"string"===typeof e.url?e.url.split("upload/")[1]:e.url})),a.props.onChange(l.join(",")),a.setState({fileList:n});case 14:case"end":return i.stop()}}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement(y.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",{className:"clearfix"},l.a.createElement(Qe.a,{action:"/file/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:this.state.fileList,onPreview:this.handlePreview,onChange:this.handleChange},this.state.fileList.length>=6?null:e),l.a.createElement(Xe.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})))}}]),t}(l.a.Component),bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(L());case 2:0===(e=n.sent).status&&(t=[],e.data.forEach((function(e){t.push({key:e.name,value:e.id})})),a.setState({category_options:t}));case 4:case"end":return n.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.validateNumber=function(e,t,a){t?t.length<5||t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e5\u4e2a\uff0c\u4e14\u4e0d\u591a\u4e8e10\u4e2a\u5b57\u7b26"):/^[0-9a-zA-Z]*$/g.test(t)?a("\u8bf7\u8f93\u5165\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5176\u7ec4\u5408"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7")},a.validateName=function(e,t,a){t?t.length<2||t.length>10?a("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e2\u4e2a\uff0c\u4e14\u4e0d\u8d85\u8fc710\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u540d\u79f0")},a.validatePrice=function(e,t,a){t?t<0?a("\u8bf7\u6309\u6b63\u786e\u683c\u5f0f\u8f93\u5165\u5546\u54c1\u4ef7\u683c"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c")},a.validateUnit=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u5355\u4f4d")},a.validateNoteProduct=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u4ea7\u54c1\u5907\u6ce8")},a.validateIntegral=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u79ef\u5206\u503c")},a.validateIntroduceTitle=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u6807\u9898")},a.validateIntroduceContent=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u5185\u5bb9")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=15;break}return t.category=Number(t.category),t.price=Number(t.price),t.integral=Number(t.integral),t.onsale=-1===t.state.indexOf("onsale")?0:1,t.isnew=-1===t.state.indexOf("isnew")?0:1,t.recommend=-1===t.state.indexOf("recommend")?0:1,t.deleted=0,delete t.state,r.next=11,v.a.awrap(U(t));case 11:0===(n=r.sent).status&&(x.a.success(n.msg+",\u5373\u5c06\u8fd4\u56de\u5546\u54c1\u5217\u8868",2),a.timerID=setTimeout((function(){a.props.history.replace("/product")}),2e3)),r.next=16;break;case 15:console.log(e);case 16:case"end":return r.stop()}}))}))},a.state={category_options:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u6dfb\u52a0\u5546\u54c1"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},t.getFieldDecorator("number",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7",validate:this.validateNumber}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},t.getFieldDecorator("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",validate:this.validateName}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),l.a.createElement(E.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},t.getFieldDecorator("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]})(l.a.createElement(ct.a,{onChange:this.handleChange,placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"},this.state.category_options.map((function(e){return l.a.createElement(ct.a.Option,{key:e.value},e.key)}))))),l.a.createElement(E.a.Item,{label:"\u552e\u4ef7",hasFeedback:!0},t.getFieldDecorator("price",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7",validate:this.validatePrice}]})(l.a.createElement(g.a,{addonAfter:"\u5143 \xa0\xa0\xa0",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}))),l.a.createElement(E.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},t.getFieldDecorator("unit",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d",validate:this.validateUnit}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u72b6\u6001"},t.getFieldDecorator("state",{initialValue:["isNew"]})(l.a.createElement(gt.a.Group,{style:{width:"100%",margin:"10px 0 0 20px"}},l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"onsale"},"\u4e0a\u67b6")),l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"isnew"},"\u65b0\u54c1")),l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"recommend"},"\u63a8\u8350")))))),l.a.createElement(E.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},t.getFieldDecorator("integral",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c",validate:this.validateIntegral}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}))),l.a.createElement(E.a.Item,{label:"\u7b80\u4ecb"},t.getFieldDecorator("introduce",{rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(g.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u7b80\u4ecb"}))),l.a.createElement(E.a.Item,{label:"\u4f18\u60e0\u63d0\u793a"},t.getFieldDecorator("tip",{rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(g.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u63d0\u793a"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0"},t.getFieldDecorator("description",{rule:[{validate:this.validateIntroduceContent}]})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}))),l.a.createElement(E.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263\uff1a"},t.getFieldDecorator("discount_gold",{initialValue:10})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u767d\u91d1\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_platinum",{initialValue:10})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u94bb\u77f3\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_diamond",{initialValue:10})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},t.getFieldDecorator("pictures",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5546\u54c1\u56fe\u7247"}]})(l.a.createElement(yt,null))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u5907\u6ce8"},t.getFieldDecorator("note")(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 450px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4\u5546\u54c1")))))}}]),t}(l.a.Component),vt=E.a.create({name:"add-product-form"})(bt),xt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(e=a.props.location.state.data).state=[],1===e.onsale?e.state.push("onsale"):e.state.push(),1===e.isnew?e.state.push("isnew"):e.state.push(),1===e.recommend?e.state.push("recommend"):e.state.push(),a.setState({data:e}),r.next=8,v.a.awrap(L());case 8:0===(t=r.sent).status&&(n=[],t.data.forEach((function(e){n.push({key:e.name,value:e.id})})),a.setState({categoryOptions:n}),console.log(e),console.log(n));case 10:case"end":return r.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.validateNumber=function(e,t,a){t?t.length<5||t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e5\u4e2a\uff0c\u4e14\u4e0d\u591a\u4e8e10\u4e2a\u5b57\u7b26"):/^[0-9a-zA-Z]*$/g.test(t)?a("\u8bf7\u8f93\u5165\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5176\u7ec4\u5408"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7")},a.validateName=function(e,t,a){t?t.length<2||t.length>10?a("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e2\u4e2a\uff0c\u4e14\u4e0d\u8d85\u8fc710\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u540d\u79f0")},a.validatePrice=function(e,t,a){t?t<0?a("\u8bf7\u6309\u6b63\u786e\u683c\u5f0f\u8f93\u5165\u5546\u54c1\u4ef7\u683c"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c")},a.validateUnit=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u5355\u4f4d")},a.validateNoteProduct=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u4ea7\u54c1\u5907\u6ce8")},a.validateIntegral=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u79ef\u5206\u503c")},a.validateIntroduceTitle=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u6807\u9898")},a.validateIntroduceContent=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u5185\u5bb9")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=12;break}return t.category=Number(t.category),t.price=Number(t.price),t.integral=Number(t.integral),t.onsale=-1===t.state.indexOf("onsale")?0:1,t.isnew=-1===t.state.indexOf("isnew")?0:1,t.recommend=-1===t.state.indexOf("recommend")?0:1,delete t.state,n.next=10,v.a.awrap(H(t));case 10:0===n.sent.status&&(x.a.success("\u66f4\u65b0\u5546\u54c1\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u5546\u54c1\u5217\u8868\u9875\u9762"),a.timerID=setTimeout((function(){a.props.history.replace("/product")}),1e3));case 12:case"end":return n.stop()}}))}))},a.state={categoryOptions:[],data:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868","\u7f16\u8f91\u5546\u54c1"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u5546\u54c1ID",hasFeedback:!0,style:{display:"none"}},t.getFieldDecorator("id",{initialValue:this.state.data.id})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},t.getFieldDecorator("number",{initialValue:this.state.data.number,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7",validate:this.validateNumber}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},t.getFieldDecorator("name",{initialValue:this.state.data.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",validate:this.validateName}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),l.a.createElement(E.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},t.getFieldDecorator("category",{initialValue:this.state.data.category,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]})(l.a.createElement(ct.a,{onChange:this.handleChange},this.state.categoryOptions.map((function(e){return l.a.createElement(ct.a.Option,{key:e.value,value:e.value},e.key)}))))),l.a.createElement(E.a.Item,{label:"\u552e\u4ef7",hasFeedback:!0},t.getFieldDecorator("price",{initialValue:this.state.data.price,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}]})(l.a.createElement(g.a,{addonAfter:"\u5143 \xa0\xa0\xa0",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}))),l.a.createElement(E.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},t.getFieldDecorator("unit",{initialValue:this.state.data.unit,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d",validate:this.validateUnit}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d"}))),999===this.state.data.category?null:l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u72b6\u6001"},t.getFieldDecorator("state",{initialValue:this.state.data.state})(l.a.createElement(gt.a.Group,{style:{width:"100%",margin:"10px 0 0 20px"}},l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"onsale"},"\u4e0a\u67b6")),l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"isnew"},"\u65b0\u54c1")),l.a.createElement(ht.a,{span:8},l.a.createElement(gt.a,{value:"recommend"},"\u63a8\u8350")))))),l.a.createElement(E.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},t.getFieldDecorator("integral",{initialValue:this.state.data.integral,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}))),l.a.createElement(E.a.Item,{label:"\u7b80\u4ecb",hasFeedback:!0},t.getFieldDecorator("introduce",{initialValue:this.state.data.introduce,rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(g.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb"}))),l.a.createElement(E.a.Item,{label:"\u4f18\u60e0\u63d0\u793a",hasFeedback:!0},t.getFieldDecorator("tip",{initialValue:this.state.data.tip,rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(g.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u63d0\u793a"}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0",hasFeedback:!0},t.getFieldDecorator("description",{initialValue:this.state.data.description,rule:[{validate:this.validateIntroduceContent}]})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}))),l.a.createElement(E.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263\uff1a"},t.getFieldDecorator("discount_gold",{initialValue:this.state.data.discount_gold})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u767d\u91d1\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_platinum",{initialValue:this.state.data.discount_platinum})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u94bb\u77f3\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_diamond",{initialValue:this.state.data.discount_diamond})(l.a.createElement(Ze.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(E.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},t.getFieldDecorator("pictures",{initialValue:this.state.data.pictures})(l.a.createElement(yt,{imgs:this.state.data.pictures}))),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u5907\u6ce8",hasFeedback:!0},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 450px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4\u5546\u54c1")))))}}]),t}(l.a.Component),kt=E.a.create({name:"add-product-form"})(xt),wt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.props.location.state.data,console.log(e),a.setState({data:e});case 3:case"end":return t.stop()}}))},a.state={data:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=function(e){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"check",style:{color:"#1DA57A"}}),e)},a=function(e){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"close",style:{color:"#1DA57A"}}),e)};return l.a.createElement("div",{className:"product-view-container"},l.a.createElement(Ge,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868","\u5546\u54c1\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){return e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.number)),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},999===this.state.data.category?"\u672a\u8bbe\u7f6e\u5206\u7c7b":this.state.data.categoryName)),l.a.createElement(E.a.Item,{label:"\u552e\u4ef7"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5 ",this.state.data.price.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.unit)),999===this.state.data.category?null:l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{marginLeft:"-20px"}},this.state.data.onsale?t("\u4e0a\u67b6"):a("\u4e0a\u67b6"),this.state.data.onsale?t("\u65b0\u54c1"):a("\u65b0\u54c1"),this.state.data.onsale?t("\u63a8\u8350"):a("\u63a8\u8350"))),l.a.createElement(E.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.integral)),l.a.createElement(E.a.Item,{label:"\u7b80\u4ecb"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.introduce)),l.a.createElement(E.a.Item,{label:"\u4f18\u60e0\u63d0\u793a"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tip)),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.description)),l.a.createElement(E.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_gold?"\u65e0":this.state.data.discount_gold+"\u6298")),l.a.createElement(E.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_platinum?"\u65e0":this.state.data.discount_platinum+"\u6298")),l.a.createElement(E.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_diamond?"\u65e0":this.state.data.discount_diamond+"\u6298")),l.a.createElement(E.a.Item,{label:"\u5546\u54c1\u56fe\u7247"},l.a.createElement("span",{className:"ant-form-pictures"},""===this.state.data.pictures?l.a.createElement("span",null,"\u65e0"):this.state.data.pictures.split(",").map((function(e,t){return l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u5546\u54c1\u56fe\u7247"})})))),l.a.createElement(E.a.Item,{label:"\u4f18\u60e0\u4fe1\u606f\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")))))}}]),t}(l.a.Component),It=E.a.create({name:"product-add-form"})(wt),Dt=(a(106),a(42)),Ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(xe());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.componentDidMount=function(){a.timerID1=setInterval((function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.state.searching){t.next=5;break}return t.next=3,v.a.awrap(xe());case 3:e=t.sent,a.refreshTable(e);case 5:case"end":return t.stop()}}))}),1e3)},a.componentWillUnmount=function(){a.setState=function(){},clearInterval(a.timerID1),clearTimeout(a.timerID2)},a.refreshTable=function(e){var t,n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,v.a.awrap(_());case 2:return t=l.sent,l.next=5,v.a.awrap(ae());case 5:n=l.sent,0===e.status&&0===t.status&&n&&(r=e.data.map((function(e){return e.commodity=JSON.parse(e.commodity),n.data.forEach((function(t){e.customer===t.id&&(e.customer=t)})),e})),a.timerID2=setTimeout((function(){a.setState({data:r.reverse(),isLoading:!1})}),100));case 7:case"end":return l.stop()}}))},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=8;break}return n.next=3,v.a.awrap(we(e));case 3:t=n.sent,a.setState({searching:!0,isLoading:!0}),a.refreshTable(t),n.next=9;break;case 8:a.setState({searching:!1,isLoading:!0});case 9:case"end":return n.stop()}}))},a.handleView=function(e){console.log(e),a.props.history.push({pathname:"/order/view",state:{data:e}})},a.handleCustomerDetail=function(e){a.props.history.push({pathname:"/member/view",state:{data:e}})},a.handleCancel=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355(ID: "+e.id+")\u5417?",okText:"\u786e\u5b9a",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={id:e.id,state:3},r.next=3,v.a.awrap(De(t));case 3:0===r.sent.status&&(n=a.state.data.map((function(t){return t.id===e.id&&(t.state=3),t})),a.setState({data:n}));case 5:case"end":return r.stop()}}))},onCancel:function(){}});case 1:case"end":return t.stop()}}))},a.handleComplete=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u5c06\u8ba2\u5355(ID: "+e.id+")\u8bbe\u7f6e\u4e3a\u5b8c\u6210\u72b6\u6001\u5417?",okText:"\u786e\u5b9a",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={id:e.id,state:4},r.next=3,v.a.awrap(De(t));case 3:0===r.sent.status&&(n=a.state.data.map((function(t){return t.id===e.id&&(t.state=4),t})),a.setState({data:n}));case 5:case"end":return r.stop()}}))},onCancel:function(){}});case 1:case"end":return t.stop()}}))},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.getTimePicker=function(){return 1===a.state.option?l.a.createElement(Dt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:a.handleDatePickerChange}):2===a.state.option?l.a.createElement(Dt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:a.handleWeekPickerChange,format:"YYYY-WW"}):3===a.state.option?l.a.createElement(Dt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:a.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(Dt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:a.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},a.handleSelectChange=function(e){a.setState({option:e}),0===e?(a.setState({searching:!1,isLoading:!0}),a.timerID2=setTimeout((function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(xe());case 2:e=t.sent,a.refreshTable(e),a.setState({isLoading:!1});case 5:case"end":return t.stop()}}))}),100)):a.setState({searching:!0})},a.handleDatePickerChange=function(e,t){var n,r,l,i;return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=new Date(t+" 00:00:00").getTime(),r=new Date(t+" 23:59:59").getTime(),a.setState({isLoading:!0}),e.next=6,v.a.awrap(Ie(n,r));case 6:l=e.sent,a.refreshTable(l),e.next=15;break;case 10:return a.setState({isLoading:!0}),e.next=13,v.a.awrap(xe());case 13:i=e.sent,a.refreshTable(i);case 15:case"end":return e.stop()}}))},a.handleWeekPickerChange=function(e){var t,n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e){i.next=12;break}return t=$e()(e).day(0).format("YYYY/MM/DD")+" 00:00:00",n=$e()(e).day(6).format("YYYY/MM/DD")+" 23:59:59",t=new Date(t).getTime(),n=new Date(n).getTime(),a.setState({isLoading:!0}),i.next=8,v.a.awrap(Ie(t,n));case 8:r=i.sent,a.refreshTable(r),i.next=17;break;case 12:return a.setState({isLoading:!0}),i.next=15,v.a.awrap(xe());case 15:l=i.sent,a.refreshTable(l);case 17:case"end":return i.stop()}}))},a.handleMonthPickerChange=function(e){var t,n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e){i.next=12;break}return t=$e()(e).startOf("month").format("YYYY-MM-DD")+" 23:59:59",n=$e()(e).endOf("month").format("YYYY-MM-DD")+" 23:59:59",t=new Date(t).getTime(),n=new Date(n).getTime(),a.setState({isLoading:!0}),i.next=8,v.a.awrap(Ie(t,n));case 8:r=i.sent,a.refreshTable(r),i.next=17;break;case 12:return a.setState({isLoading:!0}),i.next=15,v.a.awrap(xe());case 15:l=i.sent,a.refreshTable(l);case 17:case"end":return i.stop()}}))},a.handleRangePickerChange=function(e,t){var n,r,l,i;return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[0]||!t[1]){e.next=10;break}return n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),a.setState({isLoading:!0}),e.next=6,v.a.awrap(Ie(n,r));case 6:l=e.sent,a.refreshTable(l),e.next=15;break;case 10:return a.setState({isLoading:!0}),e.next=13,v.a.awrap(xe());case 13:i=e.sent,a.refreshTable(i);case 15:case"end":return e.stop()}}))},a.state={isLoading:!0,data:[],searching:!1,option:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t," [\u67e5\u770b]")}},{title:"\u987e\u5ba2",dataIndex:"customer",key:"customer",render:function(t){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleCustomerDetail(t)}},1===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"blue"},"\u9ec4\u91d1")):2===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"green"},"\u767d\u91d1")):3===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t.name))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3},{text:"\u666e\u901a\u987e\u5ba2",value:0}],onFilter:function(e,t){return e===t.customer.status}},{title:"\u684c\u53f7",dataIndex:"seat",key:"seat",render:function(e){return l.a.createElement("span",null,e,"\u53f7\u684c")},sorter:function(e,t){return e.seat-t.seat}},{title:"\u8ba2\u5355\u5185\u5bb9",dataIndex:"commodity",key:"commodity",render:function(e){return l.a.createElement("div",null,e.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(y.a,{type:"close"}),e.count)})))}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createtime",key:"createtime",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"}),"\xa0",e.getTimeForm(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e)},sorter:function(e,t){return e.amount-t.amount}},{title:"\u8bc4\u4ef7",key:"stars",dataIndex:"stars",render:function(e){if(0===e)return l.a.createElement("span",null,"\u6682\u672a\u8bc4\u4ef7");for(var t=[],a=0;a<e;a++)t.push(a);return t.map((function(e){return l.a.createElement(y.a,{key:e,type:"star",style:{color:"yellow"},theme:"filled"})}))},sorter:function(e,t){return e.stars-t.stars},filters:[{text:"\u672a\u8bc4\u4ef7",value:0},{text:"\u4e00\u661f",value:1},{text:"\u4e8c\u661f",value:2},{text:"\u4e09\u661f",value:3},{text:"\u56db\u661f",value:4},{text:"\u4e94\u661f",value:5}],onFilter:function(e,t){return e===t.stars}},{title:"\u72b6\u6001",dataIndex:"state",key:"state",render:function(e,t){return 0===e?l.a.createElement("div",null,0===t.urged?"\u5df2\u4ed8\u6b3e":l.a.createElement(ft.a,{color:"red"},"\u50ac\u5355")):1===e?l.a.createElement(ft.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===e?"\u5df2\u53d6\u6d88":"\u5df2\u5b8c\u6210"},filters:[{text:"\u5df2\u4ed8\u6b3e",value:0},{text:"\u8bf7\u6c42\u53d6\u6d88",value:1},{text:"\u5df2\u53d6\u6d88",value:2},{text:"\u5df2\u5b8c\u6210",value:3}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return 0===t.state?l.a.createElement("span",null,l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"primary",onClick:function(){return e.handleComplete(t)}},"\u5b8c\u6210")):1===t.state?l.a.createElement("span",null,l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleCancel(t)}},"\u53d6\u6d88")):"/"}}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u8ba2\u5355\u7ba1\u7406","\u5168\u90e8\u8ba2\u5355"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px",overflow:"hidden"}},l.a.createElement("div",{style:{display:"inline-block",width:"70%",textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(ct.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",marginLeft:"10px"}},l.a.createElement(ct.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4"))),l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u641c\u7d22\u8ba2\u5355ID",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component),Ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.props.location.state.data,a.setState({data:e});case 2:case"end":return t.stop()}}))},a.getTime=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={data:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"product-view-container"},l.a.createElement(Ge,{nav:["\u8ba2\u5355\u7ba1\u7406","\u8ba2\u5355\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u8ba2\u5355\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){return e.props.history.push("/order")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u8ba2\u5355ID"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.id)),l.a.createElement(E.a.Item,{label:"\u987e\u5ba2"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.customer.name)),l.a.createElement(E.a.Item,{label:"\u684c\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.seat,"\u53f7")),l.a.createElement(E.a.Item,{label:"\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{textIndent:0,marginLeft:"20px"}},0===this.state.data.state?l.a.createElement("div",null,0===this.state.data.urged?l.a.createElement(ft.a,{color:"blue"},"\u5df2\u4ed8\u6b3e"):l.a.createElement(ft.a,{color:"red"},"\u50ac\u5355")):1===this.state.data.state?l.a.createElement(ft.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===this.state.data.state?l.a.createElement(ft.a,{color:"green"},"\u5df2\u53d6\u6d88"):l.a.createElement(ft.a,{color:"green"},"\u5df2\u5b8c\u6210"))),l.a.createElement(E.a.Item,{label:"\u8ba2\u5355\u5217\u8868"},l.a.createElement("div",{className:"ant-form-text"},this.state.data.commodity.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(y.a,{type:"close"})," ",e.count)})))),l.a.createElement(E.a.Item,{label:"\u4e0b\u5355\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(this.state.data.createtime))),l.a.createElement(E.a.Item,{label:"\u8ba2\u5355\u603b\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.amount.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u5b9e\u4ed8\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.payment.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u6240\u83b7\u79ef\u5206"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.integral)),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")),l.a.createElement(E.a.Item,{label:"\u8bc4\u4ef7\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.stars?"\u6682\u672a\u8bc4\u4ef7":[1,2,3,4,5].map((function(t,a){return l.a.createElement(y.a,{key:a,type:"star",theme:"filled",style:{color:"yellow",marginLeft:"5px",display:t>e.state.data.stars?"none":"inline"}})})))),l.a.createElement(E.a.Item,{label:"\u8bc4\u4ef7\u6587\u5b57"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.stars?"\u6682\u672a\u8bc4\u4ef7":this.state.data.evaluation)))))}}]),t}(l.a.Component),St=E.a.create({name:"product-add-form"})(Ct),Tt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ke());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.componentDidMount=function(){a.timerID1=setInterval((function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.state.searching){t.next=5;break}return t.next=3,v.a.awrap(ke());case 3:e=t.sent,a.refreshTable(e);case 5:case"end":return t.stop()}}))}),1e3)},a.componentWillUnmount=function(){a.setState=function(){},clearInterval(a.timerID1),clearTimeout(a.timerID2)},a.refreshTable=function(e){var t,n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,v.a.awrap(_());case 2:return t=l.sent,l.next=5,v.a.awrap(ae());case 5:n=l.sent,0===e.status&&0===t.status&&n&&(r=e.data.map((function(e){return e.commodity=JSON.parse(e.commodity),n.data.forEach((function(t){e.customer===t.id&&(e.customer=t)})),e})),a.timerID2=setTimeout((function(){a.setState({data:r.reverse(),isLoading:!1})}),100));case 7:case"end":return l.stop()}}))},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=8;break}return n.next=3,v.a.awrap(we(e));case 3:t=n.sent,a.setState({searching:!0,isLoading:!0}),a.refreshTable(t),n.next=9;break;case 8:a.setState({searching:!1,isLoading:!0});case 9:case"end":return n.stop()}}))},a.handleView=function(e){console.log(e),a.props.history.push({pathname:"/order/stage/view",state:{data:e}})},a.handleCustomerDetail=function(e){a.props.history.push({pathname:"/member/view",state:{data:e}})},a.handleCancel=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355(ID: "+e.id+")\u5417?",okText:"\u786e\u5b9a",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={id:e.id,state:3},r.next=3,v.a.awrap(De(t));case 3:0===r.sent.status&&(n=a.state.data.filter((function(t){return t.id!==e.id})),a.setState({data:n}));case 5:case"end":return r.stop()}}))},onCancel:function(){}});case 1:case"end":return t.stop()}}))},a.handleComplete=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u5c06\u8ba2\u5355(ID: "+e.id+")\u8bbe\u7f6e\u4e3a\u5b8c\u6210\u72b6\u6001\u5417?",okText:"\u786e\u5b9a",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={id:e.id,state:4},r.next=3,v.a.awrap(De(t));case 3:0===r.sent.status&&(n=a.state.data.filter((function(t){return t.id!==e.id})),a.setState({data:n}));case 5:case"end":return r.stop()}}))},onCancel:function(){}});case 1:case"end":return t.stop()}}))},a.getTime=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={isLoading:!0,data:[],searching:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t," [\u67e5\u770b]")}},{title:"\u987e\u5ba2",dataIndex:"customer",key:"customer",render:function(t){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleCustomerDetail(t)}},1===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"blue"},"\u9ec4\u91d1")):2===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"green"},"\u767d\u91d1")):3===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(ft.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t.name))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3},{text:"\u666e\u901a\u987e\u5ba2",value:0}],onFilter:function(e,t){return e===t.customer.status}},{title:"\u684c\u53f7",dataIndex:"seat",key:"seat",render:function(e){return l.a.createElement("span",null,e,"\u53f7\u684c")},sorter:function(e,t){return e.seat-t.seat}},{title:"\u8ba2\u5355\u5185\u5bb9",dataIndex:"commodity",key:"commodity",render:function(e){return l.a.createElement("div",null,e.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(y.a,{type:"close"}),e.count)})))}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createtime",key:"createtime",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"}),"\xa0",e.getTime(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e)},sorter:function(e,t){return e.amount-t.amount}},{title:"\u8bc4\u4ef7",key:"stars",dataIndex:"stars",render:function(e){if(0===e)return l.a.createElement("span",null,"\u6682\u672a\u8bc4\u4ef7");for(var t=[],a=0;a<e;a++)t.push(a);return t.map((function(e){return l.a.createElement(y.a,{key:e,type:"star",style:{color:"yellow"},theme:"filled"})}))},sorter:function(e,t){return e.stars-t.stars},filters:[{text:"\u672a\u8bc4\u4ef7",value:0},{text:"\u4e00\u661f",value:1},{text:"\u4e8c\u661f",value:2},{text:"\u4e09\u661f",value:3},{text:"\u56db\u661f",value:4},{text:"\u4e94\u661f",value:5}],onFilter:function(e,t){return e===t.stars}},{title:"\u72b6\u6001",dataIndex:"state",key:"state",render:function(e,t){return 0===e?l.a.createElement("div",null,0===t.urged?l.a.createElement(ft.a,{color:"blue"},"\u5df2\u4ed8\u6b3e"):l.a.createElement(ft.a,{color:"red"},"\u50ac\u5355")):1===e?l.a.createElement(ft.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===e?l.a.createElement(ft.a,{color:"green"},"\u5df2\u53d6\u6d88"):l.a.createElement(ft.a,{color:"green"},"\u5df2\u5b8c\u6210")},filters:[{text:"\u5df2\u4ed8\u6b3e",value:0},{text:"\u8bf7\u6c42\u53d6\u6d88",value:1},{text:"\u5df2\u53d6\u6d88",value:2},{text:"\u5df2\u5b8c\u6210",value:3}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return 0===t.state?l.a.createElement("span",null,l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"primary",onClick:function(){return e.handleComplete(t)}},"\u5b8c\u6210")):1===t.state?l.a.createElement("span",null,l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleCancel(t)}},"\u53d6\u6d88")):"/"}}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u8ba2\u5355\u7ba1\u7406","\u5168\u90e8\u8ba2\u5355"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px",overflow:"hidden"}},l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u641c\u7d22\u8ba2\u5355ID",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component),Ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ne());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.refreshTable=function(e){if(0===e.status){var t=e.data;t=t.map((function(e){return e})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:t})}),300)}},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e),""!==e){n.next=7;break}return n.next=4,v.a.awrap(ne());case 4:n.t0=n.sent,n.next=10;break;case 7:return n.next=9,v.a.awrap(re(e));case 9:n.t0=n.sent;case 10:t=n.t0,a.refreshTable(t);case 12:case"end":return n.stop()}}))},a.handleAdd=function(){a.props.history.push("/member/add")},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u4f1a\u5458"'+e.name+"(ID:"+e.id+')"\u5417?',okText:"\u786e\u5b9a",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(le(e.id));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.id===e.id?t.push():t.push(a)})),a.setState({data:t}));case 4:case"end":return n.stop()}}))},onCancel:function(){}})},a.handleDetail=function(e){a.props.history.push({pathname:"/member/view",state:{data:e}})},a.handleEdit=function(e){a.props.history.push({pathname:"/member/edit",state:{data:e}})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=5;break}return n.next=3,v.a.awrap(Fe(t));case 3:0===n.sent.status&&(a.setState({visible:!1}),a.timerID=setTimeout((function(){x.a.success("\u8bbe\u7f6e\u6210\u529f")}),500));case 5:case"end":return n.stop()}}))}))},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={isLoading:!0,data:[],visible:!1,rule:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u4f1a\u5458ID",key:"id",dataIndex:"id"},{title:"\u6635\u79f0/\u7b49\u7ea7",key:"name",dataIndex:"name",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleDetail(a)}},1===a.status?l.a.createElement("span",null,t," ",l.a.createElement(ft.a,{color:"blue"},"\u9ec4\u91d1")):2===a.status?l.a.createElement("span",null,t," ",l.a.createElement(ft.a,{color:"green"},"\u767d\u91d1")):3===a.status?l.a.createElement("span",null,t," ",l.a.createElement(ft.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3}],onFilter:function(e,t){return e===t.status}},{title:"\u521b\u5efa\u65f6\u95f4",key:"createtime",dataIndex:"createtime",render:function(t){return l.a.createElement("span",null,e.getTimeForm(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u7535\u8bdd",key:"tel",dataIndex:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"phone"})," ",e)}},{title:"\u79ef\u5206",key:"integral",dataIndex:"integral",sorter:function(e,t){return e.integral-t.integral}},{title:"\u8ba2\u5355\u6570\u91cf",key:"orderSum",render:function(e,t){return l.a.createElement("span",null,"\u5f85\u5b8c\u6210")},filters:[{text:"\u6700\u8fd1\u4e00\u5468",value:"0"},{text:"\u6700\u8fd1\u4e00\u6708",value:"1"},{text:"\u6700\u8fd1\u4e00\u5e74",value:"2"}]},{title:"\u6d88\u8d39\u91d1\u989d",key:"orderAmount",render:function(e,t){return l.a.createElement("span",null,"\u5f85\u5b8c\u6210")},filters:[{text:"\u6700\u8fd1\u4e00\u5468",value:"0"},{text:"\u6700\u8fd1\u4e00\u6708",value:"1"},{text:"\u6700\u8fd1\u4e00\u5e74",value:"2"}]},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return l.a.createElement("div",null,l.a.createElement(f.a,{size:"small",type:"primary",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u4f1a\u5458"),l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u4f1a\u5458ID/\u6635\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component),jt=E.a.create()(Ft),Nt=(a(126),a(33)),At=E.a.create({name:"add-member-form"})(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=11;break}return(n=t).createtime=(new Date).getTime(),n.status=1,n.integral=0,n.orderid="",n.deleted=0,r.next=9,v.a.awrap(ie(n));case 9:0===r.sent.status&&(x.a.success("\u65b0\u589e\u4f1a\u5458\u6210\u529f\uff01\u5373\u5c06\u8fd4\u56de\u4f1a\u5458\u5217\u8868\u9875\u9762"),a.timerID=setTimeout((function(){a.props.history.push("/member")}),2e3));case 11:case"end":return r.stop()}}))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4f1a\u5458\u7ba1\u7406","\u65b0\u589e\u4f1a\u5458"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u4f1a\u5458\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d",hasFeedback:!0},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(E.a.Item,{label:"Tel",hasFeedback:!0},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(g.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("status",{rules:[{required:!0}],initialValue:1})(l.a.createElement(Nt.a.Group,{buttonStyle:"solid"},l.a.createElement(Nt.a.Button,{value:1},"\u9ec4\u91d1\u4f1a\u5458"),l.a.createElement(Nt.a.Button,{value:2},"\u767d\u91d1\u4f1a\u5458"),l.a.createElement(Nt.a.Button,{value:3},"\u94bb\u77f3\u4f1a\u5458")))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8",hasFeedback:!0},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Mt=E.a.create({name:"add-member-form"})(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e){l.next=8;break}for(r in(n={}).id=a.props.location.state.data.id,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return l.next=6,v.a.awrap(se(n));case 6:0===l.sent.status&&(x.a.success("\u7f16\u8f91\u4f1a\u5458\u4fe1\u606f\u6210\u529f\uff0c\u5373\u5c06\u8fd4\u56de\u4f1a\u5458\u5217\u8868\u9875\uff01"),a.timerID=setTimeout((function(){a.props.history.push("/member")}),2e3));case 8:case"end":return l.stop()}}))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868","\u7f16\u8f91\u4f1a\u5458"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u4f1a\u5458\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d",hasFeedback:!0},this.props.form.getFieldDecorator("name",{rules:[{required:!0}],initialValue:t.name})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(E.a.Item,{label:"Tel",hasFeedback:!0},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:t.tel})(l.a.createElement(g.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("status",{initialValue:t.status,rules:[{required:!0}]})(l.a.createElement(Nt.a.Group,{buttonStyle:"solid"},l.a.createElement(Nt.a.Button,{value:1},"\u9ec4\u91d1"),l.a.createElement(Nt.a.Button,{value:2},"\u767d\u91d1"),l.a.createElement(Nt.a.Button,{value:3},"\u94bb\u77f3")))),l.a.createElement(E.a.Item,{label:"\u79ef\u5206"},this.props.form.getFieldDecorator("integral",{initialValue:t.integral})(l.a.createElement(Ze.a,{style:{width:"100px"},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8",hasFeedback:!0},this.props.form.getFieldDecorator("note",{initialValue:t.note})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Vt=(a(554),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getTime=function(e){var t=(e=new Date(e)).getMonth()+1;return l.a.createElement("span",null,e.getFullYear()+"-"+t+"-"+e.getDate(),"\xa0\xa0",e.getHours()+":"+e.getMinutes())},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",{className:"customer-view-container"},l.a.createElement(Ge,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868","\u4f1a\u5458\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u4f1a\u5458\u8be6\u60c5"),extra:l.a.createElement(f.a,{onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u4f1a\u5458ID"},l.a.createElement("span",{className:"ant-form-text"},t.id)),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},t.name)),l.a.createElement(E.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},t.tel)),l.a.createElement(E.a.Item,{label:"\u79ef\u5206"},l.a.createElement("span",{className:"ant-form-text"},t.integral)),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{style:{marginLeft:"20px"}},1===t.status?l.a.createElement(ft.a,{color:"blue"},"\u9ec4\u91d1"):2===t.status?l.a.createElement(ft.a,{color:"green"},"\u767d\u91d1"):l.a.createElement(ft.a,{color:"red"},"\u94bb\u77f3"))),l.a.createElement(E.a.Item,{label:"\u521b\u5efa\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(t.createtime))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},t.note?t.note:"\u65e0")))))}}]),t}(l.a.Component)),Yt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ce());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.refreshTable=function(e){if(0===e.status){var t=[],n=[],r=[],l=[];e.data.forEach((function(e){t.push(e.department),r.push(e.duty)})),new Set(t).forEach((function(e){n.push({text:e,value:e})})),new Set(r).forEach((function(e){l.push({text:e,value:e})})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:e.data,departmentFilter:n,dutyFilter:l})}))}},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=6;break}return n.next=3,v.a.awrap(ce());case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,v.a.awrap(me(e));case 8:n.t0=n.sent;case 9:t=n.t0,a.refreshTable(t);case 11:case"end":return n.stop()}}))},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5458\u5de5"'+e.name+"(\u5de5\u53f7\uff1a"+e.workid+')"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(oe(e.workid));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.workid===e.workid?t.push():t.push(a)})),a.setState({data:t}));case 4:case"end":return n.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleAdd=function(){a.props.history.push("/employee/add")},a.handleView=function(e){console.log(e),a.props.history.push({pathname:"/employee/view",state:{data:e}})},a.handleEdit=function(e){a.props.history.push({pathname:"/employee/edit",state:{data:e}})},a.state={isLoading:!0,data:[],dutyFilter:[],departmentFilter:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u5de5\u53f7",key:"workid",dataIndex:"workid",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u59d3\u540d",key:"name",dataIndex:"name"},{title:"\u6027\u522b",key:"gender",dataIndex:"gender",render:function(e){return l.a.createElement("span",null,0===e?"\u5973":"\u7537")},filters:[{text:"\u7537",value:1},{text:"\u5973",value:0}],onFilter:function(e,t){return e===t.gender}},{title:"\u5e74\u9f84",key:"age",dataIndex:"age",sorter:function(e,t){return e.age-t.age}},{title:"\u7535\u8bdd",key:"tel",dataIndex:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"phone"})," ",e)}},{title:"\u5de5\u9f84",key:"workage",dataIndex:"entrytime",render:function(e){return l.a.createElement("span",null,(new Date).getFullYear()-new Date(e).getFullYear()||"\u672a\u6ee1\u4e00\u5e74")},sorter:function(e,t){return e.entrytime-t.entrytime}},{title:"\u90e8\u95e8",key:"department",dataIndex:"department",filters:this.state.departmentFilter,onFilter:function(e,t){return e===t.department}},{title:"\u804c\u8d23",key:"duty",dataIndex:"duty",render:function(e,t){return 0===t.level?l.a.createElement("span",null,e," ",l.a.createElement(ft.a,{color:"blue"},"\u521d\u7ea7")):1===t.level?l.a.createElement("span",null,e," ",l.a.createElement(ft.a,{color:"green"},"\u4e2d\u7ea7")):l.a.createElement("span",null,e," ",l.a.createElement(ft.a,{color:"red"},"\u9ad8\u7ea7"))},filters:this.state.dutyFilter,onFilter:function(e,t){return e===t.duty}},{title:"\u6708\u85aa",key:"salary",dataIndex:"salary",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.salary-t.salary}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return l.a.createElement("div",null,l.a.createElement(f.a,{size:"small",type:"primary",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u5458\u5de5"),l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u5de5\u53f7/\u59d3\u540d",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.workid},bordered:!0}))}}]),t}(l.a.Component),Lt=(a(252),a(116)),qt=E.a.create({name:"add-employee-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleNext=function(){a.props.form.validateFields(["name","identity","gender","age","nation","birthday","origin","marriage","institution","degree","graduatetime"],(function(e,t){if(!e){var n=a.state.data,r=a.state.current;for(var l in t)t.hasOwnProperty(l)&&(n[l]=t[l]);a.setState({current:r+1,data:n})}}))},a.handlePrevious=function(){var e=a.state.current;a.setState({current:e-1})},a.handleSubmit=function(e){e.preventDefault();a.props.form.validateFields(["profile","workid","entrytime","department","duty","level","tel","address","salary","note"],(function(e,t){var n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=11;break}for(l in n=a.state.data,r=a.state.current,t)t.hasOwnProperty(l)&&(n[l]=t[l]);return n.birthday=new Date(n.birthday).getTime(),n.graduatetime=new Date(n.graduatetime).getTime(),n.entrytime=new Date(n.entrytime).getTime(),i.next=9,v.a.awrap(ue(n));case 9:0===i.sent.status&&(a.setState({data:n,current:r+1}),x.a.success("\u65b0\u589e\u5458\u5de5\u4fe1\u606f\u6210\u529f\uff01"));case 11:case"end":return i.stop()}}))}))},a.onTabChange=function(e){a.setState({key:e})},a.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()>=10?t.getDate():"0"+t.getDate();return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a+"-"+n},a.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a},a.state={current:0,value1:{},data:{},key:"tab1"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a={tab1:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.identity)),l.a.createElement(E.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.gender?"\u5973":"\u7537")),l.a.createElement(E.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.age,"\u5c81")),l.a.createElement(E.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.nation)),l.a.createElement(E.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.birthday))),l.a.createElement(E.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.origin)),l.a.createElement(E.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(E.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.degree)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.institution)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(this.state.data.graduatetime)))),tab2:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.workid)),l.a.createElement(E.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.entrytime))),l.a.createElement(E.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.department)),l.a.createElement(E.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.duty)),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.level?"\u521d\u7ea7":1===this.state.data.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(E.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tel)),l.a.createElement(E.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.address)),l.a.createElement(E.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.salary," \u5143")),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note)),l.a.createElement(E.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},this.state.data.profile?l.a.createElement("img",{src:"/upload/"+this.state.data.profile,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}}):l.a.createElement("span",null,"\u65e0"))))},n=[{title:"\u586b\u5199\u57fa\u672c\u4fe1\u606f",content:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(E.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},this.props.form.getFieldDecorator("identity",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\u7801"}))),l.a.createElement(E.a.Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{rules:[{required:!0}]})(l.a.createElement(Nt.a.Group,null,l.a.createElement(Nt.a,{value:1,style:{margin:"0 20px"}},"\u7537"),l.a.createElement(Nt.a,{value:0},"\u5973")))),l.a.createElement(E.a.Item,{label:"\u5e74\u9f84"},this.props.form.getFieldDecorator("age",{rules:[{required:!0}]})(l.a.createElement(Ze.a,{style:{width:"150px"}})),l.a.createElement("span",{className:"ant-form-text"},"\u5c81")),l.a.createElement(E.a.Item,{label:"\u6c11\u65cf"},this.props.form.getFieldDecorator("nation",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6c11\u65cf"}))),l.a.createElement(E.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},this.props.form.getFieldDecorator("birthday",{rules:[{required:!0}]})(l.a.createElement(Dt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(E.a.Item,{label:"\u7c4d\u8d2f"},this.props.form.getFieldDecorator("origin",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7c4d\u8d2f"}))),l.a.createElement(E.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},this.props.form.getFieldDecorator("marriage",{rules:[{required:!0}]})(l.a.createElement(Nt.a.Group,null,l.a.createElement(Nt.a,{value:0,style:{margin:"0 20px"}},"\u672a\u5a5a"),l.a.createElement(Nt.a,{value:1},"\u5df2\u5a5a")))),l.a.createElement(E.a.Item,{label:"\u5b66\u5386"},this.props.form.getFieldDecorator("degree",{rules:[{required:!0}]})(l.a.createElement(ct.a,{placeholder:"\u8bf7\u9009\u62e9\u5b66\u5386",style:{width:"187px"}},l.a.createElement(ct.a.Option,{value:"\u535a\u58eb"},"\u535a\u58eb"),l.a.createElement(ct.a.Option,{value:"\u7855\u58eb"},"\u7855\u58eb"),l.a.createElement(ct.a.Option,{value:"\u672c\u79d1"},"\u672c\u79d1"),l.a.createElement(ct.a.Option,{value:"\u9ad8\u4e2d"},"\u9ad8\u4e2d"),l.a.createElement(ct.a.Option,{value:"\u521d\u4e2d"},"\u521d\u4e2d"),l.a.createElement(ct.a.Option,{value:"\u5c0f\u5b66"},"\u5c0f\u5b66")))),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},this.props.form.getFieldDecorator("institution",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6bd5\u4e1a\u9662\u6821"}))),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},this.props.form.getFieldDecorator("graduatetime",{rules:[{required:!0}]})(l.a.createElement(Dt.a.MonthPicker,{format:"YYYY/MM"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{type:"primary",style:{margin:"50px 0 0 450px"},onClick:function(){return e.handleNext(0)}},"\u4e0b\u4e00\u6b65")))},{title:"\u586b\u5199\u5de5\u4f5c\u4fe1\u606f",content:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u5de5\u53f7"},this.props.form.getFieldDecorator("workid",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u53f7"}))),l.a.createElement(E.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},this.props.form.getFieldDecorator("entrytime",{rules:[{required:!0}]})(l.a.createElement(Dt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(E.a.Item,{label:"\u90e8\u95e8"},this.props.form.getFieldDecorator("department",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u90e8\u95e8"}))),l.a.createElement(E.a.Item,{label:"\u804c\u8d23"},this.props.form.getFieldDecorator("duty",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u804c\u8d23"}))),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("level",{rules:[{required:!0}]})(l.a.createElement(Nt.a.Group,{buttonStyle:"solid"},l.a.createElement(Nt.a.Button,{value:0},"\u521d \u7ea7"),l.a.createElement(Nt.a.Button,{value:1},"\u4e2d \u7ea7"),l.a.createElement(Nt.a.Button,{value:2},"\u9ad8 \u7ea7")))),l.a.createElement(E.a.Item,{label:"Tel"},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(g.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(E.a.Item,{label:"\u4f4f\u5740"},this.props.form.getFieldDecorator("address",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f4f\u5740"}))),l.a.createElement(E.a.Item,{label:"\u6708\u85aa"},this.props.form.getFieldDecorator("salary",{rules:[{required:!0}]})(l.a.createElement(g.a,{addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u6708\u85aa"}))),l.a.createElement(E.a.Item,{label:"\u7167\u7247"},this.props.form.getFieldDecorator("profile",{rules:[{required:!0}]})(l.a.createElement(yt,null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(g.a.Group,{style:{marginLeft:"410px"}},l.a.createElement(f.a,{type:"primary",style:{marginRight:"50px"},onClick:function(){return e.handlePrevious()}},"\u4e0a\u4e00\u6b65"),l.a.createElement(f.a,{type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u786e\u8ba4\u63d0\u4ea4"))))},{title:"\u63d0\u4ea4\u6210\u529f",content:l.a.createElement(He.a,{style:{width:"80%",margin:"20px auto"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){e.onTabChange(t)}},a[this.state.key])}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u65b0\u589e\u5458\u5de5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5458\u5de5\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(Lt.a,{current:this.state.current,style:{margin:"40px auto",width:"550px"}},n.map((function(e,t){return l.a.createElement(Lt.a.Step,{key:t,title:e.title})}))),l.a.createElement("div",{className:"steps-content"},n[this.state.current].content)))}}]),t}(l.a.Component)),Pt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onTabChange=function(e){a.setState({key:e})},a.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()>=10?t.getDate():"0"+t.getDate();return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a+"-"+n},a.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a},a.state={key:"tab1"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a=this.props.location.state.data,n={tab1:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},a.name)),l.a.createElement(E.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},a.identity)),l.a.createElement(E.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===a.gender?"\u5973":"\u7537")),l.a.createElement(E.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},a.age,"\u5c81")),l.a.createElement(E.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},a.nation)),l.a.createElement(E.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(a.birthday))),l.a.createElement(E.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},a.origin)),l.a.createElement(E.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===a.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(E.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},a.degree)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},a.institution)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(a.graduatetime)))),tab2:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},a.workid)),l.a.createElement(E.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(a.entrytime))),l.a.createElement(E.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},a.department)),l.a.createElement(E.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},a.duty)),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===a.level?"\u521d\u7ea7":1===a.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(E.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},a.tel)),l.a.createElement(E.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},a.address)),l.a.createElement(E.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},a.salary.toFixed(2)," \u5143")),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},a.note?a.note:"\u65e0")),l.a.createElement(E.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},""===a.profile?l.a.createElement("span",null,"\u65e0"):a.profile.split(",").map((function(e,t){return l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}})})))))};return l.a.createElement("div",{className:"employee-view-container"},l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u5458\u5de5\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5458\u5de5\u8be6\u60c5"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){return e.onTabChange(t)}},n[this.state.key]))}}]),t}(l.a.Component),Wt=E.a.create({name:"edit-employee-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleNext=function(){a.props.form.validateFields(["name","identity","gender","age","nation","birthday","origin","marriage","institution","degree","graduatetime"],(function(e,t){if(!e){var n=a.state.data,r=a.state.current;for(var l in t)t.hasOwnProperty(l)&&(n[l]=t[l]);a.setState({current:r+1,data:n})}}))},a.handlePrevious=function(){var e=a.state.current;a.setState({current:e-1})},a.handleSubmit=function(e){e.preventDefault();a.props.form.validateFields(["profile","workid","entrytime","department","duty","level","tel","address","salary","note"],(function(e,t){var n,r,l,i,s;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=14;break}for(l in n=a.state.data,r=a.state.current,t)t.hasOwnProperty(l)&&(n[l]=t[l]);for(s in n.birthday=new Date(n.birthday).getTime(),n.graduatetime=new Date(n.graduatetime).getTime(),n.entrytime=new Date(n.entrytime).getTime(),(i={}).workid=n.workid,n)n.hasOwnProperty(s)&&(i[s]=n[s]);return c.next=12,v.a.awrap(de(i));case 12:0===c.sent.status&&(a.setState({data:n,current:r+1}),x.a.success("\u7f16\u8f91\u5458\u5de5\u4fe1\u606f\u6210\u529f\uff01"));case 14:case"end":return c.stop()}}))}))},a.onTabChange=function(e){a.setState({key:e})},a.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1;return t.getFullYear()+"-"+a+"-"+t.getDate()},a.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return t.getFullYear()+"-"+a},a.state={current:0,value1:{},data:{},key:"tab1"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a=this.props.location.state.data,n={tab1:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.identity)),l.a.createElement(E.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.gender?"\u5973":"\u7537")),l.a.createElement(E.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.age,"\u5c81")),l.a.createElement(E.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.nation)),l.a.createElement(E.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.birthday))),l.a.createElement(E.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.origin)),l.a.createElement(E.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(E.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.degree)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.institution)),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(this.state.data.graduatetime)))),tab2:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(E.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.workid)),l.a.createElement(E.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.entrytime))),l.a.createElement(E.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.department)),l.a.createElement(E.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.duty)),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.level?"\u521d\u7ea7":1===this.state.data.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(E.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tel)),l.a.createElement(E.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.address)),l.a.createElement(E.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.salary," \u5143")),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")),l.a.createElement(E.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},this.state.data.profile?l.a.createElement("img",{src:"/upload/"+this.state.data.profile,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}}):l.a.createElement("span",null,"\u65e0"))))},r=[{title:"\u586b\u5199\u57fa\u672c\u4fe1\u606f",content:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}],initialValue:a.name})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(E.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},this.props.form.getFieldDecorator("identity",{rules:[{required:!0}],initialValue:a.identity})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\u7801"}))),l.a.createElement(E.a.Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:a.gender,rules:[{required:!0}]})(l.a.createElement(Nt.a.Group,null,l.a.createElement(Nt.a,{value:1,style:{margin:"0 20px"}},"\u7537"),l.a.createElement(Nt.a,{value:0},"\u5973")))),l.a.createElement(E.a.Item,{label:"\u5e74\u9f84"},this.props.form.getFieldDecorator("age",{rules:[{required:!0}],initialValue:a.age})(l.a.createElement(Ze.a,{style:{width:"150px"}})),l.a.createElement("span",{className:"ant-form-text"},"\u5c81")),l.a.createElement(E.a.Item,{label:"\u6c11\u65cf"},this.props.form.getFieldDecorator("nation",{rules:[{required:!0}],initialValue:a.nation})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6c11\u65cf"}))),l.a.createElement(E.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},this.props.form.getFieldDecorator("birthday",{rules:[{required:!0}],initialValue:$e()(new Date(a.birthday),"YYYYMMDD")})(l.a.createElement(Dt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(E.a.Item,{label:"\u7c4d\u8d2f"},this.props.form.getFieldDecorator("origin",{rules:[{required:!0}],initialValue:a.origin})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7c4d\u8d2f"}))),l.a.createElement(E.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},this.props.form.getFieldDecorator("marriage",{rules:[{required:!0}],initialValue:a.marriage})(l.a.createElement(Nt.a.Group,null,l.a.createElement(Nt.a,{value:0,style:{margin:"0 20px"}},"\u672a\u5a5a"),l.a.createElement(Nt.a,{value:1},"\u5df2\u5a5a")))),l.a.createElement(E.a.Item,{label:"\u5b66\u5386"},this.props.form.getFieldDecorator("degree",{rules:[{required:!0}],initialValue:a.degree})(l.a.createElement(ct.a,{placeholder:"\u8bf7\u9009\u62e9\u5b66\u5386",style:{width:"187px"}},l.a.createElement(ct.a.Option,{value:"\u535a\u58eb"},"\u535a\u58eb"),l.a.createElement(ct.a.Option,{value:"\u7855\u58eb"},"\u7855\u58eb"),l.a.createElement(ct.a.Option,{value:"\u672c\u79d1"},"\u672c\u79d1"),l.a.createElement(ct.a.Option,{value:"\u9ad8\u4e2d"},"\u9ad8\u4e2d"),l.a.createElement(ct.a.Option,{value:"\u521d\u4e2d"},"\u521d\u4e2d"),l.a.createElement(ct.a.Option,{value:"\u5c0f\u5b66"},"\u5c0f\u5b66")))),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},this.props.form.getFieldDecorator("institution",{rules:[{required:!0}],initialValue:a.institution})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6bd5\u4e1a\u9662\u6821"}))),l.a.createElement(E.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},this.props.form.getFieldDecorator("graduatetime",{rules:[{required:!0}],initialValue:$e()(new Date(a.graduatetime),"YYYYMMDD")})(l.a.createElement(Dt.a.MonthPicker,{format:"YYYY/MM"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{type:"primary",style:{margin:"50px 0 0 450px"},onClick:function(){return e.handleNext(0)}},"\u4e0b\u4e00\u6b65")))},{title:"\u586b\u5199\u5de5\u4f5c\u4fe1\u606f",content:l.a.createElement(E.a,Object.assign({},t,{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u5de5\u53f7"},this.props.form.getFieldDecorator("workid",{rules:[{required:!0}],initialValue:a.workid})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u53f7",disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},this.props.form.getFieldDecorator("entrytime",{rules:[{required:!0}],initialValue:$e()(new Date(a.entrytime),"YYYY/MM/DD")})(l.a.createElement(Dt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(E.a.Item,{label:"\u90e8\u95e8"},this.props.form.getFieldDecorator("department",{rules:[{required:!0}],initialValue:a.department})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u90e8\u95e8"}))),l.a.createElement(E.a.Item,{label:"\u804c\u8d23"},this.props.form.getFieldDecorator("duty",{rules:[{required:!0}],initialValue:a.duty})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u804c\u8d23"}))),l.a.createElement(E.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("level",{rules:[{required:!0}],initialValue:a.level})(l.a.createElement(Nt.a.Group,{buttonStyle:"solid"},l.a.createElement(Nt.a.Button,{value:0},"\u521d \u7ea7"),l.a.createElement(Nt.a.Button,{value:1},"\u4e2d \u7ea7"),l.a.createElement(Nt.a.Button,{value:2},"\u9ad8 \u7ea7")))),l.a.createElement(E.a.Item,{label:"Tel"},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:a.tel})(l.a.createElement(g.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(E.a.Item,{label:"\u4f4f\u5740"},this.props.form.getFieldDecorator("address",{rules:[{required:!0}],initialValue:a.address})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u4f4f\u5740"}))),l.a.createElement(E.a.Item,{label:"\u6708\u85aa"},this.props.form.getFieldDecorator("salary",{rules:[{required:!0}],initialValue:a.salary})(l.a.createElement(g.a,{addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u6708\u85aa"}))),l.a.createElement(E.a.Item,{label:"\u7167\u7247"},this.props.form.getFieldDecorator("profile",{rules:[{required:!0}],initialValue:a.profile})(l.a.createElement(yt,{imgs:a.profile}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:a.note})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(g.a.Group,{style:{marginLeft:"410px"}},l.a.createElement(f.a,{type:"primary",style:{marginRight:"50px"},onClick:function(){return e.handlePrevious()}},"\u4e0a\u4e00\u6b65"),l.a.createElement(f.a,{type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u786e\u8ba4\u63d0\u4ea4"))))},{title:"\u63d0\u4ea4\u6210\u529f",content:l.a.createElement(He.a,{style:{width:"80%",margin:"20px auto"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){e.onTabChange(t)}},n[this.state.key])}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u7f16\u8f91\u5458\u5de5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5458\u5de5\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(Lt.a,{current:this.state.current,style:{margin:"40px auto",width:"550px"}},r.map((function(e,t){return l.a.createElement(Lt.a.Step,{key:t,title:e.title})}))),l.a.createElement("div",{className:"steps-content"},r[this.state.current].content)))}}]),t}(l.a.Component)),zt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(Oe());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.refreshTable=function(e){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(ge());case 2:t=r.sent,0===e.status&&0===t.status&&(n=e.data.map((function(a,n){var r=[];a.index=n,e.data.forEach((function(e){a.creater===e.id&&(a.createrRole=e.name)})),t.data.forEach((function(e){a.creater===e.id&&(a.createrName=e.username),a.id===e.role&&r.push(e.username)})),a.roleUser=r;var l=[{title:"\u8ba2\u5355\u7ba1\u7406",display:0,children:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{title:"\u5546\u54c1\u7ba1\u7406",display:0,children:[{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{title:"\u5e93\u5b58\u7ba1\u7406",display:0,children:[{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{title:"\u4f1a\u5458\u7ba1\u7406",display:0,children:[{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{title:"\u4eba\u4e8b\u7ba1\u7406",display:0,children:[{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];return a.permission.split("-").forEach((function(e){switch(e){case"\u5168\u90e8\u8ba2\u5355":l[0].display=1,l[0].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":l[0].display=1,l[0].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":l[1].display=1,l[1].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":l[1].display=1,l[1].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":l[1].display=1,l[1].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":l[2].display=1,l[2].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":l[2].display=1,l[2].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":l[3].display=1,l[3].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":l[3].display=1,l[3].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":l[4].display=1,l[4].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":l[4].display=1,l[4].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":l[4].display=1,l[4].children[2].display=1}})),a.permission=l,a})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:n})}),300));case 4:case"end":return r.stop()}}))},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u89d2\u8272"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Ce(e.id));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.id===e.id?t.push():t.push(a)})),a.setState({data:t}));case 4:case"end":return n.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleView=function(e){a.setState({viewVisible:!0,role:e})},a.handleAdd=function(){a.props.history.push("/employee/role/add")},a.handleEdit=function(e){a.props.history.push({pathname:"/employee/role/edit",state:{data:e}})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={isLoading:!0,data:[],viewVisible:!1,role:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",key:"son",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"}),"\xa0",e.getTimeForm(t))},sorter:function(e,t){return t.createtime-e.createtime}},{title:"\u521b\u5efa\u4eba",dataIndex:"createrName",key:"createrName",render:function(e,t){return l.a.createElement("span",null,e," ",l.a.createElement(ft.a,{color:"green"},t.createrRole))}},{title:"\u89d2\u8272\u7528\u6237",dataIndex:"roleUser",key:"roleUser",render:function(e){return l.a.createElement("span",null,0!==e.length?e.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("span",null,e))})):"/")}},{title:"\u5907\u6ce8",dataIndex:"note",key:"note",render:function(e){return l.a.createElement("span",null,e||"/")}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(f.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u89d2\u8272")),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}),l.a.createElement(Xe.a,{title:l.a.createElement("span",null,"\u89d2\u8272\u6743\u9650-",this.state.role.name),visible:this.state.viewVisible,onCancel:function(){e.setState({viewVisible:!1})},footer:[l.a.createElement(f.a,{type:"primary",key:"view-ok",onClick:function(){return e.setState({viewVisible:!1})}},"\u786e\u8ba4")]},l.a.createElement("div",{style:{marginLeft:"100px"}},this.state.role.permission?this.state.role.permission.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(y.a,{type:"caret-down",style:{color:"#1DA57A"}}),e.title),e.children.map((function(e,t){return 1===e.display?l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(y.a,{type:"check",style:{color:"#1DA57A"}}),"\xa0",e.title):l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(y.a,{type:"close",style:{color:"#fa7f3e"}}),"\xa0",e.title)})))})):null)))}}]),t}(l.a.Component),_t=E.a.create({name:"role-add"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e){l.next=12;break}return n=[],a.state.data.forEach((function(e){1===e.display?n.push(e.title):n.push()})),(r=t).createtime=new Date(r.createtime).getTime(),r.creater=je.user.id,r.permission=n.join("-"),r.deleted=0,l.next=10,v.a.awrap(Se(r));case 10:0===l.sent.status&&(x.a.success("\u65b0\u589e\u89d2\u8272\u6210\u529f, \u5373\u5c06\u8fd4\u56de\u89d2\u8272\u7ba1\u7406\u5217\u8868"),a.timerID=setTimeout((function(){a.props.history.push("/employee/role")}),2e3));case 12:case"end":return l.stop()}}))}))},a.handleChange=function(e,t){var n=a.state.data;"object"===typeof t?e.target.checked?t.forEach((function(e){n[e].display=1})):t.forEach((function(e){n[e].display=0})):n[t].display=1-n[t].display,a.setState({data:n})},a.getTimeForm=function(){var e=new Date,t=e.getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={data:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0},{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0},{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0},{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0},{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406","\u65b0\u589e\u89d2\u8272"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u89d2\u8272\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee/role")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u521b\u5efa\u65f6\u95f4\uff1a"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTimeForm()})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u521b\u5efa\u4eba\uff1a"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:je.user.username})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u89d2\u8272\u540d\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}]})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u6743\u9650\uff1a"},t.getFieldDecorator("permission",{initialValue:"perimission",rules:[{required:!0}]})(l.a.createElement(g.a,{style:{display:"none"}}))),l.a.createElement("div",{style:{margin:"-53px 0 40px 340px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[0,1])}},"\u8ba2\u5355\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,0)},checked:1===this.state.data[0].display},"\u5168\u90e8\u8ba2\u5355"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,1)},checked:1===this.state.data[1].display,style:{marginBottom:"10px"}},"\u524d\u53f0\u8ba2\u5355"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[2,3,4])}},"\u5546\u54c1\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,2)},checked:1===this.state.data[2].display},"\u5546\u54c1\u5206\u7c7b"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,3)},checked:1===this.state.data[3].display},"\u5546\u54c1\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,4)},checked:1===this.state.data[4].display,style:{marginBottom:"10px"}},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[5,6])}},"\u5e93\u5b58\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,5)},checked:1===this.state.data[5].display},"\u5e93\u5b58\u4fe1\u606f"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,6)},checked:1===this.state.data[6].display},"\u5e93\u5b58\u76d8\u70b9"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[7,8])}},"\u4f1a\u5458\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,7)},checked:1===this.state.data[7].display},"\u4f1a\u5458\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,8)},checked:1===this.state.data[8].display},"\u65b0\u589e\u4f1a\u5458"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[9,10,11])}},"\u4eba\u4e8b\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,9)},checked:1===this.state.data[9].display},"\u5458\u5de5\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,10)},checked:1===this.state.data[10].display},"\u7528\u6237\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,11)},checked:1===this.state.data[11].display,style:{marginBottom:"10px"}},"\u89d2\u8272\u7ba1\u7406"),l.a.createElement("br",null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Rt=E.a.create({name:"role-add"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e=a.props.location.state.data,t=[];e.permission.forEach((function(e){t=t.concat(e.children)})),e.permission=t,a.setState({data:e.permission})},a.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e){l.next=11;break}return n=[],a.state.data.forEach((function(e){1===e.display?n.push(e.title):n.push()})),(r=t).permission=n.join("-"),r.creater=a.props.location.state.data.creater,r.createtime=new Date(r.createtime).getTime(),l.next=9,v.a.awrap(Te(r));case 9:0===l.sent.status&&(x.a.success("\u7f16\u8f91\u89d2\u8272\u6210\u529f, \u5373\u5c06\u8fd4\u56de\u89d2\u8272\u7ba1\u7406\u9875\u9762"),a.timerID=setTimeout((function(){a.props.history.push("/employee/role")}),2e3));case 11:case"end":return l.stop()}}))}))},a.handleChange=function(e,t){var n=a.state.data;"object"===typeof t?e.target.checked?t.forEach((function(e){n[e].display=1})):t.forEach((function(e){n[e].display=0})):n[t].display=1-n[t].display,a.setState({data:n})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.getFatherChecked=function(e){var t=!0;return e.forEach((function(e){0===a.state.data[e].display&&(t=!1)})),t},a.state={data:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form,a=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406","\u7f16\u8f91\u89d2\u8272"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u89d2\u8272\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee/role")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"ID\uff1a",style:{display:"none"}},t.getFieldDecorator("id",{initialValue:a.id})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u521b\u5efa\u65f6\u95f4\uff1a"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTimeForm(a.createtime)})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u521b\u5efa\u4eba\uff1a"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:a.createrName})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u89d2\u8272\u540d\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:a.name})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u6743\u9650\uff1a"},t.getFieldDecorator("permission",{initialValue:"perimission",rules:[{required:!0}]})(l.a.createElement(g.a,{style:{display:"none"}}))),l.a.createElement("div",{style:{margin:"-53px 0 40px 340px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[0,1])},defaultChecked:this.getFatherChecked([0,1])},"\u8ba2\u5355\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,0)},checked:1===this.state.data[0].display},"\u5168\u90e8\u8ba2\u5355"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,1)},checked:1===this.state.data[1].display,style:{marginBottom:"10px"}},"\u524d\u53f0\u8ba2\u5355"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[2,3,4])},defaultChecked:this.getFatherChecked([2,3,4])},"\u5546\u54c1\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,2)},checked:1===this.state.data[2].display},"\u5546\u54c1\u5206\u7c7b"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,3)},checked:1===this.state.data[3].display},"\u5546\u54c1\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,4)},checked:1===this.state.data[4].display,style:{marginBottom:"10px"}},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[5,6])},defaultChecked:this.getFatherChecked([5,6])},"\u5e93\u5b58\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,5)},checked:1===this.state.data[5].display},"\u5e93\u5b58\u4fe1\u606f"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,6)},checked:1===this.state.data[6].display},"\u5e93\u5b58\u76d8\u70b9"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[7,8])},defaultChecked:this.getFatherChecked([7,8])},"\u4f1a\u5458\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,7)},checked:1===this.state.data[7].display},"\u4f1a\u5458\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,8)},checked:1===this.state.data[8].display},"\u65b0\u589e\u4f1a\u5458"),l.a.createElement("br",null)),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,[9,10,11])},defaultChecked:this.getFatherChecked([9,10,11])},"\u4eba\u4e8b\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,9)},checked:1===this.state.data[9].display},"\u5458\u5de5\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,10)},checked:1===this.state.data[10].display},"\u7528\u6237\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(gt.a,{onChange:function(t){return e.handleChange(t,11)},checked:1===this.state.data[11].display,style:{marginBottom:"10px"}},"\u89d2\u8272\u7ba1\u7406"),l.a.createElement("br",null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:a.note})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Ht=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ge());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.refreshTable=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Oe());case 2:t=n.sent,0===e.status&&0===t.status&&(a.setState({isLoading:!0}),a.timerID=setTimeout((function(){var n=e.data.map((function(e,a){return e.index=a,t.data.forEach((function(t){if(e.role===t.id){e.role=t;var a=[{title:"\u8ba2\u5355\u7ba1\u7406",display:0,children:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{title:"\u5546\u54c1\u7ba1\u7406",display:0,children:[{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{title:"\u5e93\u5b58\u7ba1\u7406",display:0,children:[{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{title:"\u4f1a\u5458\u7ba1\u7406",display:0,children:[{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{title:"\u4eba\u4e8b\u7ba1\u7406",display:0,children:[{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];e.role.permission.split("-").forEach((function(e){switch(e){case"\u5168\u90e8\u8ba2\u5355":a[0].display=1,a[0].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":a[0].display=1,a[0].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":a[1].display=1,a[1].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":a[1].display=1,a[1].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":a[1].display=1,a[1].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":a[2].display=1,a[2].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":a[2].display=1,a[2].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":a[3].display=1,a[3].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":a[3].display=1,a[3].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":a[4].display=1,a[4].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":a[4].display=1,a[4].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":a[4].display=1,a[4].children[2].display=1}})),e.role.permission=a}})),e}));a.setState({isLoading:!1,data:n})}),300));case 4:case"end":return n.stop()}}))},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u7528\u6237"'+e.username+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(ye(e.id));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.id===e.id?t.push():t.push(a)})),a.setState({data:t}));case 4:case"end":return n.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleAdd=function(){a.props.history.push("/employee/user/add")},a.handleEdit=function(e){a.props.history.push({pathname:"/employee/user/edit",state:{data:e}})},a.handleRoleView=function(e){console.log(e),a.setState({visible:!0,role:e})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={isLoading:!0,data:[],visible:!1,role:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u7528\u6237\u540d\u79f0",dataIndex:"username",key:"username"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",key:"son",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"})," ",e.getTimeForm(t))},sorter:function(e,t){return t.createtime-e.createtime}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role",key:"role",render:function(t){return l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleRoleView(t)}},t.name)}},{title:"\u7535\u8bdd",dataIndex:"tel",key:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"phone"}),"+86 ",e)}},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u5bc6\u7801",dataIndex:"password",key:"password"},{title:"\u5907\u6ce8",dataIndex:"note",key:"note",render:function(e){return e||"/"}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(f.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u8bbe\u7f6e"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u521b\u5efa\u7528\u6237")),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}),l.a.createElement(Xe.a,{title:l.a.createElement("span",null,"\u89d2\u8272\u6743\u9650-",this.state.role.name),visible:this.state.visible,onCancel:function(){e.setState({visible:!1})},footer:[l.a.createElement(f.a,{type:"primary",key:"view-ok",onClick:function(){return e.setState({visible:!1})}},"\u786e\u8ba4")]},l.a.createElement("div",{style:{marginLeft:"100px"}},this.state.role.permission?this.state.role.permission.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(y.a,{type:"caret-down",style:{color:"#1DA57A"}}),e.title),e.children.map((function(e,t){return 1===e.display?l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(y.a,{type:"check",style:{color:"#1DA57A"}}),"\xa0",e.title):l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(y.a,{type:"close",style:{color:"#fa7f3e"}}),"\xa0",e.title)})))})):null)))}}]),t}(l.a.Component),Ut=E.a.create({name:"user-add"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Oe());case 2:0===(e=n.sent).status&&(t=[],e.data.forEach((function(e){t.push({key:e.id,value:e.name})})),a.setState({options:t}));case 4:case"end":return n.stop()}}))},a.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=9;break}return(n=t).createtime=(new Date).getTime(),n.deleted=0,console.log(t),r.next=7,v.a.awrap(be(n));case 7:0===r.sent.status&&(x.a.success("\u65b0\u589e\u7528\u6237\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u7528\u6237\u5217\u8868\u9875\u9762"),a.timerID=setTimeout((function(){a.props.history.push("/employee/user")}),2e3));case 9:case"end":return r.stop()}}))}))},a.state={options:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868","\u521b\u5efa\u7528\u6237"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u7528\u6237\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/employee/user")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u7528\u6237\u540d\uff1a"},t.getFieldDecorator("username",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),l.a.createElement(E.a.Item,{label:"\u5bc6\u7801\uff1a"},t.getFieldDecorator("password",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801"}))),l.a.createElement(E.a.Item,{label:"\u89d2\u8272\uff1a"},t.getFieldDecorator("role",{rules:[{required:!0}]})(l.a.createElement(ct.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},this.state.options.map((function(e){return l.a.createElement(ct.a.Option,{key:e.key},e.value)}))))),l.a.createElement(E.a.Item,{label:"Tel\uff1a"},t.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801",addonBefore:"+86"}))),l.a.createElement(E.a.Item,{label:"\u90ae\u7bb1\uff1a"},t.getFieldDecorator("email",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1"}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Gt=E.a.create({name:"user-edit"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(Oe());case 2:0===(e=r.sent).status&&(t=[],n=a.props.location.state.data,e.data.forEach((function(e){t.push({key:e.id,value:e.name}),n.role===e.id&&(n.rolename=e.name)})),a.setState({options:t,data:n}));case 4:case"end":return r.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=8;break}return(n=t).createtime=(new Date).getTime(),a.state.options.forEach((function(e){e.value===n.role&&(n.role=e.key)})),r.next=6,v.a.awrap(ve(n));case 6:0===r.sent.status&&(x.a.success("\u66f4\u65b0\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u7528\u6237\u5217\u8868"),a.timerID=setTimeout((function(){a.props.history.push("/employee/user")}),1500));case 8:case"end":return r.stop()}}))}))},a.state={data:{},options:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868","\u7f16\u8f91\u7528\u6237"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u7528\u6237\u4fe1\u606f"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/user")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"ID\uff1a",style:{display:"none"}},t.getFieldDecorator("id",{rules:[{required:!0}],initialValue:this.state.data.id})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u7528\u6237\u540d\uff1a"},t.getFieldDecorator("username",{rules:[{required:!0}],initialValue:this.state.data.username})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u5bc6\u7801\uff1a"},t.getFieldDecorator("password",{rules:[{required:!0}],initialValue:this.state.data.password})(l.a.createElement(g.a,null))),l.a.createElement(E.a.Item,{label:"\u89d2\u8272\uff1a"},t.getFieldDecorator("role",{rules:[{required:!0}],initialValue:this.state.data.rolename})(l.a.createElement(ct.a,null,this.state.options.map((function(e){return l.a.createElement(ct.a.Option,{key:e.key},e.value)}))))),l.a.createElement(E.a.Item,{label:"Tel\uff1a"},t.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:this.state.data.tel})(l.a.createElement(g.a,{addonBefore:"+86"}))),l.a.createElement(E.a.Item,{label:"\u90ae\u7bb1\uff1a"},t.getFieldDecorator("email",{rules:[{required:!0}],initialValue:this.state.data.email})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1"}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Bt=a(115),Kt=(a(556),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(K());case 2:e=t.sent,a.refreshTable(e,0);case 4:case"end":return t.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.refreshTable=function(e,t){var n,r,l,i,s;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v.a.awrap(ee());case 2:return n=c.sent,c.next=5,v.a.awrap(Z());case 5:r=c.sent,0===e.status&&0===n.status&&0===r.status&&(l=e.data.map((function(e){e.state=e.amount>e.excess?2:e.amount<e.warning?0:1,e.log=[],n.data.forEach((function(t){t.stockid===e.id&&e.log.push(t)})),e.manager=e.log[e.log.length-1].manager;var t=e.log[e.log.length-1].time;return e.latestTime=new Date(t),e.pictures=e.pictures.split(","),e})),i=[],s=[],r.data.forEach((function(e){i.push({text:e.category,value:e.category}),s.push({label:e.category,value:e.category})})),0===t?(a.setState({category:i,options:s,isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:l})}),300)):a.setState({category:i,options:s,data:l}));case 7:case"end":return c.stop()}}))},a.handleDelete=function(e){Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5e93\u5b58\u8bb0\u5f55"'+e.name+'"\u5417',okText:"\u786e\u8ba4",onOk:function(){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(J(e.id));case 2:if(0!==r.sent.status){r.next=24;break}return(t=Object(Bt.a)({},e)).stockid=t.id,t.stockname=t.name,t.manager=je.user.username,t.time=(new Date).getTime(),t.operation="\u5220\u9664",t.pictures=t.pictures.join(","),delete t.state,delete t.log,delete t.name,delete t.id,delete t.latestTime,r.next=18,v.a.awrap(te(t));case 18:if(0!==r.sent.status){r.next=24;break}return r.next=22,v.a.awrap(K());case 22:n=r.sent,a.refreshTable(n,1);case 24:case"end":return r.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleEdit=function(e){a.props.history.push({pathname:"/stock/edit",state:{data:e}})},a.handleSearch=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=6;break}return n.next=3,v.a.awrap(K());case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,v.a.awrap($(e));case 8:n.t0=n.sent;case 9:t=n.t0,a.refreshTable(t,0);case 11:case"end":return n.stop()}}))},a.handleView=function(e){a.props.history.push({pathname:"/stock/view",state:{data:e}})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={isLoading:!0,data:[],category:[],options:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t,a){return l.a.createElement("span",null,a+1)}},{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement("span",null,l.a.createElement(f.a,{type:"link",onClick:function(){return e.handleView(a)}},t,a.amount<a.warning?l.a.createElement(ft.a,{size:"small",color:"red"},"\u544a\u7f44"):null,a.amount>a.excess?l.a.createElement(ft.a,{size:"small",color:"green"},"\u8fc7\u5269"):null))}},{title:"\u7c7b\u578b",dataIndex:"category",key:"category",filters:this.state.category,onFilter:function(e,t){return e===t.category}},{title:"\u5355\u4ef7",dataIndex:"price",key:"price",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.price-t.price}},{title:"\u5e93\u5b58\u91cf",dataIndex:"amount",key:"amount",sorter:function(e,t){return e.amount-t.amount},filters:[{text:"\u6b63\u5e38",value:0},{text:"\u544a\u7f44",value:1},{text:"\u8fc7\u5269",value:2}],onFilter:function(e,t){return e===t.state}},{title:"\u5355\u4f4d",dataIndex:"unit",key:"unit"},{title:"\u6700\u8fd1\u66f4\u65b0",dataIndex:"latestTime",key:"latestTime",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"})," ",e.getTimeForm(t))},sorter:function(e,t){return e.latestTime-t.latestTime}},{title:"\u64cd\u4f5c\u4eba",dataIndex:"manager",key:"manager"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return l.a.createElement("div",null,l.a.createElement(f.a,{size:"small",type:"primary",onClick:function(){e.handleEdit(a)}},"\u7f16\u8f91"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){e.handleDelete(a)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"stock-container"},l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f"]}),l.a.createElement("div",{className:"stock-header"},l.a.createElement(f.a,{type:"primary",style:{marginRight:"40px"},onClick:function(){e.props.history.push("/stock/add")}},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u589e\u5e93\u5b58"),l.a.createElement(f.a,{type:"primary",onClick:function(){return e.props.history.push("/stock/log")}},"\u4ed3\u5e93\u65e5\u5fd7"),l.a.createElement(g.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u5e93\u5b58\u540d\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component)),Zt=E.a.create({name:"add-stock-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Z());case 2:0===(e=n.sent).status&&(t=[],e.data.forEach((function(e){t.push(e.category)})),a.setState({category:t}));case 4:case"end":return n.stop()}}))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r,l;return v.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=17;break}return n=t,i.next=4,v.a.awrap(X(n));case 4:if(0!==(r=i.sent).status){i.next=17;break}return(l=Object(Bt.a)({},n)).stockname=l.name,l.manager=je.user.username,l.operation="\u65b0\u589e",l.time=(new Date).getTime(),l.stockid=r.data.insertId,delete l.name,i.next=15,v.a.awrap(te(l));case 15:0===i.sent.status&&(x.a.success("\u65b0\u589e\u5e93\u5b58\u4fe1\u606f\u6210\u529f\uff0c\u5373\u5c06\u8fd4\u56de\u5e93\u5b58\u5217\u8868\u9875\u9762",2),a.timerID=setTimeout((function(){a.props.history.push("/stock")}),2e3));case 17:case"end":return i.stop()}}))}))},a.handleAddClick=function(){a.setState({visible:!0})},a.handleNameChange=function(e){a.setState({categoryAdd:e.target.value})},a.onOk=function(){var e=a.state.category;e.push(a.state.categoryAdd),a.setState({category:e,visible:!1})},a.onCancel=function(){a.setState({visible:!1})},a.state={category:[],categoryAdd:"",visible:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u65b0\u589e\u5e93\u5b58"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5e93\u5b58\u8bb0\u5f55"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"}))),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},this.props.form.getFieldDecorator("category",{rules:[{required:!0}]})(l.a.createElement(ct.a,{style:{width:"75%"},placeholder:"\u8bf7\u9009\u62e9\u8d27\u7269\u54c1\u7c7b"},this.state.category.map((function(e){return l.a.createElement(ct.a.Option,{key:e},e)})))),l.a.createElement("div",{style:{display:"inline-block",float:"right"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAddClick},"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(Xe.a,{title:"\u65b0\u589e\u54c1\u7c7b",visible:this.state.visible,okText:"\u786e\u8ba4",onOk:this.onOk,cancelText:"\u53d6\u6d88",onCancel:this.onCancel},l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0",onChange:this.handleNameChange})))),l.a.createElement(E.a.Item,{label:"\u5355\u4ef7"},this.props.form.getFieldDecorator("price",{rules:[{required:!0}]})(l.a.createElement(Ze.a,null)),l.a.createElement("span",{style:{marginLeft:"10px"}},"\u5143")),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},this.props.form.getFieldDecorator("amount",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u6570\u91cf"}))),l.a.createElement(E.a.Item,{label:"\u5355\u4f4d"},this.props.form.getFieldDecorator("unit",{rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u5355\u4f4d"}))),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement(g.a.Group,{compact:!0},l.a.createElement(E.a.Item,null,this.props.form.getFieldDecorator("warning",{rules:[{required:!0}]})(l.a.createElement(Ze.a,{placeholder:"\u4e0b\u9650"}))),l.a.createElement("span",{style:{margin:"8px 20px 0 20px"}},"~"),l.a.createElement(E.a.Item,null,this.props.form.getFieldDecorator("excess",{rules:[{required:!0}]})(l.a.createElement(Ze.a,{placeholder:"\u4e0a\u9650"}))))),l.a.createElement(E.a.Item,{label:"\u56fe\u7247"},this.props.form.getFieldDecorator("pictures",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5546\u54c1\u56fe\u7247"}]})(l.a.createElement(yt,null))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),Jt=(a(253),a(117)),$t=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onTabChange=function(e){a.setState({key:e})},a.content=function(e){return e?l.a.createElement("div",null,l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:7,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u540d\u79f0\uff1a")),l.a.createElement(ht.a,{span:5},l.a.createElement(E.a.Item,null,e.stockname)),l.a.createElement(ht.a,{span:4,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u79cd\u7c7b\uff1a")),l.a.createElement(ht.a,{span:8},l.a.createElement(E.a.Item,null,e.category))),l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:7,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u6570\u91cf\uff1a")),l.a.createElement(ht.a,{span:5},l.a.createElement(E.a.Item,null,e.amount)),l.a.createElement(ht.a,{span:4,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u5355\u4f4d\uff1a")),l.a.createElement(ht.a,{span:8},l.a.createElement(E.a.Item,null,e.unit))),l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:7,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u72b6\u6001\uff1a")),l.a.createElement(ht.a,{span:5},l.a.createElement(E.a.Item,null,e.amout>e.excess?l.a.createElement(ft.a,{size:"small",color:"blue"},"\u8fc7\u5269"):e.state<e.warning?l.a.createElement(ft.a,{size:"small",color:"red"},"\u544a\u7f44"):l.a.createElement(ft.a,{size:"small",color:"green"},"\u6b63\u5e38"))),l.a.createElement(ht.a,{span:4,style:{textAlign:"right"}},l.a.createElement(E.a.Item,null,"\u76d1\u63a7\uff1a")),l.a.createElement(ht.a,{span:8},l.a.createElement(E.a.Item,null,"\u4e0b\u9650:",e.warning,"\xa0\xa0 \u4e0a\u9650:",e.excess))),l.a.createElement(dt.a,null,l.a.createElement(ht.a,{span:7},l.a.createElement(E.a.Item,{style:{textAlign:"right"}},"\u56fe\u7247\uff1a")),l.a.createElement(ht.a,{span:17},String(e.pictures).split(",").map((function(e,t){return""===e?null:l.a.createElement("img",{key:t,src:"http://localhost:3001/upload/"+e,alt:"\u8d27\u7269\u56fe\u7247",style:{width:"80px",height:"80px",padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}})})))),l.a.createElement(dt.a,{style:{marginTop:"10px"}},l.a.createElement(ht.a,{span:7},l.a.createElement(E.a.Item,{style:{textAlign:"right"}},"\u5907\u6ce8\uff1a")),l.a.createElement(ht.a,{span:17},l.a.createElement(E.a.Item,null,e.note?e.note:"\u65e0")))):null},a.state={key:"tab1"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={tab1:this.content(this.props.info.before),tab2:this.content(this.props.info)};return l.a.createElement(Xe.a,{visible:this.props.visible,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:this.props.onOk,onCancel:this.props.onCancel,footer:null},0===Object.getOwnPropertyNames(this.props.info).length?null:this.props.info.hasOwnProperty("before")?l.a.createElement(He.a,{style:{width:"100%",border:"none"},tabList:[{key:"tab1",tab:"\u4fee\u6539\u524d"},{key:"tab2",tab:"\u4fee\u6539\u540e"}],activeTabKey:this.state.key,onTabChange:function(t){return e.onTabChange(t)}},t[this.state.key]):l.a.createElement(He.a,{style:{width:"100%",border:"none"},title:l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"10px"}},this.props.info.operation,"\u8bb0\u5f55")},this.content(this.props.info)))}}]),t}(l.a.Component),Xt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(ee());case 2:0===(e=n.sent).status&&(t=(t=e.data.reverse()).map((function(e){if("\u4fee\u6539"===e.operation){var a=t.filter((function(t){return e.time>t.time&&e.stockid===t.stockid&&"\u4fee\u6539"===e.operation}));0===a.length?e.before=t.find((function(t){return t.stockid===e.stockid&&"\u65b0\u589e"===t.operation})):(a=a.sort((function(e,t){return e.time-t.time})),e.before=a.pop())}return e})),a.setState({data:t,log:t}));case 4:case"end":return n.stop()}}))},a.handleSelectChange=function(e){0===e&&a.setState({log:a.state.data}),a.setState({option:e})},a.getTimePicker=function(){return 1===a.state.option?l.a.createElement(Dt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:a.handleDatePickerChange}):2===a.state.option?l.a.createElement(Dt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:a.handleWeekPickerChange,format:"YYYY-WW"}):3===a.state.option?l.a.createElement(Dt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:a.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(Dt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:a.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},a.handleDatePickerChange=function(e,t){var n=new Date(t+" 00:00:00").getTime(),r=new Date(t+" 23:59:59").getTime(),l=a.state.data.filter((function(e){return e.time>=n&&e.time<=r}));a.setState({log:l})},a.handleWeekPickerChange=function(e){var t=$e()(e).day(0).format("YYYY/MM/DD")+" 00:00:00",n=$e()(e).day(6).format("YYYY/MM/DD")+" 23:59:59";t=new Date(t).getTime(),n=new Date(n).getTime();var r=a.state.data.filter((function(e){return e.time>t&&e.time<=n}));a.setState({log:r})},a.handleMonthPickerChange=function(e){var t=$e()(e).startOf("month").format("YYYY-MM-DD")+" 23:59:59",n=$e()(e).endOf("month").format("YYYY-MM-DD")+" 23:59:59";t=new Date(t).getTime(),n=new Date(n).getTime();var r=a.state.data.filter((function(e){return e.time>=t&&e.time<=n}));a.setState({log:r})},a.handleRangePickerChange=function(e,t){var n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=a.state.data.filter((function(e){return e.time>=n&&e.time<=r}));a.setState({log:l})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.handleDetail=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),a.setState({visible:!0,logInfo:e});case 2:case"end":return t.stop()}}))},a.onOk=function(){a.setState({visible:!1,logInfo:{}})},a.state={data:[],log:[],option:0,visible:!1,logInfo:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{style:{textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(ct.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",margin:"0 20px 0 10px"}},l.a.createElement(ct.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4")));return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u5e93\u5b58\u65e5\u5fd7"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5e93\u5b58\u65e5\u5fd7"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){return e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(Jt.a,{style:{margin:"20px 170px"},size:"small",header:t,dataSource:this.state.log,pagination:{pageSize:10},renderItem:function(t){return l.a.createElement(Jt.a.Item,null,l.a.createElement("span",{style:{fontWeight:"bolder",marginLeft:"10px"}},e.getTimeForm(t.time)),l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"20px",width:"60px"}},t.manager),l.a.createElement("span",null,"\u5bf9"),l.a.createElement("span",{style:{margin:"0 20px",width:"80px"}},"\u201c",l.a.createElement("span",{style:{color:"#1DA57A"}},t.before?t.before.stockname:t.stockname),"\u201d"),l.a.createElement("span",null,"\u7684\u5e93\u5b58\u4fe1\u606f\u8fdb\u884c\u4e86"),l.a.createElement("span",{style:"\u5220\u9664"===t.operation?{color:"red"}:{color:"#1DA57A"}},t.operation),l.a.createElement(f.a,{type:"primary",size:"small",style:{marginLeft:"30px"},onClick:function(){return e.handleDetail(t)}},"\u8be6\u60c5"))},bordered:!0}),l.a.createElement($t,{visible:this.state.visible,info:this.state.logInfo,onCancel:this.onOk,onOk:this.onOk})))}}]),t}(l.a.Component),Qt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e=a.props.location.state.data,t=e.log.reverse();t=t.map((function(e){if("\u4fee\u6539"===e.operation){var a=t.filter((function(t){return e.time>t.time&&e.stockid===t.stockid&&"\u4fee\u6539"===e.operation}));0===a.length?e.before=t.find((function(t){return t.stockid===e.stockid&&"\u65b0\u589e"===t.operation})):(a=a.sort((function(e,t){return e.time-t.time})),e.before=a.pop())}return e})),a.setState({data:e,log:t})},a.handleSelectChange=function(e){0===e&&a.setState({log:a.state.data.log}),a.setState({option:e})},a.getTimePicker=function(){return 1===a.state.option?l.a.createElement(Dt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:a.handleDatePickerChange}):2===a.state.option?l.a.createElement(Dt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:a.handleWeekPickerChange,format:"YYYY-WW"}):3===a.state.option?l.a.createElement(Dt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:a.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(Dt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:a.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},a.handleDatePickerChange=function(e,t){var n=new Date(t+" 00:00:00").getTime(),r=new Date(t+" 23:59:59").getTime(),l=a.state.data.log.filter((function(e){return e.time>=n&&e.time<=r}));a.setState({log:l})},a.handleWeekPickerChange=function(e){var t=$e()(e).day(0).format("YYYY/MM/DD")+" 00:00:00",n=$e()(e).day(6).format("YYYY/MM/DD")+" 23:59:59";t=new Date(t).getTime(),n=new Date(n).getTime();var r=a.state.data.log.filter((function(e){return e.time>t&&e.time<=n}));a.setState({log:r})},a.handleMonthPickerChange=function(e){var t=$e()(e).startOf("month").format("YYYY-MM-DD")+" 23:59:59",n=$e()(e).endOf("month").format("YYYY-MM-DD")+" 23:59:59";t=new Date(t).getTime(),n=new Date(n).getTime();var r=a.state.data.log.filter((function(e){return e.time>=t&&e.time<=n}));a.setState({log:r})},a.handleRangePickerChange=function(e,t){var n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=a.state.data.log.filter((function(e){return e.time>=n&&e.time<=r}));a.setState({log:l})},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.handleDetail=function(e){a.setState({visible:!0,logInfo:e})},a.onOk=function(){a.setState({visible:!1})},a.state={data:[],log:[],option:0,visible:!1,logInfo:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{style:{textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(ct.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",margin:"0 20px 0 10px"}},l.a.createElement(ct.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(ct.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4")));return l.a.createElement("div",{className:"stock-view-container"},l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u8d27\u7269\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u8d27\u7269\u8be6\u60c5"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.category)),l.a.createElement(E.a.Item,{label:"\u5355\u4ef7"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.price.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.amount)),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u5355\u4f4d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.unit)),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u72b6\u6001"},l.a.createElement("span",{style:{marginLeft:"20px"}},0===this.state.data.state?l.a.createElement(ft.a,{size:"small",color:"blue"},"\u6b63\u5e38"):1===this.state.data.state?l.a.createElement(ft.a,{size:"small",color:"red"},"\u544a\u7f44"):l.a.createElement(ft.a,{size:"small",color:"green"},"\u8fc7\u5269"))),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement("span",{className:"ant-form-text"},"\u4e0a\u9650\uff1a",this.state.data.excess,"\xa0\xa0\xa0\xa0\xa0\xa0 \u4e0b\u9650\uff1a",this.state.data.warning)),l.a.createElement(E.a.Item,{label:"\u56fe\u7247"},l.a.createElement("span",{className:"ant-form-pictures"},this.state.data.pictures.map((function(e,t){return""===e?null:l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u8d27\u7269\u56fe\u7247"})})))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0"))),l.a.createElement(Jt.a,{style:{margin:"50px 170px"},size:"small",header:t,dataSource:this.state.log,pagination:{pageSize:10},renderItem:function(t){return l.a.createElement(Jt.a.Item,null,l.a.createElement("span",{style:{fontWeight:"bolder",marginLeft:"10px"}},e.getTimeForm(t.time)),l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"20px",width:"60px"}},t.manager),l.a.createElement("span",null,"\u5bf9"),l.a.createElement("span",{style:{margin:"0 20px",width:"80px"}},"\u201c",l.a.createElement("span",{style:{color:"#1DA57A"}},t.stockname),"\u201d"),l.a.createElement("span",null,"\u7684\u5e93\u5b58\u4fe1\u606f\u8fdb\u884c\u4e86"),l.a.createElement("span",{style:{color:"#1DA57A"}},t.operation),l.a.createElement(f.a,{type:"primary",size:"small",style:{marginLeft:"30px"},onClick:function(){return e.handleDetail(t)}},"\u8be6\u60c5"))},bordered:!0}),l.a.createElement($t,{visible:this.state.visible,info:this.state.logInfo,onCancel:this.onOk,onOk:this.onOk})))}}]),t}(l.a.Component),ea=E.a.create({name:"edit-stock-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Z());case 2:0===(e=n.sent).status&&(t=[],e.data.forEach((function(e){t.push(e.category)})),a.setState({category:t}));case 4:case"end":return n.stop()}}))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r,l,i,s;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=19;break}for(r in(n={}).id=a.props.location.state.data.id,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return(l=Object(Bt.a)({},n)).stockid=l.id,l.stockname=l.name,l.time=(new Date).getTime(),l.operation="\u4fee\u6539",l.manager=je.user.username,delete l.id,delete l.name,c.next=14,v.a.awrap(Q(n));case 14:return i=c.sent,c.next=17,v.a.awrap(te(l));case 17:s=c.sent,0===i.status&&0===s.status&&(x.a.success("\u66f4\u65b0\u5e93\u5b58\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u5e93\u5b58\u5217\u8868\u9875\u9762",2),a.timerID=setTimeout((function(){a.props.history.push("/stock")}),2e3));case 19:case"end":return c.stop()}}))}))},a.handleAddClick=function(){a.setState({visible:!0})},a.handleNameChange=function(e){a.setState({categoryAdd:e.target.value})},a.onOk=function(){var e=a.state.category;e.push(a.state.categoryAdd),a.setState({category:e,visible:!1})},a.onCancel=function(){a.setState({visible:!1})},a.state={category:[],categoryAdd:"",visible:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u7f16\u8f91\u5e93\u5b58"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5e93\u5b58\u8bb0\u5f55"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},this.props.form.getFieldDecorator("name",{initialValue:t.name,rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"}))),l.a.createElement(E.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},this.props.form.getFieldDecorator("category",{initialValue:t.category,rules:[{required:!0}]})(l.a.createElement(ct.a,{style:{width:"75%"},placeholder:"\u8bf7\u9009\u62e9\u8d27\u7269\u54c1\u7c7b"},this.state.category.map((function(e){return l.a.createElement(ct.a.Option,{key:e},e)})))),l.a.createElement("div",{style:{display:"inline-block",float:"right"}},l.a.createElement(f.a,{type:"primary",onClick:this.handleAddClick},"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(Xe.a,{title:"\u65b0\u589e\u54c1\u7c7b",visible:this.state.visible,okText:"\u786e\u8ba4",onOk:this.onOk,cancelText:"\u53d6\u6d88",onCancel:this.onCancel},l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0",onChange:this.handleNameChange})))),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u5355\u4ef7"},this.props.form.getFieldDecorator("price",{initialValue:t.price,rules:[{required:!0}]})(l.a.createElement(Ze.a,null)),l.a.createElement("span",{style:{marginLeft:"10px"}},"\u5143")),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},this.props.form.getFieldDecorator("amount",{initialValue:t.amount,rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u6570\u91cf"}))),l.a.createElement(E.a.Item,{label:"\u5355\u4f4d"},this.props.form.getFieldDecorator("unit",{initialValue:t.unit,rules:[{required:!0}]})(l.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u5355\u4f4d"}))),l.a.createElement(E.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement(g.a.Group,{compact:!0},l.a.createElement(E.a.Item,null,this.props.form.getFieldDecorator("warning",{initialValue:t.warning,rules:[{required:!0}]})(l.a.createElement(Ze.a,{placeholder:"\u4e0b\u9650"}))),l.a.createElement("span",{style:{margin:"8px 20px 0 20px"}},"~"),l.a.createElement(E.a.Item,null,this.props.form.getFieldDecorator("excess",{initialValue:t.excess,rules:[{required:!0}]})(l.a.createElement(Ze.a,{placeholder:"\u4e0a\u9650"}))))),l.a.createElement(E.a.Item,{label:"\u56fe\u7247"},this.props.form.getFieldDecorator("pictures",{initialValue:t.pictures.join(",")})(l.a.createElement(yt,{imgs:t.pictures.join(",")}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:t.note})(l.a.createElement(g.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u5907\u6ce8"}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),ta=E.a.create({name:"search-inventory-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(pe());case 2:e=t.sent,a.refreshTable(e);case 4:case"end":return t.stop()}}))},a.componentWillUnmount=function(){clearTimeout(a.timerID)},a.refreshTable=function(e){var t,n,r,l,i;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,v.a.awrap(ge());case 2:return t=s.sent,s.next=5,v.a.awrap(K());case 5:n=s.sent,0===e.status&&0===t.status&&0===n.status&&(r=[],l=e.data.map((function(e){return t.data.forEach((function(t){e.creater===t.id&&(e.creater=t.username,r.push(e.creater))})),e})),r=new Set(r),i=[],r.forEach((function(e){i.push({text:e,value:e})})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,data:l.reverse(),tableData:l,createrFilters:i,dateRange:[NaN,NaN]})}),300));case 7:case"end":return s.stop()}}))},a.handleDeal=function(e){var t={id:e.id,state:1-e.state};Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5c06\u5355\u53f7"PD'+e.id+'"\u8bbe\u7f6e\u4e3a\u5df2\u5904\u7406\u5417',okText:"\u786e\u8ba4",onOk:function(){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(fe(t));case 2:0===r.sent.status&&(n=a.state.data.map((function(t){return t.state=t.id===e.id?1-t.state:t.state,t})),a.setState({data:n}));case 4:case"end":return r.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}})},a.handleDelete=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u8be5\u5e93\u5b58\u8bb0\u5f55"'+e.id+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Ee(e.id));case 2:0===n.sent.status&&(t=[],a.state.data.forEach((function(a){a.id!==e.id&&t.push(a)})),a.setState({tableData:t}));case 4:case"end":return n.stop()}}))},cancelText:"\u53d6\u6d88",onCancel:function(){}});case 1:case"end":return t.stop()}}))},a.handleView=function(e){a.props.history.push({pathname:"/stock/inventory/view",state:{data:e}})},a.handleRangePickerChange=function(e,t){var n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=[];l.push(n),l.push(r);var i=isNaN(n)||isNaN(r)?a.state.data:a.state.data.filter((function(e){return e.createtime>=n&&e.createtime<=r}));a.state.searchValue&&(i=i.filter((function(e){return String(e.id)===a.state.searchValue}))),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,tableData:i,dateRange:l})}),300)},a.handleSearch=function(e){var t,n,r;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(console.log(a.state.dateRange),console.log(isNaN(a.state.dateRange[0])),console.log(isNaN(a.state.dateRange[1])),!isNaN(a.state.dateRange[0]&&isNaN(a.state.dateRange[1]))){l.next=16;break}if(e){l.next=11;break}return l.next=7,v.a.awrap(pe());case 7:t=l.sent,a.refreshTable(t),l.next=14;break;case 11:n=a.state.data.filter((function(t){return String(t.id)===e})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,tableData:n,searchValue:e})}),300);case 14:l.next=19;break;case 16:r=a.state.data.filter((function(t){return e?e===String(t.id)&&t.createtime>=a.state.dateRange[0]&&t.createtime<=a.state.dateRange[1]:t.createtime>=a.state.dateRange[0]&&t.createtime<=a.state.dateRange[1]})),a.setState({isLoading:!0}),a.timerID=setTimeout((function(){a.setState({isLoading:!1,tableData:r,searchValue:e})}),300);case 19:case"end":return l.stop()}}))},a.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.getVariance=function(e,t){var a=(e-t).toFixed(2);return a>0?l.a.createElement("span",null,"+",a):l.a.createElement("span",null,a)},a.state={isLoading:!0,data:[],tableData:[],createrFilters:[],dateRange:[],searchValue:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"\u76d8\u70b9\u5355\u53f7",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(f.a,{type:"link",onClick:function(){e.handleView(a)}},t)}},{title:"\u76d8\u70b9\u65f6\u95f4",dataIndex:"createtime",key:"time",render:function(t){return l.a.createElement("span",null,l.a.createElement(y.a,{type:"clock-circle"}),"  ",e.getTimeForm(t))},sorter:function(e,t){return e.time-t.time}},{title:"\u76d8\u70b9\u4eba",dataIndex:"creater",key:"creater",filters:this.state.createrFilters,onFilter:function(e,t){return e===t.creatername}},{title:"\u9884\u671f\u91d1\u989d",key:"expect",dataIndex:"expect",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.expect-t.expect}},{title:"\u76d8\u70b9\u91d1\u989d",key:"amount",dataIndex:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.amount-t.amount}},{title:"\u5dee\u5f02\u91d1\u989d",key:"variance",render:function(t,a){return e.getVariance(a.amount,a.expect)},sorter:function(e,t){return e.amount-t.amount}},{title:"\u72b6\u6001",key:"state",dataIndex:"state",render:function(e){return 1===e?l.a.createElement(ft.a,{color:"green"},"\u5df2\u5904\u7406"):l.a.createElement(ft.a,{color:"red"},"\u672a\u5904\u7406")},filters:[{text:"\u5df2\u5904\u7406",value:0},{text:"\u672a\u5904\u7406",value:1}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operate",render:function(t,a){return 1===a.state?l.a.createElement("div",null,l.a.createElement(f.a,{size:"small",disabled:!0},"\u5904\u7406"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",disabled:!0},"\u5220\u9664")):l.a.createElement("div",null,l.a.createElement(f.a,{size:"small",onClick:function(){return e.handleDeal(a)}},"\u5904\u7406"),l.a.createElement(nt.a,{type:"vertical"}),l.a.createElement(f.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(a)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9"]}),l.a.createElement("div",{className:"stock-header",style:{margin:"20px"}},l.a.createElement(f.a,{type:"primary",style:{marginRight:"40px"},onClick:function(){e.props.history.push("/stock/inventory/add")}},l.a.createElement(y.a,{type:"plus",style:{fontWeight:"bold"}}),"\u65b0\u5efa\u76d8\u70b9\u5355"),l.a.createElement(g.a.Search,{placeholder:"\u641c\u7d22\u76d8\u70b9\u5355\u53f7",style:{width:"160px",float:"right",marginLeft:"15px"},onSearch:function(t){return e.handleSearch(t)},enterButton:!0}),l.a.createElement(Dt.a.RangePicker,{style:{width:"250px",float:"right"},onChange:this.handleRangePickerChange})),this.state.isLoading?l.a.createElement(it,null):l.a.createElement(at.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.tableData,rowKey:function(e){return e.id},bordered:!0}))}}]),t}(l.a.Component)),aa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getTime=function(e){var t=(e=new Date).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.getVariance=function(e,t){var a=(e-t).toFixed(2);return a>0?l.a.createElement("span",null,"+",a):l.a.createElement("span",null,a)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9","\u76d8\u70b9\u8be6\u60c5"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u76d8\u70b9\u8be6\u60c5"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/stock/inventory")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px",textIndent:"20px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u5355\u53f7"},l.a.createElement("span",{className:"ant-form-text"},t.id)),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(t.createtime))),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u4eba"},l.a.createElement("span",{className:"ant-form-text"},t.creater)),l.a.createElement(E.a.Item,{label:"\u9884\u671f\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",t.expect.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",t.amount.toFixed(2))),l.a.createElement(E.a.Item,{label:"\u5dee\u5f02\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},this.getVariance(t.amount,t.expect))),l.a.createElement(E.a.Item,{label:"\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{marginLeft:"20px",textIndent:0}},0===t.state?l.a.createElement(ft.a,{color:"green"},"\u672a\u5904\u7406"):l.a.createElement(ft.a,{color:"red"},"\u5df2\u5904\u7406"))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},t.note?t.note:"\u65e0")),l.a.createElement(E.a.Item,{label:"\u8be6\u60c5"},l.a.createElement("span",{className:"ant-form-text"},t.detail)))))}}]),t}(l.a.Component),na=E.a.create({name:"inventory-add-form"})(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).UNSAFE_componentWillMount=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(K());case 2:0===(e=n.sent).status&&(t=0,e.data.forEach((function(e){t+=e.amount*e.price})),a.setState({expect:t.toFixed(2)}));case 4:case"end":return n.stop()}}))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=10;break}return(n=t).createtime=new Date(n.createtime).getTime(),n.state=0,n.creater=je.user.id,n.amount=n.amount.toFixed(2),r.next=8,v.a.awrap(he(n));case 8:0===r.sent.status&&(x.a.success("\u65b0\u589e\u76d8\u70b9\u8bb0\u5f55\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u76d8\u70b9\u5217\u8868\u9875\u9762"),a.timerID=setTimeout((function(){a.props.history.push("/stock/inventory")}),1500));case 10:case"end":return r.stop()}}))}))},a.getTime=function(){var e=new Date,t=e.getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},a.state={expect:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Ge,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9","\u65b0\u5efa\u76d8\u70b9\u5355"]}),l.a.createElement(He.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u5efa\u76d8\u70b9\u5355"),extra:l.a.createElement(f.a,{type:"primary",onClick:function(){e.props.history.push("/stock/inventory")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(E.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u65e5\u671f"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTime()})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u4eba"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:je.user.username})(l.a.createElement(g.a,{disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u9884\u671f\u91d1\u989d"},t.getFieldDecorator("expect",{rules:[{required:!0}],initialValue:this.state.expect})(l.a.createElement(g.a,{addonBefore:"\uffe5",disabled:!0}))),l.a.createElement(E.a.Item,{label:"\u76d8\u70b9\u91d1\u989d"},t.getFieldDecorator("amount",{rules:[{required:!0}]})(l.a.createElement(Ze.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u76d8\u70b9\u91d1\u989d"}))),l.a.createElement(E.a.Item,{label:"\u8be6\u60c5"},t.getFieldDecorator("detail",{rules:[{required:!0}]})(l.a.createElement(g.a.TextArea,{rows:4}))),l.a.createElement(E.a.Item,{label:"\u5907\u6ce8"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(g.a.TextArea,{rows:2}))),l.a.createElement(E.a.Item,null,l.a.createElement(f.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),t}(l.a.Component)),ra=Ye.a.Sider,la=Ye.a.Content,ia=Ye.a.Footer,sa=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=je.user;return"{}"===JSON.stringify(e)?l.a.createElement(h.a,{to:"/login"}):l.a.createElement(Ye.a,null,l.a.createElement(ra,{style:{height:"100vh",position:"fixed"}},l.a.createElement(Re,null)),l.a.createElement(Ye.a,{id:"right",style:{marginLeft:"200px"}},l.a.createElement(Pe,null),l.a.createElement(la,{style:{margin:"0 20px",paddingBottom:"100px",backgroundColor:"white",minHeight:"500px"}},l.a.createElement(h.d,null,l.a.createElement(h.b,{exact:!0,path:"/home",component:Be}),l.a.createElement(h.b,{path:"/home/edit",component:tt}),l.a.createElement(h.b,{exact:!0,path:"/order",component:Ot}),l.a.createElement(h.b,{path:"/order/view",component:St}),l.a.createElement(h.b,{exact:!0,path:"/order/stage",component:Tt}),l.a.createElement(h.b,{path:"/order/stage/view",component:St}),l.a.createElement(h.b,{exact:!0,path:"/product",component:Et}),l.a.createElement(h.b,{path:"/product/add",component:vt}),l.a.createElement(h.b,{path:"/product/edit",component:kt}),l.a.createElement(h.b,{path:"/product/view",component:It}),l.a.createElement(h.b,{exact:!0,path:"/product/category",component:st}),l.a.createElement(h.b,{path:"/product/category/add",component:ot}),l.a.createElement(h.b,{path:"/product/category/edit",component:mt}),l.a.createElement(h.b,{path:"/product/category/view",component:ut}),l.a.createElement(h.b,{exact:!0,path:"/stock",component:Kt}),l.a.createElement(h.b,{path:"/stock/add",component:Zt}),l.a.createElement(h.b,{path:"/stock/view",component:Qt}),l.a.createElement(h.b,{path:"/stock/log",component:Xt}),l.a.createElement(h.b,{path:"/stock/edit",component:ea}),l.a.createElement(h.b,{exact:!0,path:"/stock/inventory",component:ta}),l.a.createElement(h.b,{path:"/stock/inventory/view",component:aa}),l.a.createElement(h.b,{path:"/stock/inventory/add",component:na}),l.a.createElement(h.b,{exact:!0,path:"/member",component:jt}),l.a.createElement(h.b,{path:"/member/add",component:At}),l.a.createElement(h.b,{path:"/member/edit",component:Mt}),l.a.createElement(h.b,{path:"/member/view",component:Vt}),l.a.createElement(h.b,{exact:!0,path:"/employee",component:Yt}),l.a.createElement(h.b,{path:"/employee/add",component:qt}),l.a.createElement(h.b,{path:"/employee/view",component:Pt}),l.a.createElement(h.b,{path:"/employee/edit",component:Wt}),l.a.createElement(h.b,{exact:!0,path:"/employee/user",component:Ht}),l.a.createElement(h.b,{path:"/employee/user/add",component:Ut}),l.a.createElement(h.b,{path:"/employee/user/edit",component:Gt}),l.a.createElement(h.b,{exact:!0,path:"/employee/role",component:zt}),l.a.createElement(h.b,{path:"/employee/role/add",component:_t}),l.a.createElement(h.b,{path:"/employee/role/edit",component:Rt}),l.a.createElement(h.a,{to:"/home"}))),l.a.createElement(ia,null,"\u63a8\u8350\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\uff0c\u53ef\u83b7\u5f97\u66f4\u4f73\u7684\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c\u3002")))}}]),t}(l.a.Component),ca=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(p.a,null,l.a.createElement(h.d,null,l.a.createElement(h.b,{path:"/login",component:Ve}),l.a.createElement(h.b,{path:"/",component:sa})))}}]),t}(l.a.Component),oa=a(273),ma=a.n(oa);a(558);$e.a.locale("zh-cn");var ua=Ae.getUser();je.user=ua,s.a.render(l.a.createElement(n.a,{locale:ma.a},l.a.createElement(ca,null)),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.1d743b95.chunk.js.map