(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1041:function(e,t,a){},1086:function(e,t,a){},1088:function(e,t,a){},1095:function(e,t,a){"use strict";a.r(t);a(493);var n=a(29),r=a(0),l=a.n(r),i=a(22),c=a.n(i),s=a(17),o=a(18),u=a(20),m=a(19),d=a(104),p=a(60),h=(a(34),a(7)),f=(a(45),a(2)),E=(a(47),a(9)),g=(a(68),a(6)),y=a(5),b=a.n(y),v=(a(61),a(36)),x=a(10),k=(a(506),a(242)),w=a.n(k),D=a(322),I=a.n(D);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n){("GET"===a?I.a.get(e,{params:t}):I.a.post(e,t)).then((function(e){n(e.data)})).catch((function(e){v.a.error("\u8bf7\u6c42\u5931\u8d25 "+e.message)}))}))}a(476);var C=function(e,t){return O("/login",{username:e,password:t},"POST")},S=function(){return O("/shop/info",null,"GET")},T=function(e){return O("/shop/update",e,"POST")},F=function(){return O("/category/list",null,"GET")},j=function(e){return O("/category/update",e,"POST")},N=function(e){return O("/category/add",e,"POST")},A=function(){return O("/product/list",null,"GET")},M=function(e){return O("/product/delete",e,"POST")},V=function(e){return O("/product/update",e,"POST")},Y=function(e){return O("/product/search",e,"POST")},L=function(e){return O("/file/delete",{name:e},"GET")},q=function(){return O("/stock/list",null,"GET")},P=function(){return O("/stock/category",null,"GET")},W=function(e){return O("/stock/search",{name:e},"GET")},z=function(e){return O("/stock/add",e,"POST")},R=function(e){return O("/stock/stocklog-list",e,"GET")},_=function(e){return O("/stock/stocklog-add",e,"POST")},H=function(){return O("/customer/list",null,"GET")},U=function(){return O("/customer/member-list",null,"GET")},G=function(e){return O("/customer/member-search",{value:e},"GET")},B=function(e){return O("/customer/add",e,"POST")},K=function(e){return O("/customer/update",e,"POST")},J=function(){return O("/employee/list",null,"GET")},Z=function(e){return O("/employee/search",{value:e},"GET")},$=function(e){return O("/employee/add",e,"POST")},Q=function(e){return O("/employee/update",e,"POST")},X=function(){return O("/inventory/list",null,"GET")},ee=function(e){return O("/inventory/add",e,"POST")},te=function(e){return O("/inventory/update",e,"POST")},ae=function(){return O("/user/list",null,"GET")},ne=function(e){return O("/user/add",e,"POST")},re=function(e){return O("/user/update",e,"POST")},le=function(){return O("/order/list",null,"GET")},ie=function(){return O("/order/frontdesk-list",null,"GET")},ce=function(e){return O("/order/search",{id:e},"GET")},se=function(e,t){return O("/order/range",{start:e,end:t},"GET")},oe=function(e){return O("/order/update",e,"POST")},ue=function(){return O("/role/list",null,"GET")},me=function(e){return O("/role/add",e,"POST")},de=function(e){return O("/role/update",e,"POST")},pe={user:{},others:{}},he=a(564),fe=function(e){he.set("user_key",e)},Ee=function(){return he.get("user_key")||{}},ge=function(){he.remove("user_key")},ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(x.a)(b.a.mark((function t(a,n){var r,l,i,c,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=11;break}return r=n.username,l=n.password,t.next=4,C(r,l);case 4:return i=t.sent,t.next=7,ue();case 7:c=t.sent,0===i.status&&0===c.status&&(v.a.success("\u767b\u5f55\u6210\u529f"),s=i.data,o=[],c.data.forEach((function(e){i.data.role===e.id&&(o=e.permission.split("-"))})),s.permission=o,pe.user=i.data,fe(i.data),e.props.history.replace("/")),t.next=12;break;case 11:console.log("\u6821\u9a8c\u5931\u8d25");case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.validatePwd=function(e,t,a){t?t.length<4?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?t.length>12?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):a():a("\u5bc6\u7801\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u7ec4\u6210"):a("\u8bf7\u8f93\u5165\u5bc6\u7801")},e.validateUser=function(e,t,a){t?t.length<4?a("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?t.length>12?a("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):a():a("\u7528\u6237\u540d\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u7ec4\u6210"):a("\u8bf7\u8f93\u5165\u7528\u6237\u540d")},e}return Object(o.a)(a,[{key:"render",value:function(){var e=pe.user;if("{}"!==JSON.stringify(e))return l.a.createElement(p.a,{to:"/"});var t=this.props.form;return l.a.createElement("div",{className:"login"},l.a.createElement("header",{className:"login-header"},l.a.createElement("img",{src:w.a,alt:"logo"}),l.a.createElement("h3",null,"\u9910\u996e\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),l.a.createElement("section",{className:"login-content"},l.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),l.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(f.a.Item,null,t.getFieldDecorator("username",{rules:[{validator:this.validateUser}]})(l.a.createElement(E.a,{prefix:l.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),l.a.createElement(f.a.Item,null,t.getFieldDecorator("password",{rules:[{validator:this.validatePwd}]})(l.a.createElement(E.a,{prefix:l.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55")))))}}]),a}(l.a.Component),be=f.a.create()(ye),ve=(a(655),a(175)),xe=(a(1096),a(482)),ke=(a(658),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.intervalId=setInterval((function(){var e=new Date,t=e.getMonth()+1;n.setState({username:pe.user.username,location:pe.others.location,weather_txt:pe.others.weather_txt,weather_code:pe.others.weather_code,date:e.getFullYear()+"-"+t+"-"+e.getDate()})}),1e3);case 1:case"end":return e.stop()}}),e)}))),n.logout=function(){return n.setState({loading:!0}),new Promise((function(e){setTimeout((function(){pe.user={},pe.others={},ge(),n.props.history.replace("/login"),e()}),1e3)})).catch((function(){return console.log("\u767b\u51fa\u5931\u8d25")}))},n.state={username:"-",location:"-",weather_txt:"-",weather_code:"100",date:"-",loading:!1},n}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return l.a.createElement("div",{className:"header"},l.a.createElement("span",null,this.state.date),l.a.createElement("span",null,this.state.location),l.a.createElement("span",{style:{marginRight:"20px"}},"\u6b22\u8fce! ",this.state.username),l.a.createElement(xe.a,{placement:"bottomRight",title:"\u786e\u5b9a\u8981\u9000\u51fa\u7cfb\u7edf\u5417\uff1f",okType:"danger",onConfirm:this.logout,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},l.a.createElement(h.a,{style:{marginRight:"50px"},type:"primary",loading:this.state.loading},"\u9000\u51fa")))}}]),a}(l.a.Component)),we=Object(p.g)(ke),De=(a(661),a(124)),Ie=(a(664),De.a.SubMenu),Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=function(){var e=[{key:"/home",title:"\u9996\u9875",icon:"home",display:1},{key:"/order",title:"\u8ba2\u5355\u7ba1\u7406",icon:"account-book",display:0,children:[{key:"/order",title:"\u5168\u90e8\u8ba2\u5355",display:0},{key:"/order/stage",title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{key:"/product",title:"\u5546\u54c1\u7ba1\u7406",icon:"shopping",display:0,children:[{key:"/product/category",title:"\u5546\u54c1\u5206\u7c7b",display:0},{key:"/product",title:"\u5546\u54c1\u5217\u8868",display:0},{key:"/product/add",title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{key:"/stock",title:"\u5e93\u5b58\u7ba1\u7406",icon:"appstore",display:0,children:[{key:"/stock",title:"\u5e93\u5b58\u4fe1\u606f",display:0},{key:"/stock/inventory",title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{key:"/member",title:"\u4f1a\u5458\u7ba1\u7406",icon:"crown",display:0,children:[{key:"/member",title:"\u4f1a\u5458\u5217\u8868",display:0},{key:"/member/add",title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{key:"/employee",title:"\u4eba\u4e8b\u7ba1\u7406",icon:"team",display:0,children:[{key:"/employee",title:"\u5458\u5de5\u5217\u8868",display:0},{key:"/employee/user",title:"\u7528\u6237\u5217\u8868",display:0},{key:"/employee/role",title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];pe.user.permission.forEach((function(t){switch(t){case"\u5168\u90e8\u8ba2\u5355":e[1].display=1,e[1].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":e[1].display=1,e[1].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":e[2].display=1,e[2].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":e[2].display=1,e[2].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":e[2].display=1,e[2].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":e[3].display=1,e[3].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":e[3].display=1,e[3].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":e[4].display=1,e[4].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":e[4].display=1,e[4].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":e[5].display=1,e[5].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":e[5].display=1,e[5].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":e[5].display=1,e[5].children[2].display=1}})),n.setState({menu:e,selectedKeys:n.getSelectedKeys(n.props.location.pathname),openKeys:n.getOpenKeys(n.props.location.pathname)})},n.rootSubmenuKeys=["/home","/order","/product","/category","/stock","/member","/employee"],n.onOpenChange=function(e){var t=e.find((function(e){return-1===n.state.openKeys.indexOf(e)}));-1===n.rootSubmenuKeys.indexOf(t)?n.setState({openKeys:e}):n.setState({openKeys:t?[t]:[]})},n.closeSubmenuAll=function(){n.setState({openKeys:[]})},n.getSelectedKeys=function(e){var t="";switch(e){case"/home":case"/home/view":case"/home/edit":t="/home";break;case"/order":case"/order/view":t="/order";break;case"/order/stage":case"/order/stage/view":t="/order/stage";break;case"/product":case"/product/view":case"/product/edit":t="/product";break;case"/product/add":t="/product/add";break;case"/product/category":case"/product/category/view":case"/product/category/add":case"/product/category/edit":t="/product/category";break;case"/stock":case"/stock/view":case"/stock/add":case"/stock/edit":case"/stock/log":t="/stock";break;case"/stock/inventory":case"/stock/inventory/view":case"/stock/inventory/add":t="/stock/inventory";break;case"/member":case"/member/view":case"/member/edit":t="/member";break;case"/member/add":t="/member/add";break;case"/employee":case"/employee/view":case"/employee/add":case"/employee/edit":t="/employee";break;case"/employee/user":case"/employee/user/add":case"/employee/user/edit":t="/employee/user";break;case"/employee/role":case"/employee/role/add":case"/employee/role/edit":t="/employee/role"}return[t]},n.getOpenKeys=function(e){var t="";switch(e){case"/product/category":t="/product";break;case"/stock/inventory":t="/stock";break;case"/employee/role":case"/employee/user":t="/employee";break;default:t="/"+e.split("/")[1]}return[t]},n.state={menu:[],selectedKeys:[],openKeys:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"left-nav"},l.a.createElement(d.b,{to:"/"},l.a.createElement("div",{className:"left-nav-header"},l.a.createElement("img",{src:w.a,alt:"logo"}),l.a.createElement("h1",null,"\u9910\u5385\u540e\u53f0"))),l.a.createElement(De.a,{selectedKeys:this.getSelectedKeys(this.props.location.pathname),mode:"inline",openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,theme:"dark"},this.state.menu.map((function(e){return e.children?l.a.createElement(Ie,{key:e.key,title:l.a.createElement("span",null,l.a.createElement(g.a,{type:e.icon}),e.title),style:{display:0===e.display?"none":"block"}},e.children.map((function(e){return l.a.createElement(De.a.Item,{key:e.key,style:{display:0===e.display?"none":"block"}},l.a.createElement(d.b,{to:e.key},e.title))}))):l.a.createElement(De.a.Item,{key:e.key,style:{display:0===e.display?"none":"block"}},l.a.createElement(d.b,{to:e.key},l.a.createElement(g.a,{type:e.icon}),e.title))}))))}}]),a}(l.a.Component),Ce=Object(p.g)(Oe),Se=(a(670),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"top-nav-container"},this.props.nav.map((function(t,a){return 0===a&&a===e.props.nav.length?l.a.createElement("span",{key:a},l.a.createElement("span",{style:{fontWeight:"bold",cursor:"default"}},t),l.a.createElement("span",{style:{margin:"0 10px",color:"#98a9c4"}},"/")):a+1===e.props.nav.length?l.a.createElement("span",{key:a,style:{color:"#98a9c4",cursor:"default"}},t):l.a.createElement("span",{key:a},l.a.createElement("span",{key:a,style:{fontWeight:"bold",cursor:"default"}},t),l.a.createElement("span",{style:{margin:"0 10px",color:"#98a9c4"}},"/"))})))}}]),a}(l.a.Component)),Te=Object(p.g)(Se),Fe=a(483),je=a.n(Fe),Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a,r,l,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return t=e.sent,e.next=5,O("/order/week-list",null,"GET");case 5:a=e.sent,0===t.status&&0===a.status&&(r=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],l=(new Date).getDay(),i=r.splice(l+1,7-l-1),r=(r=i.concat(r)).map((function(e){return r.indexOf(e)<r.indexOf("\u5468\u65e5")&&(e="\u4e0a"+e),r.indexOf(e)===r.length-1&&(e="\u4eca\u5929"),e})),(c=a.data).date=r,n.setState({weekData:c,data:t.data}),console.log(c));case 7:case"end":return e.stop()}}),e)}))),n.handleDetail=function(){n.props.history.push({pathname:"/home/view",state:{data:n.state.data}})},n.getOption=function(){return{title:{text:""},tooltip:{trigger:"axis"},legend:{data:["\u6570\u91cf","\u603b\u989d"],selectedMode:"single"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:n.state.weekData.date},yAxis:{type:"value"},series:[{name:"\u6570\u91cf",type:"line",stack:"\u603b\u91cf",data:n.state.weekData.quantity},{name:"\u603b\u989d",type:"line",stack:"\u603b\u91cf",data:n.state.weekData.amount}]}},n.getPercentForm=function(e){return(e=e>1?100*(e-1):100*(1-e)).toFixed(0)},n.state={data:{},weekData:{amount:[],quantity:[],date:[],quantityPercent:0,amountPercent:0}},n}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"home-container"},l.a.createElement(Te,{nav:["\u9996\u9875"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 40px",textAlign:"right"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleDetail},"\u95e8\u5e97\u8be6\u60c5")),l.a.createElement("div",{style:{margin:"20px"}},l.a.createElement("div",{style:{display:"inline-block",verticalAlign:"top",width:"19%",margin:"30px 2% 0 4%",border:"1px solid lightgray"}},l.a.createElement("div",{style:{borderBottom:"1px solid lightgray",padding:"20px",fontWeight:"bold"}},"\u4eca\u65e5\u8425\u6536\u60c5\u51b5"),l.a.createElement("div",{style:{padding:"20px 20px 5px"}},l.a.createElement("div",{style:{fontWeight:"bolder"}},"\u8ba2\u5355\u6570\u91cf\uff1a",this.state.weekData.quantityToday," \u5355"),l.a.createElement("div",{style:{fontSize:"12px",display:"Infinity"===this.state.weekData.quantityPercent||"NaN"===this.state.weekData.quantityPercent?"none":"block"}},l.a.createElement("span",null,"\u65e5\u540c\u6bd4 ",this.getPercentForm(this.state.weekData.quantityPercent),"%"),this.state.weekData.quantityPercent>1?l.a.createElement(g.a,{type:"arrow-up",style:{color:"green"}}):l.a.createElement(g.a,{type:"arrow-down",style:{color:"red"}}))),l.a.createElement("div",{style:{padding:"10px 20px 20px"}},l.a.createElement("div",{style:{fontWeight:"bolder"}},"\u8425\u6536\u603b\u989d\uff1a",this.state.weekData.amountToday," \u5143"),l.a.createElement("div",{style:{fontSize:"12px",display:"Infinity"===this.state.weekData.amountPercent||"NaN"===this.state.weekData.amountPercent?"none":"block"}},l.a.createElement("span",null,"\u65e5\u540c\u6bd4 ",this.getPercentForm(this.state.weekData.amountPercent),"%"),this.state.weekData.amountPercent>1?l.a.createElement(g.a,{type:"arrow-up",style:{color:"green"}}):l.a.createElement(g.a,{type:"arrow-down",style:{color:"red"}})))),l.a.createElement("div",{style:{display:"inline-block",width:"65%",margin:"0 5%",verticalAlign:"top"}},l.a.createElement(je.a,{option:this.getOption()}))))}}]),a}(l.a.Component),Ae=(a(49),a(28)),Me=(a(445),a(203)),Ve=(a(110),a(50)),Ye=(a(73),a(41)),Le=(a(474),a(250)),qe=a(25),Pe=a.n(qe),We=f.a.create({name:"category-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:0===(t=e.sent).status&&((a=t.data).opentime=a.businesshour.split(" ~ ")[0],a.closetime=a.businesshour.split(" ~ ")[1],r=[{uid:0,name:a.profile,status:"done",url:"/upload/"+a.profile}],n.setState({data:a,fileList:r}));case 4:case"end":return e.stop()}}),e)}))),n.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},n.handleBack=function(){n.props.history.push({pathname:"/home/view",state:{data:n.state.data}})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return(r=a).profile=n.state.fileList[0].url.split("/upload/")[1],r.businesshour=Pe()(r.opentime,"HH:mm")._i+" ~ "+Pe()(r.closetime,"HH:mm")._i,delete r.opentime,delete r.closetime,e.next=8,T(r);case 8:0===e.sent.status&&(v.a.success("\u8bbe\u7f6e\u6210\u529f\uff0c\u5373\u5c06\u8fd4\u56de\u95e8\u5e97\u4fe1\u606f\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push({pathname:"/home/view",state:{data:r}})}),2e3));case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.getBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,n.getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:n.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,"done"!==a.status){e.next=8;break}l=a.response,(a=r[r.length-1]).name=l.data.name,a.url=l.data.url,e.next=11;break;case 8:if("removed"!==a.status){e.next=11;break}return e.next=11,L(a.name);case 11:n.setState({fileList:r});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={data:[],fileList:[],previewVisible:!1,previewImage:""},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.form,t=l.a.createElement("div",null,l.a.createElement(g.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u9996\u9875","\u95e8\u5e97\u8be6\u60c5","\u7f16\u8f91"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u95e8\u5e97\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:this.handleBack},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"ID\uff1a",style:{display:"none"}},e.getFieldDecorator("id",{initialValue:this.state.data.id})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u54c1\u724c\u540d\u79f0\uff1a"},e.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:this.state.data.name})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u5934\u50cf\uff1a"},e.getFieldDecorator("profile",{rules:[{required:!0}],initialValue:this.state.data.profile})(l.a.createElement("div",{className:"clearfix"},l.a.createElement(Le.a,{action:"/file/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:this.state.fileList,onPreview:this.handlePreview,onChange:this.handleChange},this.state.fileList.length>=1?null:t),l.a.createElement(Ye.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage}))))),l.a.createElement(f.a.Item,{label:"\u5730\u5740\uff1a"},e.getFieldDecorator("address",{rules:[{required:!0}],initialValue:this.state.data.address})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u684c\u6570\uff1a"},e.getFieldDecorator("seats",{initialValue:this.state.data.seats})(l.a.createElement(Ve.a,null))),l.a.createElement(f.a.Item,{label:"\u7535\u8bdd\uff1a"},e.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:this.state.data.tel})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u516c\u544a\uff1a"},e.getFieldDecorator("notice",{rules:[{required:!0}],initialValue:this.state.data.notice})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4\uff1a"},e.getFieldDecorator("opentime",{rules:[{required:!0}],initialValue:Pe()(this.state.data.opentime,"HH:mm")})(l.a.createElement(Me.a,{format:"HH:mm"}))),l.a.createElement(f.a.Item,{label:"\u6253\u70ca\u65f6\u95f4\uff1a"},e.getFieldDecorator("closetime",{rules:[{required:!0}],initialValue:Pe()(this.state.data.closetime,"HH:mm")})(l.a.createElement(Me.a,{format:"HH:mm"}))),l.a.createElement(f.a.Item,{label:"\u54c1\u724c\u6545\u4e8b\uff1a"},e.getFieldDecorator("story",{initialValue:this.state.data.story})(l.a.createElement(E.a.TextArea,{rows:10}))),l.a.createElement(f.a.Item,{label:"\u4f1a\u5458\u6761\u6b3e\uff1a"},e.getFieldDecorator("treaty",{initialValue:this.state.data.treaty})(l.a.createElement(E.a.TextArea,{rows:5}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),ze=f.a.create({name:"category-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleEdit=function(){e.props.history.push("/home/edit")},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.state.data,a=l.a.createElement("div",null,l.a.createElement(h.a,{type:"primary",style:{marginRight:"20px"},onClick:this.handleEdit},"\u7f16\u8f91"),l.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/home")}},"\u8fd4\u56de"));return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u9996\u9875","\u95e8\u5e97\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u95e8\u5e97\u4fe1\u606f"),extra:a,style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"20px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u5e97\u540d"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.name)),l.a.createElement(f.a.Item,{label:"\u5934\u50cf"},l.a.createElement("span",{style:{paddingLeft:"20px"}},l.a.createElement("img",{src:"/upload/"+t.profile,style:{width:"80px",height:"80px",borderRadius:"5px",padding:"5px",border:"1px solid lightgray"},alt:"\u5934\u50cf"}))),l.a.createElement(f.a.Item,{label:"\u5730\u5740"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.address)),l.a.createElement(f.a.Item,{label:"\u684c\u6570"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.seats)),l.a.createElement(f.a.Item,{label:"\u7535\u8bdd"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.tel)),l.a.createElement(f.a.Item,{label:"\u516c\u544a"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.notice)),l.a.createElement(f.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4"},l.a.createElement("span",{style:{paddingLeft:"20px"}},t.businesshour)))))}}]),a}(l.a.Component)),Re=(a(103),a(63)),_e=(a(122),a(69)),He=(a(240),a(105)),Ue=(a(320),a(169)),Ge=(a(1041),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"loading-container"},l.a.createElement(Ue.a,{size:"large"}),l.a.createElement("span",null,"Loading. . ."))}}]),a}(l.a.Component)),Be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.refreshTable=function(e){n.setState({isLoading:!0}),n.timerID=setTimeout((function(){if(0===e.status){var t=e.data.map((function(e,t){switch(e.index=t,e.level){case 0:e.levelText="\u4e00\u7ea7";break;case 1:e.levelText="\u4e8c\u7ea7";break;case 2:e.levelText="\u4e09\u7ea7";break;case 3:e.levelText="\u56db\u7ea7";break;case 4:e.levelText="\u4e94\u7ea7";break;case 5:e.levelText="\u516d\u7ea7";break;case 6:e.levelText="\u4e03\u7ea7";break;case 7:e.levelText="\u516b\u7ea7";break;case 8:e.levelText="\u4e5d\u7ea7";break;case 9:e.levelText="\u5341\u7ea7"}return e}));n.setState({isLoading:!1,data:t})}else 1===e.status&&(v.a.error(e.msg),n.setState({isLoading:!1,data:null}))}),300)},n.handleIsnavChange=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({id:t.id,isnav:1-t.isnav});case 2:a=e.sent,r=n.state.data,0===a.status?(r.forEach((function(e){return e.isnav=e.id===t.id?1-e.isnav:e.isnav})),n.setState({data:r})):1===a.status&&(n.setState({data:r}),v.a.error(a.msg));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=6;break}return e.next=3,F();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,O("/category/search",{name:t},"GET");case 8:e.t0=e.sent;case 9:a=e.t0,n.refreshTable(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u54c1\u7c7b"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/category/delete",{id:e.id},"GET");case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.id===e.id?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleAdd=function(){n.props.history.push("/product/category/add")},n.handleEdit=function(e){n.props.history.push({pathname:"/product/category/edit",state:{data:e}})},n.handleView=function(e){n.props.history.push({pathname:"/product/category/view",state:{data:e}})},n.state={isLoading:!0,data:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u54c1\u7c7b\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u6392\u5e8f",dataIndex:"levelText",key:"levelText",sorter:function(e,t){return e.level-t.level}},{title:"\u5b50\u9879\u6570\u91cf",dataIndex:"son",key:"son",sorter:function(e,t){return e.son-t.son}},{title:"\u662f\u5426\u663e\u793a",dataIndex:"isnav",key:"isnav",render:function(t,a){return l.a.createElement(He.a,{size:"small",onClick:function(){return e.handleIsnavChange(a)},defaultChecked:1===t})},filters:[{text:"\u5df2\u663e\u793a",value:1},{text:"\u672a\u663e\u793a",value:0}],onFilter:function(e,t){return e===t.isnav}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u54c1\u7c7b\u540d\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component),Ke=(a(81),a(16)),Je=f.a.create({name:"category-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(x.a)(b.a.mark((function t(a,n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=9;break}return(r=n).level=Number(r.level),r.isnav=r.isnav?1:0,r.son=0,t.next=7,N(r);case 7:0===t.sent.status&&(v.a.success("\u65b0\u589e\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u54c1\u7c7b\u5217\u8868",2),e.timerID=setTimeout((function(){e.props.history.push("/product/category")}),2e3));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u65b0\u589e\u54c1\u7c7b"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5546\u54c1\u54c1\u7c7b"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u540d\u79f0\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}]})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u7ea7\u522b\uff1a"},t.getFieldDecorator("level",{rules:[{required:!0}]})(l.a.createElement(Ke.a,null,l.a.createElement(Ke.a.Option,{key:0},"\u7b2c\u4e00\u7ea7"),l.a.createElement(Ke.a.Option,{key:1},"\u7b2c\u4e8c\u7ea7"),l.a.createElement(Ke.a.Option,{key:2},"\u7b2c\u4e09\u7ea7"),l.a.createElement(Ke.a.Option,{key:3},"\u7b2c\u56db\u7ea7"),l.a.createElement(Ke.a.Option,{key:4},"\u7b2c\u4e94\u7ea7"),l.a.createElement(Ke.a.Option,{key:5},"\u7b2c\u516d\u7ea7"),l.a.createElement(Ke.a.Option,{key:6},"\u7b2c\u4e03\u7ea7"),l.a.createElement(Ke.a.Option,{key:7},"\u7b2c\u516b\u7ea7"),l.a.createElement(Ke.a.Option,{key:9},"\u7b2c\u4e5d\u7ea7"),l.a.createElement(Ke.a.Option,{key:10},"\u7b2c\u5341\u7ea7")))),l.a.createElement(f.a.Item,{label:"\u662f\u5426\u663e\u793a"},t.getFieldDecorator("isnav",{rules:[{required:!0}],valuePropName:"checked",initialValue:!1})(l.a.createElement(He.a,null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Ze=f.a.create({name:"category-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=function(){n.setState({data:n.props.location.state.data})},n.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=12;break}return(r=n.props.location.state.data).name=a.name,r.level=a.level,r.isnav=!0===a.isnav?1:0,r.note=a.note,delete r.index,delete r.levelText,e.next=10,j(r);case 10:0===e.sent.status&&(v.a.success("\u66f4\u65b0\u54c1\u7c7b\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u54c1\u7c7b\u5217\u8868\u9875\u9762",2),n.timerID=setTimeout((function(){n.props.history.push("/product/category")}),2e3));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.state={data:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u7f16\u8f91\u54c1\u7c7b"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5546\u54c1\u54c1\u7c7b"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u540d\u79f0\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:this.state.data.name})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u7ea7\u522b\uff1a"},t.getFieldDecorator("level",{rules:[{required:!0}],initialValue:this.state.data.level})(l.a.createElement(Ke.a,null,l.a.createElement(Ke.a.Option,{key:0,value:0},"\u4e00\u7ea7"),l.a.createElement(Ke.a.Option,{key:1,value:1},"\u4e8c\u7ea7"),l.a.createElement(Ke.a.Option,{key:2,value:2},"\u4e09\u7ea7"),l.a.createElement(Ke.a.Option,{key:3,value:3},"\u56db\u7ea7"),l.a.createElement(Ke.a.Option,{key:4,value:4},"\u4e94\u7ea7"),l.a.createElement(Ke.a.Option,{key:5,value:5},"\u516d\u7ea7"),l.a.createElement(Ke.a.Option,{key:6,value:6},"\u4e03\u7ea7"),l.a.createElement(Ke.a.Option,{key:7,value:7},"\u516b\u7ea7"),l.a.createElement(Ke.a.Option,{key:8,value:8},"\u4e5d\u7ea7"),l.a.createElement(Ke.a.Option,{key:9,value:9},"\u5341\u7ea7")))),l.a.createElement(f.a.Item,{label:"\u662f\u5426\u663e\u793a"},t.getFieldDecorator("isnav",{rules:[{required:!0}],valuePropName:"checked",initialValue:1===this.state.data.isnav})(l.a.createElement(He.a,null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),$e=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.location.state.data,console.log(t),n.setState({data:t});case 3:case"end":return e.stop()}}),e)}))),n.state={data:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5206\u7c7b","\u54c1\u7c7b\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u54c1\u7c7b\u8be6\u60c5"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/product/category")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px",textIndent:"20px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u540d\u79f0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(f.a.Item,{label:"\u7ea7\u522b"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.levelText)),l.a.createElement(f.a.Item,{label:"\u662f\u5426\u663e\u793a"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.isnav?"\u662f":"\u5426")),l.a.createElement(f.a.Item,{label:"\u5b50\u9879\u6570\u91cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.son)),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note)))))}}]),a}(l.a.Component),Qe=(a(195),a(67)),Xe=(a(1082),a(490)),et=(a(196),a(37)),tt=(a(77),a(27)),at=(a(469),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:0===(t=e.sent).status&&n.refreshTable(t.data);case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.formRef={},n.rowSelection={onChange:function(e){n.setState({selectedRowKeys:e})}},n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:0===(a=e.sent).status&&(r=[{value:"onsale-1",label:"\u5546\u54c1\u4e0a\u67b6"},{value:"onsale-0",label:"\u5546\u54c1\u4e0b\u67b6"},{value:"recommend-1",label:"\u8bbe\u4e3a\u63a8\u8350"},{value:"recommend-0",label:"\u53d6\u6d88\u63a8\u8350"},{value:"isnew-1",label:"\u8bbe\u4e3a\u65b0\u54c1"},{value:"isnew-0",label:"\u53d6\u6d88\u65b0\u54c1"},{value:"delete",label:"\u5220\u9664\u5546\u54c1"}],l=[],i=[],a.data.forEach((function(e){l.push({label:e.name,value:e.id}),t.map((function(t){return-1===i.indexOf(e.name)?i.push(e.name):i.push(),t.category===e.id&&(t.categoryName=e.name),999===t.category&&(t.categoryName="\u672a\u5206\u7c7b"),t}))})),(i=i.map((function(e){return{text:e,value:e}}))).push({text:"\u672a\u5206\u7c7b",value:"\u672a\u5206\u7c7b"}),r.push({label:"\u79fb\u81f3",value:"move",children:l}),n.setState({isLoading:!0,options1:r,options2:l,categoryFilters:i}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:t})}),300));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleStateChange=function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={id:t.id})[a]=1-t[a],e.next=4,V(r);case 4:l=e.sent,i=n.state.data,0===l.status&&(i.forEach((function(e){return e[a]=e.id===t.id?1-e[a]:e[a]})),n.setState({data:i}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleAdd=function(){n.props.history.push("/product/add")},n.handleView=function(e){n.props.history.push({pathname:"/product/view",state:{data:e}})},n.handleEdit=function(e){n.props.history.push({pathname:"/product/edit",state:{data:e}})},n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5546\u54c1"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.id===e.id?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleSelectChange=function(e){n.setState({selectedType:e})},n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(a={status:n.state.selectedType,value:t}).value||""!==a.status){e.next=8;break}return e.next=4,A();case 4:0===(r=e.sent).status&&n.refreshTable(r.data),e.next=13;break;case 8:for(l in a)a.hasOwnProperty(l)&&0!==a[l].length&&("status"===l?(i=a.status.split("-"),a[i[0]]=Number(i[1])):a[l]="object"===typeof a[l]?a[l][0]:a[l]);return e.next=11,Y(a);case 11:0===(c=e.sent).status&&n.refreshTable(c.data);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleCascaderChange=function(e){n.setState({operation:e})},n.handleOperate=Object(x.a)(b.a.mark((function e(){var t,a,r,l,i,c,s,o,u,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=n.state.operation).length){e.next=6;break}n.setState({selectedRowKeys:[]}),n.refreshTable(n.state.data),e.next=46;break;case 6:if(1!==t.length){e.next=35;break}if("delete"!==t[0]){e.next=16;break}if(0!==M(n.state.selectedRowKeys).status){e.next=14;break}return e.next=12,A();case 12:0===(a=e.sent).status&&((r=a.data).forEach((function(e){n.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),n.timerID=setTimeout((function(){n.formRef1.props.form.resetFields(),n.refreshTable(r)}),500));case 14:e.next=33;break;case 16:if("move"!==t[0]){e.next=21;break}n.formRef1.props.form.resetFields(),n.refreshTable(n.state.data),e.next=33;break;case 21:return l={},i=t[0].split("-"),l.id=n.state.selectedRowKeys,l[i[0]]=Number(i[1]),e.next=27,V(l);case 27:if(0!==e.sent.status){e.next=33;break}return e.next=31,A();case 31:0===(c=e.sent).status&&((s=c.data).forEach((function(e){n.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),n.timerID=setTimeout((function(){n.refreshTable(s)}),500));case 33:e.next=46;break;case 35:return(o={}).id=n.state.selectedRowKeys,o.category=t[1],e.next=40,V(o);case 40:if(0!==e.sent.status){e.next=46;break}return e.next=44,A();case 44:0===(u=e.sent).status&&((m=u.data).forEach((function(e){n.state.options2.forEach((function(t){e.category===t.value&&(e.categoryName=t.label)}))})),n.refreshTable(m));case 46:case"end":return e.stop()}}),e)}))),n.state={isLoading:!0,data:[],options1:[],options2:[],selectedRowKeys:[],operation:"",selectedCategory:[],categoryFilters:[],selectedType:""},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u8d27\u53f7",key:"number",dataIndex:"number"},{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t,999===a.category?l.a.createElement(tt.a,{size:"small",color:"red"},"\u672a\u5206\u7c7b"):null)}},{title:"\u5206\u7c7b",key:"categoryName",dataIndex:"categoryName",render:function(e,t){return l.a.createElement("span",null,999===t.category?"\u672a\u8bbe\u7f6e\u5206\u7c7b":e)},filters:this.state.categoryFilters,onFilter:function(e,t){return e===t.categoryName}},{title:"\u552e\u4ef7",key:"price",dataIndex:"price",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.price-t.price}},{title:"\u79ef\u5206",key:"integral",dataIndex:"integral",render:function(e){return l.a.createElement("span",null,e)},sorter:function(e,t){return e.integral-t.integral}},{title:"\u5355\u4f4d",key:"unit",dataIndex:"unit",render:function(e){return l.a.createElement("span",null,e)}},{title:"\u72b6\u6001",key:"status",render:function(t){return 999===t.category?l.a.createElement("span",null,"/"):l.a.createElement("span",null,l.a.createElement("span",null,"\u4e0a\u67b6\uff1a"),l.a.createElement(He.a,{size:"small",defaultChecked:1===t.onsale,onClick:function(){return e.handleStateChange(t,"onsale")}}),l.a.createElement("br",null),l.a.createElement("span",null,"\u65b0\u54c1\uff1a"),l.a.createElement(He.a,{size:"small",style:{marginTop:"5px"},defaultChecked:1===t.isnew,onClick:function(){return e.handleStateChange(t,"isnew")}}),l.a.createElement("br",null),l.a.createElement("span",null,"\u63a8\u8350\uff1a"),l.a.createElement(He.a,{size:"small",style:{marginTop:"5px"},defaultChecked:1===t.recommend,onClick:function(){return e.handleStateChange(t,"recommend")}}))}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"product-container"},l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868"]}),l.a.createElement("div",{className:"product-header"},l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:8},l.a.createElement(h.a,{type:"primary",onClick:function(){return e.handleAdd()}},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u5546\u54c1")),l.a.createElement(et.a,{span:6,style:{marginTop:"-1px"}},l.a.createElement(Xe.a,{style:{width:"120px",marginRight:"15px"},placeholder:"\u6279\u91cf\u64cd\u4f5c",options:this.state.options1,onChange:this.handleCascaderChange}),l.a.createElement(h.a,{type:"primary",onClick:this.handleOperate},"\u786e\u8ba4")),l.a.createElement(et.a,{span:10,style:{textAlign:"right"}},l.a.createElement(Ke.a,{style:{width:"110px",textAlign:"left"},placeholder:"\u9009\u62e9\u72b6\u6001",onChange:this.handleSelectChange},l.a.createElement(Ke.a.Option,{value:""},"\u5168\u90e8"),l.a.createElement(Ke.a.Option,{value:"onsale-1"},"\u5df2\u4e0a\u67b6"),l.a.createElement(Ke.a.Option,{value:"onsale-0"},"\u672a\u4e0a\u67b6"),l.a.createElement(Ke.a.Option,{value:"isnew-1"},"\u65b0\u54c1"),l.a.createElement(Ke.a.Option,{value:"isnew-0"},"\u975e\u65b0\u54c1"),l.a.createElement(Ke.a.Option,{value:"recommend-1"},"\u5df2\u63a8\u8350"),l.a.createElement(Ke.a.Option,{value:"recommend-0"},"\u672a\u63a8\u8350")),l.a.createElement(E.a.Search,{placeholder:"\u641c\u7d22\u5546\u54c1\u540d\u79f0/\u8d27\u53f7",style:{width:"200px",float:"right",margin:"0 15px "},onSearch:function(t){return e.handleSearch(t)},enterButton:!0})))),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{rowSelection:this.rowSelection,style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component)),nt=(a(198),a(30)),rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={previewVisible:!1,previewImage:"",fileList:[]},e.UNSAFE_componentWillMount=function(){if(e.props.hasOwnProperty("imgs")){var t=e.props.imgs.split(","),a=[];t.forEach((function(e,t){a.push({uid:-1-t,name:e,status:"done",url:"/upload/"+e})})),e.setState({fileList:a})}},e.getBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},e.handleCancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=Object(x.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,e.getBase64(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(x.a)(b.a.mark((function t(a){var n,r,l,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.file,r=a.fileList,"done"!==n.status){t.next=8;break}l=n.response,(n=r[r.length-1]).name=l.data.name,n.url=l.data.url,t.next=11;break;case 8:if("removed"!==n.status){t.next=11;break}return t.next=11,L(n.name);case 11:i=r.map((function(e){return"string"===typeof e.url?e.url.split("upload/")[1]:e.url})),e.props.onChange(i.join(",")),e.setState({fileList:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement(g.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",{className:"clearfix"},l.a.createElement(Le.a,{action:"/file/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:this.state.fileList,onPreview:this.handlePreview,onChange:this.handleChange},this.state.fileList.length>=6?null:e),l.a.createElement(Ye.a,{visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:this.state.previewImage})))}}]),a}(l.a.Component),lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:0===(t=e.sent).status&&(a=[],t.data.forEach((function(e){a.push({key:e.name,value:e.id})})),n.setState({category_options:a}));case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.validateNumber=function(e,t,a){t?t.length<5||t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e5\u4e2a\uff0c\u4e14\u4e0d\u591a\u4e8e10\u4e2a\u5b57\u7b26"):/^[0-9a-zA-Z]*$/g.test(t)?a("\u8bf7\u8f93\u5165\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5176\u7ec4\u5408"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7")},n.validateName=function(e,t,a){t?t.length<2||t.length>10?a("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e2\u4e2a\uff0c\u4e14\u4e0d\u8d85\u8fc710\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u540d\u79f0")},n.validatePrice=function(e,t,a){t?t<0?a("\u8bf7\u6309\u6b63\u786e\u683c\u5f0f\u8f93\u5165\u5546\u54c1\u4ef7\u683c"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c")},n.validateUnit=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u5355\u4f4d")},n.validateNoteProduct=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u4ea7\u54c1\u5907\u6ce8")},n.validateIntegral=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u79ef\u5206\u503c")},n.validateIntroduceTitle=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u6807\u9898")},n.validateIntroduceContent=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u5185\u5bb9")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return a.category=Number(a.category),a.price=Number(a.price),a.integral=Number(a.integral),a.onsale=-1===a.state.indexOf("onsale")?0:1,a.isnew=-1===a.state.indexOf("isnew")?0:1,a.recommend=-1===a.state.indexOf("recommend")?0:1,a.deleted=0,delete a.state,e.next=11,O("/product/add",a,"POST");case 11:0===(r=e.sent).status&&(v.a.success(r.msg+",\u5373\u5c06\u8fd4\u56de\u5546\u54c1\u5217\u8868",2),n.timerID=setTimeout((function(){n.props.history.replace("/product")}),2e3)),e.next=16;break;case 15:console.log(t);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.state={category_options:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u6dfb\u52a0\u5546\u54c1"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},t.getFieldDecorator("number",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7",validate:this.validateNumber}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},t.getFieldDecorator("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",validate:this.validateName}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),l.a.createElement(f.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},t.getFieldDecorator("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]})(l.a.createElement(Ke.a,{onChange:this.handleChange,placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"},this.state.category_options.map((function(e){return l.a.createElement(Ke.a.Option,{key:e.value},e.key)}))))),l.a.createElement(f.a.Item,{label:"\u552e\u4ef7",hasFeedback:!0},t.getFieldDecorator("price",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7",validate:this.validatePrice}]})(l.a.createElement(E.a,{addonAfter:"\u5143 \xa0\xa0\xa0",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}))),l.a.createElement(f.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},t.getFieldDecorator("unit",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d",validate:this.validateUnit}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u72b6\u6001"},t.getFieldDecorator("state",{initialValue:["isNew"]})(l.a.createElement(nt.a.Group,{style:{width:"100%",margin:"10px 0 0 20px"}},l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"onsale"},"\u4e0a\u67b6")),l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"isnew"},"\u65b0\u54c1")),l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"recommend"},"\u63a8\u8350")))))),l.a.createElement(f.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},t.getFieldDecorator("integral",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c",validate:this.validateIntegral}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}))),l.a.createElement(f.a.Item,{label:"\u7b80\u4ecb"},t.getFieldDecorator("introduce",{rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(E.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u7b80\u4ecb"}))),l.a.createElement(f.a.Item,{label:"\u4f18\u60e0\u63d0\u793a"},t.getFieldDecorator("tip",{rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(E.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u63d0\u793a"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0"},t.getFieldDecorator("description",{rule:[{validate:this.validateIntroduceContent}]})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}))),l.a.createElement(f.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263\uff1a"},t.getFieldDecorator("discount_gold",{initialValue:10})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u767d\u91d1\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_platinum",{initialValue:10})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u94bb\u77f3\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_diamond",{initialValue:10})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},t.getFieldDecorator("pictures",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5546\u54c1\u56fe\u7247"}]})(l.a.createElement(rt,null))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u5907\u6ce8"},t.getFieldDecorator("note")(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 450px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4\u5546\u54c1")))))}}]),a}(l.a.Component),it=f.a.create({name:"add-product-form"})(lt),ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=n.props.location.state.data).state=[],1===t.onsale?t.state.push("onsale"):t.state.push(),1===t.isnew?t.state.push("isnew"):t.state.push(),1===t.recommend?t.state.push("recommend"):t.state.push(),n.setState({data:t}),e.next=8,F();case 8:0===(a=e.sent).status&&((r=[]).push({key:"\u672a\u5206\u7c7b",value:999}),a.data.forEach((function(e){r.push({key:e.name,value:e.id})})),n.setState({categoryOptions:r}));case 10:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.validateNumber=function(e,t,a){t?t.length<5||t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e5\u4e2a\uff0c\u4e14\u4e0d\u591a\u4e8e10\u4e2a\u5b57\u7b26"):/^[0-9a-zA-Z]*$/g.test(t)?a("\u8bf7\u8f93\u5165\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u5176\u7ec4\u5408"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7")},n.validateName=function(e,t,a){t?t.length<2||t.length>10?a("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e2\u4e2a\uff0c\u4e14\u4e0d\u8d85\u8fc710\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u540d\u79f0")},n.validatePrice=function(e,t,a){t?t<0?a("\u8bf7\u6309\u6b63\u786e\u683c\u5f0f\u8f93\u5165\u5546\u54c1\u4ef7\u683c"):a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c")},n.validateUnit=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u5355\u4f4d")},n.validateNoteProduct=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u4ea7\u54c1\u5907\u6ce8")},n.validateIntegral=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u5546\u54c1\u79ef\u5206\u503c")},n.validateIntroduceTitle=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u6807\u9898")},n.validateIntroduceContent=function(e,t,a){t?a():a("\u8bf7\u8f93\u5165\u8be6\u60c5\u9875\u5185\u5bb9")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=12;break}return a.category=Number(a.category),a.price=Number(a.price),a.integral=Number(a.integral),a.onsale=-1===a.state.indexOf("onsale")?0:1,a.isnew=-1===a.state.indexOf("isnew")?0:1,a.recommend=-1===a.state.indexOf("recommend")?0:1,delete a.state,e.next=10,V(a);case 10:0===e.sent.status&&(v.a.success("\u66f4\u65b0\u5546\u54c1\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u5546\u54c1\u5217\u8868\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.replace("/product")}),1e3));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.state={categoryOptions:[],data:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868","\u7f16\u8f91\u5546\u54c1"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u5546\u54c1ID",hasFeedback:!0,style:{display:"none"}},t.getFieldDecorator("id",{initialValue:this.state.data.id})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},t.getFieldDecorator("number",{initialValue:this.state.data.number,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7",validate:this.validateNumber}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8d27\u53f7"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},t.getFieldDecorator("name",{initialValue:this.state.data.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",validate:this.validateName}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),l.a.createElement(f.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},t.getFieldDecorator("category",{initialValue:this.state.data.category,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b"}]})(l.a.createElement(Ke.a,{onChange:this.handleChange},this.state.categoryOptions.map((function(e){return l.a.createElement(Ke.a.Option,{key:e.value,value:e.value},e.key)}))))),l.a.createElement(f.a.Item,{label:"\u552e\u4ef7",hasFeedback:!0},t.getFieldDecorator("price",{initialValue:this.state.data.price,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}]})(l.a.createElement(E.a,{addonAfter:"\u5143 \xa0\xa0\xa0",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u552e\u4ef7"}))),l.a.createElement(f.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},t.getFieldDecorator("unit",{initialValue:this.state.data.unit,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d",validate:this.validateUnit}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8ba1\u91cf\u5355\u4f4d"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u72b6\u6001",style:{display:999===this.state.data.category?"none":"block"}},t.getFieldDecorator("state",{initialValue:this.state.data.state})(l.a.createElement(nt.a.Group,{style:{width:"100%",margin:"10px 0 0 20px"}},l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"onsale"},"\u4e0a\u67b6")),l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"isnew"},"\u65b0\u54c1")),l.a.createElement(et.a,{span:8},l.a.createElement(nt.a,{value:"recommend"},"\u63a8\u8350")))))),l.a.createElement(f.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},t.getFieldDecorator("integral",{initialValue:this.state.data.integral,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u79ef\u5206\u503c"}))),l.a.createElement(f.a.Item,{label:"\u7b80\u4ecb",hasFeedback:!0},t.getFieldDecorator("introduce",{initialValue:this.state.data.introduce,rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(E.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb"}))),l.a.createElement(f.a.Item,{label:"\u4f18\u60e0\u63d0\u793a",hasFeedback:!0},t.getFieldDecorator("tip",{initialValue:this.state.data.tip,rule:[{validate:this.validateIntroduceTitle}]})(l.a.createElement(E.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u63d0\u793a"}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0",hasFeedback:!0},t.getFieldDecorator("description",{initialValue:this.state.data.description,rule:[{validate:this.validateIntroduceContent}]})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}))),l.a.createElement(f.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263\uff1a"},t.getFieldDecorator("discount_gold",{initialValue:this.state.data.discount_gold})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u767d\u91d1\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_platinum",{initialValue:this.state.data.discount_platinum})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u94bb\u77f3\u4f1a\u5458\u6298\u6263"},t.getFieldDecorator("discount_diamond",{initialValue:this.state.data.discount_diamond})(l.a.createElement(Ve.a,{min:1,max:10,step:.5})),l.a.createElement("span",{className:"ant-form-text"},"\u6298")),l.a.createElement(f.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247"},t.getFieldDecorator("pictures",{initialValue:this.state.data.pictures})(l.a.createElement(rt,{imgs:this.state.data.pictures}))),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u5907\u6ce8",hasFeedback:!0},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 450px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4\u5546\u54c1")))))}}]),a}(l.a.Component),st=f.a.create({name:"add-product-form"})(ct),ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.location.state.data,console.log(t),n.setState({data:t});case 3:case"end":return e.stop()}}),e)}))),n.state={data:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=function(e){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"check",style:{color:"#1DA57A"}}),e)},a=function(e){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"close",style:{color:"#1DA57A"}}),e)};return l.a.createElement("div",{className:"product-view-container"},l.a.createElement(Te,{nav:["\u5546\u54c1\u7ba1\u7406","\u5546\u54c1\u5217\u8868","\u5546\u54c1\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5546\u54c1\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/product")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u8d27\u53f7",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.number)),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u540d\u79f0",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(f.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},999===this.state.data.category?"\u672a\u8bbe\u7f6e\u5206\u7c7b":this.state.data.categoryName)),l.a.createElement(f.a.Item,{label:"\u552e\u4ef7"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5 ",this.state.data.price.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.unit)),999===this.state.data.category?null:l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{marginLeft:"-20px"}},this.state.data.onsale?t("\u4e0a\u67b6"):a("\u4e0a\u67b6"),this.state.data.onsale?t("\u65b0\u54c1"):a("\u65b0\u54c1"),this.state.data.onsale?t("\u63a8\u8350"):a("\u63a8\u8350"))),l.a.createElement(f.a.Item,{label:"\u8d60\u9001\u79ef\u5206",hasFeedback:!0},l.a.createElement("span",{className:"ant-form-text"},this.state.data.integral)),l.a.createElement(f.a.Item,{label:"\u7b80\u4ecb"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.introduce)),l.a.createElement(f.a.Item,{label:"\u4f18\u60e0\u63d0\u793a"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tip)),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.description)),l.a.createElement(f.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_gold?"\u65e0":this.state.data.discount_gold+"\u6298")),l.a.createElement(f.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_platinum?"\u65e0":this.state.data.discount_platinum+"\u6298")),l.a.createElement(f.a.Item,{label:"\u9ec4\u91d1\u4f1a\u5458\u6298\u6263"},l.a.createElement("span",{className:"ant-form-text"},10===this.state.data.discount_diamond?"\u65e0":this.state.data.discount_diamond+"\u6298")),l.a.createElement(f.a.Item,{label:"\u5546\u54c1\u56fe\u7247"},l.a.createElement("span",{className:"ant-form-pictures"},""===this.state.data.pictures?l.a.createElement("span",null,"\u65e0"):this.state.data.pictures.split(",").map((function(e,t){return l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u5546\u54c1\u56fe\u7247"})})))),l.a.createElement(f.a.Item,{label:"\u4f18\u60e0\u4fe1\u606f\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")))))}}]),a}(l.a.Component),ut=f.a.create({name:"product-add-form"})(ot),mt=(a(161),a(52)),dt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.componentDidMount=function(){n.timerID1=setInterval(Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.searching){e.next=5;break}return e.next=3,le();case 3:t=e.sent,n.refreshTable(t);case 5:case"end":return e.stop()}}),e)}))),5e3)},n.componentWillUnmount=function(){n.setState=function(){},clearInterval(n.timerID1),clearTimeout(n.timerID2)},n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return a=e.sent,e.next=5,H();case 5:r=e.sent,0===t.status&&0===a.status&&r&&(l=t.data.map((function(e){return e.commodity=JSON.parse(e.commodity),r.data.forEach((function(t){e.customer===t.id&&(e.customer=t)})),e})),n.timerID2=setTimeout((function(){n.setState({data:l.reverse(),isLoading:!1})}),100));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,ce(t);case 3:a=e.sent,n.setState({searching:!0,isLoading:!0}),n.refreshTable(a),e.next=9;break;case 8:n.setState({searching:!1,isLoading:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleView=function(e){console.log(e),n.props.history.push({pathname:"/order/view",state:{data:e}})},n.handleCustomerDetail=function(e){n.props.history.push({pathname:"/member/view",state:{data:e}})},n.handleCancel=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355(ID: "+t.id+")\u5417?",okText:"\u786e\u5b9a",onOk:function(){var e=Object(x.a)(b.a.mark((function e(){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,state:2},e.next=3,oe(a);case 3:0===e.sent.status&&(r=n.state.data.map((function(e){return e.id===t.id&&(e.state=3),e})),n.setState({data:r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleComplete=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u5c06\u8ba2\u5355(ID: "+t.id+")\u8bbe\u7f6e\u4e3a\u5b8c\u6210\u72b6\u6001\u5417?",okText:"\u786e\u5b9a",onOk:function(){var e=Object(x.a)(b.a.mark((function e(){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,state:3},e.next=3,oe(a);case 3:0===e.sent.status&&(r=n.state.data.map((function(e){return e.id===t.id&&(e.state=4),e})),n.setState({data:r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.getTimePicker=function(){return 1===n.state.option?l.a.createElement(mt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:n.handleDatePickerChange}):2===n.state.option?l.a.createElement(mt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:n.handleWeekPickerChange,format:"YYYY-WW"}):3===n.state.option?l.a.createElement(mt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:n.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(mt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:n.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},n.handleSelectChange=function(e){n.setState({option:e}),0===e?(n.setState({searching:!1,isLoading:!0}),n.timerID2=setTimeout(Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,n.refreshTable(t),n.setState({isLoading:!1});case 5:case"end":return e.stop()}}),e)}))),100)):n.setState({searching:!0})},n.handleDatePickerChange=function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return r=new Date(a+" 00:00:00").getTime(),l=new Date(a+" 23:59:59").getTime(),n.setState({isLoading:!0}),e.next=6,se(r,l);case 6:i=e.sent,n.refreshTable(i),e.next=15;break;case 10:return n.setState({isLoading:!0}),e.next=13,le();case 13:c=e.sent,n.refreshTable(c);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleWeekPickerChange=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return a=Pe()(t).day(0).format("YYYY/MM/DD")+" 00:00:00",r=Pe()(t).day(6).format("YYYY/MM/DD")+" 23:59:59",a=new Date(a).getTime(),r=new Date(r).getTime(),n.setState({isLoading:!0}),e.next=8,se(a,r);case 8:l=e.sent,n.refreshTable(l),e.next=17;break;case 12:return n.setState({isLoading:!0}),e.next=15,le();case 15:i=e.sent,n.refreshTable(i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleMonthPickerChange=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return a=Pe()(t).startOf("month").format("YYYY-MM-DD")+" 23:59:59",r=Pe()(t).endOf("month").format("YYYY-MM-DD")+" 23:59:59",a=new Date(a).getTime(),r=new Date(r).getTime(),n.setState({isLoading:!0}),e.next=8,se(a,r);case 8:l=e.sent,n.refreshTable(l),e.next=17;break;case 12:return n.setState({isLoading:!0}),e.next=15,le();case 15:i=e.sent,n.refreshTable(i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleRangePickerChange=function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a[0]||!a[1]){e.next=10;break}return r=new Date(a[0]).getTime(),l=new Date(a[1]).getTime(),n.setState({isLoading:!0}),e.next=6,se(r,l);case 6:i=e.sent,n.refreshTable(i),e.next=15;break;case 10:return n.setState({isLoading:!0}),e.next=13,le();case 13:c=e.sent,n.refreshTable(c);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={isLoading:!0,data:[],searching:!1,option:0},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t," [\u67e5\u770b]")}},{title:"\u987e\u5ba2",dataIndex:"customer",key:"customer",render:function(t){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleCustomerDetail(t)}},1===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"blue"},"\u9ec4\u91d1")):2===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"green"},"\u767d\u91d1")):3===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t.name))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3},{text:"\u666e\u901a\u987e\u5ba2",value:0}],onFilter:function(e,t){return e===t.customer.status}},{title:"\u684c\u53f7",dataIndex:"seat",key:"seat",render:function(e){return l.a.createElement("span",null,e)},sorter:function(e,t){return e.seat-t.seat}},{title:"\u8ba2\u5355\u5185\u5bb9",dataIndex:"commodity",key:"commodity",render:function(e){return l.a.createElement("div",null,e.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(g.a,{type:"close"}),e.count)})))}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createtime",key:"createtime",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"}),"\xa0",e.getTimeForm(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.amount-t.amount}},{title:"\u8bc4\u4ef7",key:"stars",dataIndex:"stars",render:function(e){if(0===e)return l.a.createElement("span",null,"\u6682\u672a\u8bc4\u4ef7");for(var t=[],a=0;a<e;a++)t.push(a);return t.map((function(e){return l.a.createElement(g.a,{key:e,type:"star",style:{color:"yellow"},theme:"filled"})}))},sorter:function(e,t){return e.stars-t.stars},filters:[{text:"\u672a\u8bc4\u4ef7",value:0},{text:"\u4e00\u661f",value:1},{text:"\u4e8c\u661f",value:2},{text:"\u4e09\u661f",value:3},{text:"\u56db\u661f",value:4},{text:"\u4e94\u661f",value:5}],onFilter:function(e,t){return e===t.stars}},{title:"\u72b6\u6001",dataIndex:"state",key:"state",render:function(e,t){return 0===e?l.a.createElement("div",null,0===t.urged?"\u5df2\u4ed8\u6b3e":l.a.createElement(tt.a,{color:"red"},"\u50ac\u5355")):1===e?l.a.createElement(tt.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===e?"\u5df2\u53d6\u6d88":"\u5df2\u5b8c\u6210"},filters:[{text:"\u5df2\u4ed8\u6b3e",value:0},{text:"\u8bf7\u6c42\u53d6\u6d88",value:1},{text:"\u5df2\u53d6\u6d88",value:2},{text:"\u5df2\u5b8c\u6210",value:3}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return 0===t.state?l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",type:"primary",onClick:function(){return e.handleComplete(t)}},"\u5b8c\u6210")):1===t.state?l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleCancel(t)}},"\u53d6\u6d88")):"/"}}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u8ba2\u5355\u7ba1\u7406","\u5168\u90e8\u8ba2\u5355"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px",overflow:"hidden"}},l.a.createElement("div",{style:{display:"inline-block",width:"70%",textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(Ke.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",marginLeft:"10px"}},l.a.createElement(Ke.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4"))),l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u641c\u7d22\u8ba2\u5355ID",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component),pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.location.state.data,n.setState({data:t});case 2:case"end":return e.stop()}}),e)}))),n.getTime=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={data:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"product-view-container"},l.a.createElement(Te,{nav:["\u8ba2\u5355\u7ba1\u7406","\u8ba2\u5355\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u8ba2\u5355\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/order")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u8ba2\u5355ID"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.id)),l.a.createElement(f.a.Item,{label:"\u987e\u5ba2"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.customer.name)),l.a.createElement(f.a.Item,{label:"\u684c\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.seat,"\u53f7")),l.a.createElement(f.a.Item,{label:"\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{textIndent:0,marginLeft:"20px"}},0===this.state.data.state?l.a.createElement("div",null,0===this.state.data.urged?l.a.createElement(tt.a,{color:"blue"},"\u5df2\u4ed8\u6b3e"):l.a.createElement(tt.a,{color:"red"},"\u50ac\u5355")):1===this.state.data.state?l.a.createElement(tt.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===this.state.data.state?l.a.createElement(tt.a,{color:"green"},"\u5df2\u53d6\u6d88"):l.a.createElement(tt.a,{color:"green"},"\u5df2\u5b8c\u6210"))),l.a.createElement(f.a.Item,{label:"\u8ba2\u5355\u5217\u8868"},l.a.createElement("div",{className:"ant-form-text"},this.state.data.commodity.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(g.a,{type:"close"})," ",e.count)})))),l.a.createElement(f.a.Item,{label:"\u4e0b\u5355\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(this.state.data.createtime))),l.a.createElement(f.a.Item,{label:"\u8ba2\u5355\u603b\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.amount.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u5b9e\u4ed8\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.payment.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u6240\u83b7\u79ef\u5206"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.integral)),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")),l.a.createElement(f.a.Item,{label:"\u8bc4\u4ef7\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.stars?"\u6682\u672a\u8bc4\u4ef7":[1,2,3,4,5].map((function(t,a){return l.a.createElement(g.a,{key:a,type:"star",theme:"filled",style:{color:"yellow",marginLeft:"5px",display:t>e.state.data.stars?"none":"inline"}})})))),l.a.createElement(f.a.Item,{label:"\u8bc4\u4ef7\u6587\u5b57"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.stars?"\u6682\u672a\u8bc4\u4ef7":this.state.data.evaluation)))))}}]),a}(l.a.Component),ht=f.a.create({name:"product-add-form"})(pt),ft=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.componentDidMount=function(){n.timerID1=setInterval(Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.searching){e.next=5;break}return e.next=3,ie();case 3:t=e.sent,n.refreshTable(t);case 5:case"end":return e.stop()}}),e)}))),5e3)},n.componentWillUnmount=function(){n.setState=function(){},clearInterval(n.timerID1),clearTimeout(n.timerID2)},n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return a=e.sent,e.next=5,H();case 5:r=e.sent,0===t.status&&0===a.status&&r&&(l=t.data.map((function(e){return e.commodity=JSON.parse(e.commodity),r.data.forEach((function(t){e.customer===t.id&&(e.customer=t)})),e})),n.timerID2=setTimeout((function(){n.setState({data:l.reverse(),isLoading:!1})}),100));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,ce(t);case 3:a=e.sent,n.setState({searching:!0,isLoading:!0}),n.refreshTable(a),e.next=9;break;case 8:n.setState({searching:!1,isLoading:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleView=function(e){console.log(e),n.props.history.push({pathname:"/order/stage/view",state:{data:e}})},n.handleCustomerDetail=function(e){n.props.history.push({pathname:"/member/view",state:{data:e}})},n.handleCancel=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355(ID: "+t.id+")\u5417?",okText:"\u786e\u5b9a",onOk:function(){var e=Object(x.a)(b.a.mark((function e(){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,state:2},e.next=3,oe(a);case 3:0===e.sent.status&&(r=n.state.data.filter((function(e){return e.id!==t.id})),n.setState({data:r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleComplete=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye.a.confirm({title:"\u8b66\u544a",content:"\u786e\u5b9a\u8981\u5c06\u8ba2\u5355(ID: "+t.id+")\u8bbe\u7f6e\u4e3a\u5b8c\u6210\u72b6\u6001\u5417?",okText:"\u786e\u5b9a",onOk:function(){var e=Object(x.a)(b.a.mark((function e(){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,state:3},e.next=3,oe(a);case 3:0===e.sent.status&&(r=n.state.data.filter((function(e){return e.id!==t.id})),n.setState({data:r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getTime=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={isLoading:!0,data:[],searching:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t," [\u67e5\u770b]")}},{title:"\u987e\u5ba2",dataIndex:"customer",key:"customer",render:function(t){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleCustomerDetail(t)}},1===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"blue"},"\u9ec4\u91d1")):2===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"green"},"\u767d\u91d1")):3===t.status?l.a.createElement("span",null,t.name," ",l.a.createElement(tt.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t.name))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3},{text:"\u666e\u901a\u987e\u5ba2",value:0}],onFilter:function(e,t){return e===t.customer.status}},{title:"\u684c\u53f7",dataIndex:"seat",key:"seat",render:function(e){return l.a.createElement("span",null,e)},sorter:function(e,t){return e.seat-t.seat}},{title:"\u8ba2\u5355\u5185\u5bb9",dataIndex:"commodity",key:"commodity",render:function(e){return l.a.createElement("div",null,e.map((function(e,t){return l.a.createElement("div",{key:t},e.name,l.a.createElement(g.a,{type:"close"}),e.count)})))}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createtime",key:"createtime",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"}),"\xa0",e.getTime(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.amount-t.amount}},{title:"\u8bc4\u4ef7",key:"stars",dataIndex:"stars",render:function(e){if(0===e)return l.a.createElement("span",null,"\u6682\u672a\u8bc4\u4ef7");for(var t=[],a=0;a<e;a++)t.push(a);return t.map((function(e){return l.a.createElement(g.a,{key:e,type:"star",style:{color:"yellow"},theme:"filled"})}))},sorter:function(e,t){return e.stars-t.stars},filters:[{text:"\u672a\u8bc4\u4ef7",value:0},{text:"\u4e00\u661f",value:1},{text:"\u4e8c\u661f",value:2},{text:"\u4e09\u661f",value:3},{text:"\u56db\u661f",value:4},{text:"\u4e94\u661f",value:5}],onFilter:function(e,t){return e===t.stars}},{title:"\u72b6\u6001",dataIndex:"state",key:"state",render:function(e,t){return 0===e?l.a.createElement("div",null,0===t.urged?l.a.createElement(tt.a,{color:"blue"},"\u5df2\u4ed8\u6b3e"):l.a.createElement(tt.a,{color:"red"},"\u50ac\u5355")):1===e?l.a.createElement(tt.a,{color:"red"},"\u8bf7\u6c42\u53d6\u6d88"):2===e?l.a.createElement(tt.a,{color:"green"},"\u5df2\u53d6\u6d88"):l.a.createElement(tt.a,{color:"green"},"\u5df2\u5b8c\u6210")},filters:[{text:"\u5df2\u4ed8\u6b3e",value:0},{text:"\u8bf7\u6c42\u53d6\u6d88",value:1},{text:"\u5df2\u53d6\u6d88",value:2},{text:"\u5df2\u5b8c\u6210",value:3}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return 0===t.state?l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",type:"primary",onClick:function(){return e.handleComplete(t)}},"\u5b8c\u6210")):1===t.state?l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleCancel(t)}},"\u53d6\u6d88")):"/"}}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u8ba2\u5355\u7ba1\u7406","\u5168\u90e8\u8ba2\u5355"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px",overflow:"hidden"}},l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u641c\u7d22\u8ba2\u5355ID",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component),Et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.refreshTable=function(e){if(0===e.status){var t=e.data;t=t.map((function(e){return e})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:t})}),300)}},n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),""!==t){e.next=7;break}return e.next=4,U();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,G(t);case 9:e.t0=e.sent;case 10:a=e.t0,n.refreshTable(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleAdd=function(){n.props.history.push("/member/add")},n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u4f1a\u5458"'+e.name+"(ID:"+e.id+')"\u5417?',okText:"\u786e\u5b9a",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/customer/delete",{id:e.id},"GET");case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.id===e.id?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){}})},n.handleDetail=function(e){n.props.history.push({pathname:"/member/view",state:{data:e}})},n.handleEdit=function(e){n.props.history.push({pathname:"/member/edit",state:{data:e}})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,O("/rule/update",a,"POST");case 3:0===e.sent.status&&(n.setState({visible:!1}),n.timerID=setTimeout((function(){v.a.success("\u8bbe\u7f6e\u6210\u529f")}),500));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={isLoading:!0,data:[],visible:!1,rule:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u4f1a\u5458ID",key:"id",dataIndex:"id"},{title:"\u6635\u79f0/\u7b49\u7ea7",key:"name",dataIndex:"name",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleDetail(a)}},1===a.status?l.a.createElement("span",null,t," ",l.a.createElement(tt.a,{color:"blue"},"\u9ec4\u91d1")):2===a.status?l.a.createElement("span",null,t," ",l.a.createElement(tt.a,{color:"green"},"\u767d\u91d1")):3===a.status?l.a.createElement("span",null,t," ",l.a.createElement(tt.a,{color:"red"},"\u94bb\u77f3")):l.a.createElement("span",null,t))},filters:[{text:"\u9ec4\u91d1\u4f1a\u5458",value:1},{text:"\u767d\u91d1\u4f1a\u5458",value:2},{text:"\u94bb\u77f3\u4f1a\u5458",value:3}],onFilter:function(e,t){return e===t.status}},{title:"\u521b\u5efa\u65f6\u95f4",key:"createtime",dataIndex:"createtime",render:function(t){return l.a.createElement("span",null,e.getTimeForm(t))},sorter:function(e,t){return e.createtime-t.createtime}},{title:"\u7535\u8bdd",key:"tel",dataIndex:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"phone"})," ",e)}},{title:"\u79ef\u5206",key:"integral",dataIndex:"integral",sorter:function(e,t){return e.integral-t.integral}},{title:"\u8ba2\u5355\u6570\u91cf",key:"orderSum",render:function(e,t){return l.a.createElement("span",null,"\u5f85\u5b8c\u6210")},filters:[{text:"\u6700\u8fd1\u4e00\u5468",value:"0"},{text:"\u6700\u8fd1\u4e00\u6708",value:"1"},{text:"\u6700\u8fd1\u4e00\u5e74",value:"2"}]},{title:"\u6d88\u8d39\u91d1\u989d",key:"orderAmount",render:function(e,t){return l.a.createElement("span",null,"\u5f85\u5b8c\u6210")},filters:[{text:"\u6700\u8fd1\u4e00\u5468",value:"0"},{text:"\u6700\u8fd1\u4e00\u6708",value:"1"},{text:"\u6700\u8fd1\u4e00\u5e74",value:"2"}]},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return l.a.createElement("div",null,l.a.createElement(h.a,{size:"small",type:"primary",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u4f1a\u5458"),l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u4f1a\u5458ID/\u6635\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component),gt=f.a.create()(Et),yt=(a(197),a(39)),bt=f.a.create({name:"add-member-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(x.a)(b.a.mark((function t(a,n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=11;break}return(r=n).createtime=(new Date).getTime(),r.status=1,r.integral=0,r.orderid="",r.deleted=0,t.next=9,B(r);case 9:0===t.sent.status&&(v.a.success("\u65b0\u589e\u4f1a\u5458\u6210\u529f\uff01\u5373\u5c06\u8fd4\u56de\u4f1a\u5458\u5217\u8868\u9875\u9762"),e.timerID=setTimeout((function(){e.props.history.push("/member")}),2e3));case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4f1a\u5458\u7ba1\u7406","\u65b0\u589e\u4f1a\u5458"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u4f1a\u5458\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d",hasFeedback:!0},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(f.a.Item,{label:"Tel",hasFeedback:!0},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(E.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("status",{rules:[{required:!0}],initialValue:1})(l.a.createElement(yt.a.Group,{buttonStyle:"solid"},l.a.createElement(yt.a.Button,{value:1},"\u9ec4\u91d1\u4f1a\u5458"),l.a.createElement(yt.a.Button,{value:2},"\u767d\u91d1\u4f1a\u5458"),l.a.createElement(yt.a.Button,{value:3},"\u94bb\u77f3\u4f1a\u5458")))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8",hasFeedback:!0},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),vt=f.a.create({name:"add-member-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(x.a)(b.a.mark((function t(a,n){var r,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=8;break}for(l in(r={}).id=e.props.location.state.data.id,n)n.hasOwnProperty(l)&&(r[l]=n[l]);return t.next=6,K(r);case 6:0===t.sent.status&&(v.a.success("\u7f16\u8f91\u4f1a\u5458\u4fe1\u606f\u6210\u529f\uff0c\u5373\u5c06\u8fd4\u56de\u4f1a\u5458\u5217\u8868\u9875\uff01"),e.timerID=setTimeout((function(){e.props.history.push("/member")}),2e3));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868","\u7f16\u8f91\u4f1a\u5458"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u4f1a\u5458\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d",hasFeedback:!0},this.props.form.getFieldDecorator("name",{rules:[{required:!0}],initialValue:t.name})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(f.a.Item,{label:"Tel",hasFeedback:!0},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:t.tel})(l.a.createElement(E.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("status",{initialValue:t.status,rules:[{required:!0}]})(l.a.createElement(yt.a.Group,{buttonStyle:"solid"},l.a.createElement(yt.a.Button,{value:1},"\u9ec4\u91d1"),l.a.createElement(yt.a.Button,{value:2},"\u767d\u91d1"),l.a.createElement(yt.a.Button,{value:3},"\u94bb\u77f3")))),l.a.createElement(f.a.Item,{label:"\u79ef\u5206"},this.props.form.getFieldDecorator("integral",{initialValue:t.integral})(l.a.createElement(Ve.a,{style:{width:"100px"},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8",hasFeedback:!0},this.props.form.getFieldDecorator("note",{initialValue:t.note})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),xt=(a(1086),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getTime=function(e){var t=(e=new Date(e)).getMonth()+1;return l.a.createElement("span",null,e.getFullYear()+"-"+t+"-"+e.getDate(),"\xa0\xa0",e.getHours()+":"+e.getMinutes())},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",{className:"customer-view-container"},l.a.createElement(Te,{nav:["\u4f1a\u5458\u7ba1\u7406","\u4f1a\u5458\u5217\u8868","\u4f1a\u5458\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u4f1a\u5458\u8be6\u60c5"),extra:l.a.createElement(h.a,{onClick:function(){e.props.history.push("/member")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u4f1a\u5458ID"},l.a.createElement("span",{className:"ant-form-text"},t.id)),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},t.name)),l.a.createElement(f.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},t.tel)),l.a.createElement(f.a.Item,{label:"\u79ef\u5206"},l.a.createElement("span",{className:"ant-form-text"},t.integral)),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{style:{marginLeft:"20px"}},1===t.status?l.a.createElement(tt.a,{color:"blue"},"\u9ec4\u91d1"):2===t.status?l.a.createElement(tt.a,{color:"green"},"\u767d\u91d1"):l.a.createElement(tt.a,{color:"red"},"\u94bb\u77f3"))),l.a.createElement(f.a.Item,{label:"\u521b\u5efa\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(t.createtime))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},t.note?t.note:"\u65e0")))))}}]),a}(l.a.Component)),kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.refreshTable=function(e){if(0===e.status){var t=[],a=[],r=[],l=[];e.data.forEach((function(e){t.push(e.department),r.push(e.duty)})),new Set(t).forEach((function(e){a.push({text:e,value:e})})),new Set(r).forEach((function(e){l.push({text:e,value:e})})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:e.data,departmentFilter:a,dutyFilter:l})}))}},n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=6;break}return e.next=3,J();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Z(t);case 8:e.t0=e.sent;case 9:a=e.t0,n.refreshTable(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5458\u5de5"'+e.name+"(\u5de5\u53f7\uff1a"+e.workid+')"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/employee/delete",{id:e.workid},"GET");case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.workid===e.workid?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleAdd=function(){n.props.history.push("/employee/add")},n.handleView=function(e){console.log(e),n.props.history.push({pathname:"/employee/view",state:{data:e}})},n.handleEdit=function(e){n.props.history.push({pathname:"/employee/edit",state:{data:e}})},n.state={isLoading:!0,data:[],dutyFilter:[],departmentFilter:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u5de5\u53f7",key:"workid",dataIndex:"workid",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u59d3\u540d",key:"name",dataIndex:"name"},{title:"\u6027\u522b",key:"gender",dataIndex:"gender",render:function(e){return l.a.createElement("span",null,0===e?"\u5973":"\u7537")},filters:[{text:"\u7537",value:1},{text:"\u5973",value:0}],onFilter:function(e,t){return e===t.gender}},{title:"\u5e74\u9f84",key:"age",dataIndex:"age",sorter:function(e,t){return e.age-t.age}},{title:"\u7535\u8bdd",key:"tel",dataIndex:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"phone"})," ",e)}},{title:"\u5de5\u9f84",key:"workage",dataIndex:"entrytime",render:function(e){return l.a.createElement("span",null,(new Date).getFullYear()-new Date(e).getFullYear()||"\u672a\u6ee1\u4e00\u5e74")},sorter:function(e,t){return e.entrytime-t.entrytime}},{title:"\u90e8\u95e8",key:"department",dataIndex:"department",filters:this.state.departmentFilter,onFilter:function(e,t){return e===t.department}},{title:"\u804c\u8d23",key:"duty",dataIndex:"duty",render:function(e,t){return 0===t.level?l.a.createElement("span",null,e," ",l.a.createElement(tt.a,{color:"blue"},"\u521d\u7ea7")):1===t.level?l.a.createElement("span",null,e," ",l.a.createElement(tt.a,{color:"green"},"\u4e2d\u7ea7")):l.a.createElement("span",null,e," ",l.a.createElement(tt.a,{color:"red"},"\u9ad8\u7ea7"))},filters:this.state.dutyFilter,onFilter:function(e,t){return e===t.duty}},{title:"\u6708\u85aa",key:"salary",dataIndex:"salary",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.salary-t.salary}},{title:"\u64cd\u4f5c",key:"operation",render:function(t){return l.a.createElement("div",null,l.a.createElement(h.a,{size:"small",type:"primary",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u5458\u5de5"),l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u5de5\u53f7/\u59d3\u540d",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.workid},bordered:!0}))}}]),a}(l.a.Component),wt=(a(470),a(173)),Dt=f.a.create({name:"add-employee-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleNext=function(){n.props.form.validateFields(["name","identity","gender","age","nation","birthday","origin","marriage","institution","degree","graduatetime"],(function(e,t){if(!e){var a=n.state.data,r=n.state.current;for(var l in t)t.hasOwnProperty(l)&&(a[l]=t[l]);n.setState({current:r+1,data:a})}}))},n.handlePrevious=function(){var e=n.state.current;n.setState({current:e-1})},n.handleSubmit=function(e){e.preventDefault();n.props.form.validateFields(["profile","workid","entrytime","department","duty","level","tel","address","salary","note"],function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=11;break}for(i in r=n.state.data,l=n.state.current,a)a.hasOwnProperty(i)&&(r[i]=a[i]);return r.birthday=new Date(r.birthday).getTime(),r.graduatetime=new Date(r.graduatetime).getTime(),r.entrytime=new Date(r.entrytime).getTime(),e.next=9,$(r);case 9:0===e.sent.status&&(n.setState({data:r,current:l+1}),v.a.success("\u65b0\u589e\u5458\u5de5\u4fe1\u606f\u6210\u529f\uff01"));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.onTabChange=function(e){n.setState({key:e})},n.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()>=10?t.getDate():"0"+t.getDate();return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a+"-"+n},n.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a},n.state={current:0,value1:{},data:{},key:"tab1"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a={tab1:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(f.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.identity)),l.a.createElement(f.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.gender?"\u5973":"\u7537")),l.a.createElement(f.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.age,"\u5c81")),l.a.createElement(f.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.nation)),l.a.createElement(f.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.birthday))),l.a.createElement(f.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.origin)),l.a.createElement(f.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(f.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.degree)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.institution)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(this.state.data.graduatetime)))),tab2:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.workid)),l.a.createElement(f.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.entrytime))),l.a.createElement(f.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.department)),l.a.createElement(f.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.duty)),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.level?"\u521d\u7ea7":1===this.state.data.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(f.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tel)),l.a.createElement(f.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.address)),l.a.createElement(f.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.salary," \u5143")),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note)),l.a.createElement(f.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},this.state.data.profile?l.a.createElement("img",{src:"/upload/"+this.state.data.profile,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}}):l.a.createElement("span",null,"\u65e0"))))},n=[{title:"\u586b\u5199\u57fa\u672c\u4fe1\u606f",content:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(f.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},this.props.form.getFieldDecorator("identity",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\u7801"}))),l.a.createElement(f.a.Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{rules:[{required:!0}]})(l.a.createElement(yt.a.Group,null,l.a.createElement(yt.a,{value:1,style:{margin:"0 20px"}},"\u7537"),l.a.createElement(yt.a,{value:0},"\u5973")))),l.a.createElement(f.a.Item,{label:"\u5e74\u9f84"},this.props.form.getFieldDecorator("age",{rules:[{required:!0}]})(l.a.createElement(Ve.a,{style:{width:"150px"}})),l.a.createElement("span",{className:"ant-form-text"},"\u5c81")),l.a.createElement(f.a.Item,{label:"\u6c11\u65cf"},this.props.form.getFieldDecorator("nation",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u6c11\u65cf"}))),l.a.createElement(f.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},this.props.form.getFieldDecorator("birthday",{rules:[{required:!0}]})(l.a.createElement(mt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(f.a.Item,{label:"\u7c4d\u8d2f"},this.props.form.getFieldDecorator("origin",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7c4d\u8d2f"}))),l.a.createElement(f.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},this.props.form.getFieldDecorator("marriage",{rules:[{required:!0}]})(l.a.createElement(yt.a.Group,null,l.a.createElement(yt.a,{value:0,style:{margin:"0 20px"}},"\u672a\u5a5a"),l.a.createElement(yt.a,{value:1},"\u5df2\u5a5a")))),l.a.createElement(f.a.Item,{label:"\u5b66\u5386"},this.props.form.getFieldDecorator("degree",{rules:[{required:!0}]})(l.a.createElement(Ke.a,{placeholder:"\u8bf7\u9009\u62e9\u5b66\u5386",style:{width:"187px"}},l.a.createElement(Ke.a.Option,{value:"\u535a\u58eb"},"\u535a\u58eb"),l.a.createElement(Ke.a.Option,{value:"\u7855\u58eb"},"\u7855\u58eb"),l.a.createElement(Ke.a.Option,{value:"\u672c\u79d1"},"\u672c\u79d1"),l.a.createElement(Ke.a.Option,{value:"\u9ad8\u4e2d"},"\u9ad8\u4e2d"),l.a.createElement(Ke.a.Option,{value:"\u521d\u4e2d"},"\u521d\u4e2d"),l.a.createElement(Ke.a.Option,{value:"\u5c0f\u5b66"},"\u5c0f\u5b66")))),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},this.props.form.getFieldDecorator("institution",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u6bd5\u4e1a\u9662\u6821"}))),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},this.props.form.getFieldDecorator("graduatetime",{rules:[{required:!0}]})(l.a.createElement(mt.a.MonthPicker,{format:"YYYY/MM"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{type:"primary",style:{margin:"50px 0 0 450px"},onClick:function(){return e.handleNext(0)}},"\u4e0b\u4e00\u6b65")))},{title:"\u586b\u5199\u5de5\u4f5c\u4fe1\u606f",content:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u5de5\u53f7"},this.props.form.getFieldDecorator("workid",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u53f7"}))),l.a.createElement(f.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},this.props.form.getFieldDecorator("entrytime",{rules:[{required:!0}]})(l.a.createElement(mt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(f.a.Item,{label:"\u90e8\u95e8"},this.props.form.getFieldDecorator("department",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u90e8\u95e8"}))),l.a.createElement(f.a.Item,{label:"\u804c\u8d23"},this.props.form.getFieldDecorator("duty",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u804c\u8d23"}))),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("level",{rules:[{required:!0}]})(l.a.createElement(yt.a.Group,{buttonStyle:"solid"},l.a.createElement(yt.a.Button,{value:0},"\u521d \u7ea7"),l.a.createElement(yt.a.Button,{value:1},"\u4e2d \u7ea7"),l.a.createElement(yt.a.Button,{value:2},"\u9ad8 \u7ea7")))),l.a.createElement(f.a.Item,{label:"Tel"},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(E.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(f.a.Item,{label:"\u4f4f\u5740"},this.props.form.getFieldDecorator("address",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f4f\u5740"}))),l.a.createElement(f.a.Item,{label:"\u6708\u85aa"},this.props.form.getFieldDecorator("salary",{rules:[{required:!0}]})(l.a.createElement(E.a,{addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u6708\u85aa"}))),l.a.createElement(f.a.Item,{label:"\u7167\u7247"},this.props.form.getFieldDecorator("profile",{rules:[{required:!0}]})(l.a.createElement(rt,null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(E.a.Group,{style:{marginLeft:"410px"}},l.a.createElement(h.a,{type:"primary",style:{marginRight:"50px"},onClick:function(){return e.handlePrevious()}},"\u4e0a\u4e00\u6b65"),l.a.createElement(h.a,{type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u786e\u8ba4\u63d0\u4ea4"))))},{title:"\u63d0\u4ea4\u6210\u529f",content:l.a.createElement(Ae.a,{style:{width:"80%",margin:"20px auto"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){e.onTabChange(t)}},a[this.state.key])}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u65b0\u589e\u5458\u5de5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5458\u5de5\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(wt.a,{current:this.state.current,style:{margin:"40px auto",width:"550px"}},n.map((function(e,t){return l.a.createElement(wt.a.Step,{key:t,title:e.title})}))),l.a.createElement("div",{className:"steps-content"},n[this.state.current].content)))}}]),a}(l.a.Component)),It=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onTabChange=function(e){n.setState({key:e})},n.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()>=10?t.getDate():"0"+t.getDate();return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a+"-"+n},n.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return a=a>=10?a:"0"+a,t.getFullYear()+"-"+a},n.state={key:"tab1"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a=this.props.location.state.data,n={tab1:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},a.name)),l.a.createElement(f.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},a.identity)),l.a.createElement(f.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===a.gender?"\u5973":"\u7537")),l.a.createElement(f.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},a.age,"\u5c81")),l.a.createElement(f.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},a.nation)),l.a.createElement(f.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(a.birthday))),l.a.createElement(f.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},a.origin)),l.a.createElement(f.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===a.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(f.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},a.degree)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},a.institution)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(a.graduatetime)))),tab2:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},a.workid)),l.a.createElement(f.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(a.entrytime))),l.a.createElement(f.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},a.department)),l.a.createElement(f.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},a.duty)),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===a.level?"\u521d\u7ea7":1===a.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(f.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},a.tel)),l.a.createElement(f.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},a.address)),l.a.createElement(f.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},a.salary.toFixed(2)," \u5143")),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},a.note?a.note:"\u65e0")),l.a.createElement(f.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},""===a.profile?l.a.createElement("span",null,"\u65e0"):a.profile.split(",").map((function(e,t){return l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}})})))))};return l.a.createElement("div",{className:"employee-view-container"},l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u5458\u5de5\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5458\u5de5\u8be6\u60c5"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){return e.onTabChange(t)}},n[this.state.key]))}}]),a}(l.a.Component),Ot=f.a.create({name:"edit-employee-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleNext=function(){n.props.form.validateFields(["name","identity","gender","age","nation","birthday","origin","marriage","institution","degree","graduatetime"],(function(e,t){if(!e){var a=n.state.data,r=n.state.current;for(var l in t)t.hasOwnProperty(l)&&(a[l]=t[l]);n.setState({current:r+1,data:a})}}))},n.handlePrevious=function(){var e=n.state.current;n.setState({current:e-1})},n.handleSubmit=function(e){e.preventDefault();n.props.form.validateFields(["profile","workid","entrytime","department","duty","level","tel","address","salary","note"],function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=14;break}for(i in r=n.state.data,l=n.state.current,a)a.hasOwnProperty(i)&&(r[i]=a[i]);for(s in r.birthday=new Date(r.birthday).getTime(),r.graduatetime=new Date(r.graduatetime).getTime(),r.entrytime=new Date(r.entrytime).getTime(),(c={}).workid=r.workid,r)r.hasOwnProperty(s)&&(c[s]=r[s]);return e.next=12,Q(c);case 12:0===e.sent.status&&(n.setState({data:r,current:l+1}),v.a.success("\u7f16\u8f91\u5458\u5de5\u4fe1\u606f\u6210\u529f\uff01"));case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.onTabChange=function(e){n.setState({key:e})},n.getDateTime=function(e){var t=new Date(e),a=t.getMonth()+1;return t.getFullYear()+"-"+a+"-"+t.getDate()},n.getMonthTime=function(e){var t=new Date(e),a=t.getMonth()+1;return t.getFullYear()+"-"+a},n.state={current:0,value1:{},data:{},key:"tab1"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:10}},a=this.props.location.state.data,n={tab1:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(f.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.identity)),l.a.createElement(f.a.Item,{label:"\u6027\u522b"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.gender?"\u5973":"\u7537")),l.a.createElement(f.a.Item,{label:"\u5e74\u9f84"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.age,"\u5c81")),l.a.createElement(f.a.Item,{label:"\u6c11\u65cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.nation)),l.a.createElement(f.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.birthday))),l.a.createElement(f.a.Item,{label:"\u7c4d\u8d2f"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.origin)),l.a.createElement(f.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.marriage?"\u672a\u5a5a":"\u5df2\u5a5a")),l.a.createElement(f.a.Item,{label:"\u5b66\u5386"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.degree)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.institution)),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getMonthTime(this.state.data.graduatetime)))),tab2:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px",textIndent:"20px"}}),l.a.createElement(f.a.Item,{label:"\u5de5\u53f7"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.workid)),l.a.createElement(f.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getDateTime(this.state.data.entrytime))),l.a.createElement(f.a.Item,{label:"\u90e8\u95e8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.department)),l.a.createElement(f.a.Item,{label:"\u804c\u8d23"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.duty)),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},l.a.createElement("span",{className:"ant-form-text"},0===this.state.data.level?"\u521d\u7ea7":1===this.state.data.level?"\u4e2d\u7ea7":"\u9ad8\u7ea7")),l.a.createElement(f.a.Item,{label:"Tel"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.tel)),l.a.createElement(f.a.Item,{label:"\u4f4f\u5740"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.address)),l.a.createElement(f.a.Item,{label:"\u6708\u85aa"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.salary," \u5143")),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0")),l.a.createElement(f.a.Item,{label:"\u7167\u7247"},l.a.createElement("span",{style:{width:"320px",marginLeft:"20px"}},this.state.data.profile?l.a.createElement("img",{src:"/upload/"+this.state.data.profile,alt:"\u5458\u5de5\u7167\u7247",style:{width:"100px",height:"100px",padding:"7px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}}):l.a.createElement("span",null,"\u65e0"))))},r=[{title:"\u586b\u5199\u57fa\u672c\u4fe1\u606f",content:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}],initialValue:a.name})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f1a\u5458\u59d3\u540d"}))),l.a.createElement(f.a.Item,{label:"\u8eab\u4efd\u8bc1\u53f7"},this.props.form.getFieldDecorator("identity",{rules:[{required:!0}],initialValue:a.identity})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\u7801"}))),l.a.createElement(f.a.Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:a.gender,rules:[{required:!0}]})(l.a.createElement(yt.a.Group,null,l.a.createElement(yt.a,{value:1,style:{margin:"0 20px"}},"\u7537"),l.a.createElement(yt.a,{value:0},"\u5973")))),l.a.createElement(f.a.Item,{label:"\u5e74\u9f84"},this.props.form.getFieldDecorator("age",{rules:[{required:!0}],initialValue:a.age})(l.a.createElement(Ve.a,{style:{width:"150px"}})),l.a.createElement("span",{className:"ant-form-text"},"\u5c81")),l.a.createElement(f.a.Item,{label:"\u6c11\u65cf"},this.props.form.getFieldDecorator("nation",{rules:[{required:!0}],initialValue:a.nation})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u6c11\u65cf"}))),l.a.createElement(f.a.Item,{label:"\u51fa\u751f\u65e5\u671f"},this.props.form.getFieldDecorator("birthday",{rules:[{required:!0}],initialValue:Pe()(new Date(a.birthday),"YYYYMMDD")})(l.a.createElement(mt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(f.a.Item,{label:"\u7c4d\u8d2f"},this.props.form.getFieldDecorator("origin",{rules:[{required:!0}],initialValue:a.origin})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7c4d\u8d2f"}))),l.a.createElement(f.a.Item,{label:"\u5a5a\u59fb\u72b6\u51b5"},this.props.form.getFieldDecorator("marriage",{rules:[{required:!0}],initialValue:a.marriage})(l.a.createElement(yt.a.Group,null,l.a.createElement(yt.a,{value:0,style:{margin:"0 20px"}},"\u672a\u5a5a"),l.a.createElement(yt.a,{value:1},"\u5df2\u5a5a")))),l.a.createElement(f.a.Item,{label:"\u5b66\u5386"},this.props.form.getFieldDecorator("degree",{rules:[{required:!0}],initialValue:a.degree})(l.a.createElement(Ke.a,{placeholder:"\u8bf7\u9009\u62e9\u5b66\u5386",style:{width:"187px"}},l.a.createElement(Ke.a.Option,{value:"\u535a\u58eb"},"\u535a\u58eb"),l.a.createElement(Ke.a.Option,{value:"\u7855\u58eb"},"\u7855\u58eb"),l.a.createElement(Ke.a.Option,{value:"\u672c\u79d1"},"\u672c\u79d1"),l.a.createElement(Ke.a.Option,{value:"\u9ad8\u4e2d"},"\u9ad8\u4e2d"),l.a.createElement(Ke.a.Option,{value:"\u521d\u4e2d"},"\u521d\u4e2d"),l.a.createElement(Ke.a.Option,{value:"\u5c0f\u5b66"},"\u5c0f\u5b66")))),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u9662\u6821"},this.props.form.getFieldDecorator("institution",{rules:[{required:!0}],initialValue:a.institution})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u6bd5\u4e1a\u9662\u6821"}))),l.a.createElement(f.a.Item,{label:"\u6bd5\u4e1a\u65f6\u95f4"},this.props.form.getFieldDecorator("graduatetime",{rules:[{required:!0}],initialValue:Pe()(new Date(a.graduatetime),"YYYYMMDD")})(l.a.createElement(mt.a.MonthPicker,{format:"YYYY/MM"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{type:"primary",style:{margin:"50px 0 0 450px"},onClick:function(){return e.handleNext(0)}},"\u4e0b\u4e00\u6b65")))},{title:"\u586b\u5199\u5de5\u4f5c\u4fe1\u606f",content:l.a.createElement(f.a,Object.assign({},t,{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u5de5\u53f7"},this.props.form.getFieldDecorator("workid",{rules:[{required:!0}],initialValue:a.workid})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u53f7",disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u5165\u804c\u65f6\u95f4"},this.props.form.getFieldDecorator("entrytime",{rules:[{required:!0}],initialValue:Pe()(new Date(a.entrytime),"YYYY/MM/DD")})(l.a.createElement(mt.a,{format:"YYYY/MM/DD"}))),l.a.createElement(f.a.Item,{label:"\u90e8\u95e8"},this.props.form.getFieldDecorator("department",{rules:[{required:!0}],initialValue:a.department})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u90e8\u95e8"}))),l.a.createElement(f.a.Item,{label:"\u804c\u8d23"},this.props.form.getFieldDecorator("duty",{rules:[{required:!0}],initialValue:a.duty})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u804c\u8d23"}))),l.a.createElement(f.a.Item,{label:"\u7b49\u7ea7"},this.props.form.getFieldDecorator("level",{rules:[{required:!0}],initialValue:a.level})(l.a.createElement(yt.a.Group,{buttonStyle:"solid"},l.a.createElement(yt.a.Button,{value:0},"\u521d \u7ea7"),l.a.createElement(yt.a.Button,{value:1},"\u4e2d \u7ea7"),l.a.createElement(yt.a.Button,{value:2},"\u9ad8 \u7ea7")))),l.a.createElement(f.a.Item,{label:"Tel"},this.props.form.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:a.tel})(l.a.createElement(E.a,{addonBefore:"+86",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}))),l.a.createElement(f.a.Item,{label:"\u4f4f\u5740"},this.props.form.getFieldDecorator("address",{rules:[{required:!0}],initialValue:a.address})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u4f4f\u5740"}))),l.a.createElement(f.a.Item,{label:"\u6708\u85aa"},this.props.form.getFieldDecorator("salary",{rules:[{required:!0}],initialValue:a.salary})(l.a.createElement(E.a,{addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u6708\u85aa"}))),l.a.createElement(f.a.Item,{label:"\u7167\u7247"},this.props.form.getFieldDecorator("profile",{rules:[{required:!0}],initialValue:a.profile})(l.a.createElement(rt,{imgs:a.profile}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:a.note})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(E.a.Group,{style:{marginLeft:"410px"}},l.a.createElement(h.a,{type:"primary",style:{marginRight:"50px"},onClick:function(){return e.handlePrevious()}},"\u4e0a\u4e00\u6b65"),l.a.createElement(h.a,{type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u786e\u8ba4\u63d0\u4ea4"))))},{title:"\u63d0\u4ea4\u6210\u529f",content:l.a.createElement(Ae.a,{style:{width:"80%",margin:"20px auto"},tabList:[{key:"tab1",tab:"\u57fa\u672c\u4fe1\u606f"},{key:"tab2",tab:"\u5de5\u4f5c\u4fe1\u606f"}],activeTabKey:this.state.key,onTabChange:function(t){e.onTabChange(t)}},n[this.state.key])}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u5458\u5de5\u5217\u8868","\u7f16\u8f91\u5458\u5de5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5458\u5de5\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(wt.a,{current:this.state.current,style:{margin:"40px auto",width:"550px"}},r.map((function(e,t){return l.a.createElement(wt.a.Step,{key:t,title:e.title})}))),l.a.createElement("div",{className:"steps-content"},r[this.state.current].content)))}}]),a}(l.a.Component)),Ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:a=e.sent,0===t.status&&0===a.status&&(r=t.data.map((function(e,n){var r=[];e.index=n,t.data.forEach((function(t){e.creater===t.id&&(e.createrRole=t.name)})),a.data.forEach((function(t){e.creater===t.id&&(e.createrName=t.username),e.id===t.role&&r.push(t.username)})),e.roleUser=r;var l=[{title:"\u8ba2\u5355\u7ba1\u7406",display:0,children:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{title:"\u5546\u54c1\u7ba1\u7406",display:0,children:[{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{title:"\u5e93\u5b58\u7ba1\u7406",display:0,children:[{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{title:"\u4f1a\u5458\u7ba1\u7406",display:0,children:[{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{title:"\u4eba\u4e8b\u7ba1\u7406",display:0,children:[{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];return e.permission.split("-").forEach((function(e){switch(e){case"\u5168\u90e8\u8ba2\u5355":l[0].display=1,l[0].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":l[0].display=1,l[0].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":l[1].display=1,l[1].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":l[1].display=1,l[1].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":l[1].display=1,l[1].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":l[2].display=1,l[2].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":l[2].display=1,l[2].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":l[3].display=1,l[3].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":l[3].display=1,l[3].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":l[4].display=1,l[4].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":l[4].display=1,l[4].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":l[4].display=1,l[4].children[2].display=1}})),e.permission=l,e})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:r})}),300));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u89d2\u8272"'+e.name+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/role/delete",{id:e.id},"GET");case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.id===e.id?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleView=function(e){n.setState({viewVisible:!0,role:e})},n.handleAdd=function(){n.props.history.push("/employee/role/add")},n.handleEdit=function(e){n.props.history.push({pathname:"/employee/role/edit",state:{data:e}})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={isLoading:!0,data:[],viewVisible:!1,role:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",key:"son",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"}),"\xa0",e.getTimeForm(t))},sorter:function(e,t){return t.createtime-e.createtime}},{title:"\u521b\u5efa\u4eba",dataIndex:"createrName",key:"createrName",render:function(e,t){return l.a.createElement("span",null,e," ",l.a.createElement(tt.a,{color:"green"},t.createrRole))}},{title:"\u89d2\u8272\u7528\u6237",dataIndex:"roleUser",key:"roleUser",render:function(e){return l.a.createElement("span",null,0!==e.length?e.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("span",null,e))})):"/")}},{title:"\u5907\u6ce8",dataIndex:"note",key:"note",render:function(e){return l.a.createElement("span",null,e||"/")}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u89d2\u8272")),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}),l.a.createElement(Ye.a,{title:l.a.createElement("span",null,"\u89d2\u8272\u6743\u9650-",this.state.role.name),visible:this.state.viewVisible,onCancel:function(){e.setState({viewVisible:!1})},footer:[l.a.createElement(h.a,{type:"primary",key:"view-ok",onClick:function(){return e.setState({viewVisible:!1})}},"\u786e\u8ba4")]},l.a.createElement("div",{style:{marginLeft:"100px"}},this.state.role.permission?this.state.role.permission.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(g.a,{type:"caret-down",style:{color:"#1DA57A"}}),e.title),e.children.map((function(e,t){return 1===e.display?l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(g.a,{type:"check",style:{color:"#1DA57A"}}),"\xa0",e.title):l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(g.a,{type:"close",style:{color:"#fa7f3e"}}),"\xa0",e.title)})))})):null)))}}]),a}(l.a.Component),St=f.a.create({name:"role-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=12;break}return r=[],n.state.data.forEach((function(e){1===e.display?r.push(e.title):r.push()})),(l=a).createtime=new Date(l.createtime).getTime(),l.creater=pe.user.id,l.permission=r.join("-"),l.deleted=0,e.next=10,me(l);case 10:0===e.sent.status&&(v.a.success("\u65b0\u589e\u89d2\u8272\u6210\u529f, \u5373\u5c06\u8fd4\u56de\u89d2\u8272\u7ba1\u7406\u5217\u8868"),n.timerID=setTimeout((function(){n.props.history.push("/employee/role")}),2e3));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.handleChange=function(e,t){var a=n.state.data;"object"===typeof t?e.target.checked?t.forEach((function(e){a[e].display=1})):t.forEach((function(e){a[e].display=0})):a[t].display=1-a[t].display,n.setState({data:a})},n.getTimeForm=function(){var e=new Date,t=e.getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={data:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0},{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0},{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0},{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0},{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406","\u65b0\u589e\u89d2\u8272"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u89d2\u8272\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee/role")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u521b\u5efa\u65f6\u95f4\uff1a"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTimeForm()})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u521b\u5efa\u4eba\uff1a"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:pe.user.username})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u89d2\u8272\u540d\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}]})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u6743\u9650\uff1a"},t.getFieldDecorator("permission",{initialValue:"perimission",rules:[{required:!0}]})(l.a.createElement(E.a,{style:{display:"none"}}))),l.a.createElement("div",{style:{margin:"-53px 0 40px 340px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[0,1])}},"\u8ba2\u5355\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,0)},checked:1===this.state.data[0].display},"\u5168\u90e8\u8ba2\u5355"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,1)},checked:1===this.state.data[1].display,style:{marginBottom:"10px"}},"\u524d\u53f0\u8ba2\u5355"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[2,3,4])}},"\u5546\u54c1\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,2)},checked:1===this.state.data[2].display},"\u5546\u54c1\u5206\u7c7b"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,3)},checked:1===this.state.data[3].display},"\u5546\u54c1\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,4)},checked:1===this.state.data[4].display,style:{marginBottom:"10px"}},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[5,6])}},"\u5e93\u5b58\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,5)},checked:1===this.state.data[5].display},"\u5e93\u5b58\u4fe1\u606f"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,6)},checked:1===this.state.data[6].display},"\u5e93\u5b58\u76d8\u70b9"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[7,8])}},"\u4f1a\u5458\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,7)},checked:1===this.state.data[7].display},"\u4f1a\u5458\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,8)},checked:1===this.state.data[8].display},"\u65b0\u589e\u4f1a\u5458"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[9,10,11])}},"\u4eba\u4e8b\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,9)},checked:1===this.state.data[9].display},"\u5458\u5de5\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,10)},checked:1===this.state.data[10].display},"\u7528\u6237\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,11)},checked:1===this.state.data[11].display,style:{marginBottom:"10px"}},"\u89d2\u8272\u7ba1\u7406"),l.a.createElement("br",null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Tt=f.a.create({name:"role-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=function(){var e=n.props.location.state.data,t=[];e.permission.forEach((function(e){t=t.concat(e.children)})),e.permission=t,n.setState({data:e.permission})},n.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=11;break}return r=[],n.state.data.forEach((function(e){1===e.display?r.push(e.title):r.push()})),(l=a).permission=r.join("-"),l.creater=n.props.location.state.data.creater,l.createtime=new Date(l.createtime).getTime(),e.next=9,de(l);case 9:0===e.sent.status&&(v.a.success("\u7f16\u8f91\u89d2\u8272\u6210\u529f, \u5373\u5c06\u8fd4\u56de\u89d2\u8272\u7ba1\u7406\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push("/employee/role")}),2e3));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.handleChange=function(e,t){var a=n.state.data;"object"===typeof t?e.target.checked?t.forEach((function(e){a[e].display=1})):t.forEach((function(e){a[e].display=0})):a[t].display=1-a[t].display,n.setState({data:a})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.getFatherChecked=function(e){var t=!0;return e.forEach((function(e){0===n.state.data[e].display&&(t=!1)})),t},n.state={data:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form,a=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u89d2\u8272\u7ba1\u7406","\u7f16\u8f91\u89d2\u8272"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u89d2\u8272\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee/role")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"ID\uff1a",style:{display:"none"}},t.getFieldDecorator("id",{initialValue:a.id})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u521b\u5efa\u65f6\u95f4\uff1a"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTimeForm(a.createtime)})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u521b\u5efa\u4eba\uff1a"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:a.createrName})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u89d2\u8272\u540d\uff1a"},t.getFieldDecorator("name",{rules:[{required:!0,validator:this.validateName}],initialValue:a.name})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u6743\u9650\uff1a"},t.getFieldDecorator("permission",{initialValue:"perimission",rules:[{required:!0}]})(l.a.createElement(E.a,{style:{display:"none"}}))),l.a.createElement("div",{style:{margin:"-53px 0 40px 340px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[0,1])},defaultChecked:this.getFatherChecked([0,1])},"\u8ba2\u5355\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,0)},checked:1===this.state.data[0].display},"\u5168\u90e8\u8ba2\u5355"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,1)},checked:1===this.state.data[1].display,style:{marginBottom:"10px"}},"\u524d\u53f0\u8ba2\u5355"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[2,3,4])},defaultChecked:this.getFatherChecked([2,3,4])},"\u5546\u54c1\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,2)},checked:1===this.state.data[2].display},"\u5546\u54c1\u5206\u7c7b"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,3)},checked:1===this.state.data[3].display},"\u5546\u54c1\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,4)},checked:1===this.state.data[4].display,style:{marginBottom:"10px"}},"\u6dfb\u52a0\u5546\u54c1"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[5,6])},defaultChecked:this.getFatherChecked([5,6])},"\u5e93\u5b58\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,5)},checked:1===this.state.data[5].display},"\u5e93\u5b58\u4fe1\u606f"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,6)},checked:1===this.state.data[6].display},"\u5e93\u5b58\u76d8\u70b9"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[7,8])},defaultChecked:this.getFatherChecked([7,8])},"\u4f1a\u5458\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,7)},checked:1===this.state.data[7].display},"\u4f1a\u5458\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,8)},checked:1===this.state.data[8].display},"\u65b0\u589e\u4f1a\u5458"),l.a.createElement("br",null)),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,[9,10,11])},defaultChecked:this.getFatherChecked([9,10,11])},"\u4eba\u4e8b\u7ba1\u7406"),l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,9)},checked:1===this.state.data[9].display},"\u5458\u5de5\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,10)},checked:1===this.state.data[10].display},"\u7528\u6237\u5217\u8868"),l.a.createElement("br",null),l.a.createElement(nt.a,{onChange:function(t){return e.handleChange(t,11)},checked:1===this.state.data[11].display,style:{marginBottom:"10px"}},"\u89d2\u8272\u7ba1\u7406"),l.a.createElement("br",null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:a.note})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Ft=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:a=e.sent,0===t.status&&0===a.status&&(n.setState({isLoading:!0}),n.timerID=setTimeout((function(){var e=t.data.map((function(e,t){return e.index=t,a.data.forEach((function(t){if(e.role===t.id){e.role=t;var a=[{title:"\u8ba2\u5355\u7ba1\u7406",display:0,children:[{title:"\u5168\u90e8\u8ba2\u5355",display:0},{title:"\u524d\u53f0\u7ba1\u7406",display:0}]},{title:"\u5546\u54c1\u7ba1\u7406",display:0,children:[{title:"\u5546\u54c1\u5206\u7c7b",display:0},{title:"\u5546\u54c1\u5217\u8868",display:0},{title:"\u6dfb\u52a0\u5546\u54c1",display:0}]},{title:"\u5e93\u5b58\u7ba1\u7406",display:0,children:[{title:"\u5e93\u5b58\u4fe1\u606f",display:0},{title:"\u5e93\u5b58\u76d8\u70b9",display:0}]},{title:"\u4f1a\u5458\u7ba1\u7406",display:0,children:[{title:"\u4f1a\u5458\u5217\u8868",display:0},{title:"\u65b0\u589e\u4f1a\u5458",display:0}]},{title:"\u4eba\u4e8b\u7ba1\u7406",display:0,children:[{title:"\u5458\u5de5\u5217\u8868",display:0},{title:"\u7528\u6237\u5217\u8868",display:0},{title:"\u89d2\u8272\u7ba1\u7406",display:0}]}];e.role.permission.split("-").forEach((function(e){switch(e){case"\u5168\u90e8\u8ba2\u5355":a[0].display=1,a[0].children[0].display=1;break;case"\u524d\u53f0\u7ba1\u7406":a[0].display=1,a[0].children[1].display=1;break;case"\u5546\u54c1\u5206\u7c7b":a[1].display=1,a[1].children[0].display=1;break;case"\u5546\u54c1\u5217\u8868":a[1].display=1,a[1].children[1].display=1;break;case"\u6dfb\u52a0\u5546\u54c1":a[1].display=1,a[1].children[2].display=1;break;case"\u5e93\u5b58\u4fe1\u606f":a[2].display=1,a[2].children[0].display=1;break;case"\u5e93\u5b58\u76d8\u70b9":a[2].display=1,a[2].children[1].display=1;break;case"\u4f1a\u5458\u5217\u8868":a[3].display=1,a[3].children[0].display=1;break;case"\u65b0\u589e\u4f1a\u5458":a[3].display=1,a[3].children[1].display=1;break;case"\u5458\u5de5\u5217\u8868":a[4].display=1,a[4].children[0].display=1;break;case"\u7528\u6237\u5217\u8868":a[4].display=1,a[4].children[1].display=1;break;case"\u89d2\u8272\u7ba1\u7406":a[4].display=1,a[4].children[2].display=1}})),e.role.permission=a}})),e}));n.setState({isLoading:!1,data:e})}),300));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u7528\u6237"'+e.username+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/user/delete",{id:e.id},"GET");case 2:0===t.sent.status&&(a=[],n.state.data.forEach((function(t){t.id===e.id?a.push():a.push(t)})),n.setState({data:a}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleAdd=function(){n.props.history.push("/employee/user/add")},n.handleEdit=function(e){n.props.history.push({pathname:"/employee/user/edit",state:{data:e}})},n.handleRoleView=function(e){console.log(e),n.setState({visible:!0,role:e})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={isLoading:!0,data:[],visible:!1,role:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t){return l.a.createElement("span",null,t.index+1)}},{title:"\u7528\u6237\u540d\u79f0",dataIndex:"username",key:"username"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",key:"son",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"})," ",e.getTimeForm(t))},sorter:function(e,t){return t.createtime-e.createtime}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role",key:"role",render:function(t){return l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleRoleView(t)}},t.name)}},{title:"\u7535\u8bdd",dataIndex:"tel",key:"tel",render:function(e){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"phone"}),"+86 ",e)}},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u5bc6\u7801",dataIndex:"password",key:"password"},{title:"\u5907\u6ce8",dataIndex:"note",key:"note",render:function(e){return e||"/"}},{title:"\u64cd\u4f5c",key:"action",render:function(t){return l.a.createElement("span",null,l.a.createElement(h.a,{size:"small",onClick:function(){return e.handleEdit(t)}},"\u8bbe\u7f6e"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(t)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"category-container"},l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868"]}),l.a.createElement("div",{style:{margin:"20px 22px 0 20px"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAdd},l.a.createElement(g.a,{type:"plus"}),"\u521b\u5efa\u7528\u6237")),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{style:{margin:"20px"},size:"small",columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}),l.a.createElement(Ye.a,{title:l.a.createElement("span",null,"\u89d2\u8272\u6743\u9650-",this.state.role.name),visible:this.state.visible,onCancel:function(){e.setState({visible:!1})},footer:[l.a.createElement(h.a,{type:"primary",key:"view-ok",onClick:function(){return e.setState({visible:!1})}},"\u786e\u8ba4")]},l.a.createElement("div",{style:{marginLeft:"100px"}},this.state.role.permission?this.state.role.permission.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(g.a,{type:"caret-down",style:{color:"#1DA57A"}}),e.title),e.children.map((function(e,t){return 1===e.display?l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(g.a,{type:"check",style:{color:"#1DA57A"}}),"\xa0",e.title):l.a.createElement("div",{style:{marginLeft:"25px"},key:t},l.a.createElement(g.a,{type:"close",style:{color:"#fa7f3e"}}),"\xa0",e.title)})))})):null)))}}]),a}(l.a.Component),jt=f.a.create({name:"user-add"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:0===(t=e.sent).status&&(a=[],t.data.forEach((function(e){a.push({key:e.id,value:e.name})})),n.setState({options:a}));case 4:case"end":return e.stop()}}),e)}))),n.validateName=function(e,t,a){t?t.length>10?a("\u8bf7\u8f93\u5165\u5c11\u4e8e10\u4e2a\u5b57\u7b26"):a():a("\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0")},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}return(r=a).createtime=(new Date).getTime(),r.deleted=0,console.log(a),e.next=7,ne(r);case 7:0===e.sent.status&&(v.a.success("\u65b0\u589e\u7528\u6237\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u7528\u6237\u5217\u8868\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push("/employee/user")}),2e3));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.state={options:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868","\u521b\u5efa\u7528\u6237"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u7528\u6237\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/employee/user")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u7528\u6237\u540d\uff1a"},t.getFieldDecorator("username",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),l.a.createElement(f.a.Item,{label:"\u5bc6\u7801\uff1a"},t.getFieldDecorator("password",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801"}))),l.a.createElement(f.a.Item,{label:"\u89d2\u8272\uff1a"},t.getFieldDecorator("role",{rules:[{required:!0}]})(l.a.createElement(Ke.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},this.state.options.map((function(e){return l.a.createElement(Ke.a.Option,{key:e.key},e.value)}))))),l.a.createElement(f.a.Item,{label:"Tel\uff1a"},t.getFieldDecorator("tel",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801",addonBefore:"+86"}))),l.a.createElement(f.a.Item,{label:"\u90ae\u7bb1\uff1a"},t.getFieldDecorator("email",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1"}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Nt=f.a.create({name:"user-edit"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:0===(t=e.sent).status&&(a=[],r=n.props.location.state.data,t.data.forEach((function(e){a.push({key:e.id,value:e.name}),r.role===e.id&&(r.rolename=e.name)})),n.setState({options:a,data:r}));case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return(r=a).createtime=(new Date).getTime(),n.state.options.forEach((function(e){e.value===r.role&&(r.role=e.key)})),e.next=6,re(r);case 6:0===e.sent.status&&(v.a.success("\u66f4\u65b0\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u7528\u6237\u5217\u8868"),n.timerID=setTimeout((function(){n.props.history.push("/employee/user")}),1500));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.state={data:{},options:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u4eba\u4e8b\u7ba1\u7406","\u7528\u6237\u5217\u8868","\u7f16\u8f91\u7528\u6237"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u7528\u6237\u4fe1\u606f"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/user")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"ID\uff1a",style:{display:"none"}},t.getFieldDecorator("id",{rules:[{required:!0}],initialValue:this.state.data.id})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u7528\u6237\u540d\uff1a"},t.getFieldDecorator("username",{rules:[{required:!0}],initialValue:this.state.data.username})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u5bc6\u7801\uff1a"},t.getFieldDecorator("password",{rules:[{required:!0}],initialValue:this.state.data.password})(l.a.createElement(E.a,null))),l.a.createElement(f.a.Item,{label:"\u89d2\u8272\uff1a"},t.getFieldDecorator("role",{rules:[{required:!0}],initialValue:this.state.data.rolename})(l.a.createElement(Ke.a,null,this.state.options.map((function(e){return l.a.createElement(Ke.a.Option,{key:e.key},e.value)}))))),l.a.createElement(f.a.Item,{label:"Tel\uff1a"},t.getFieldDecorator("tel",{rules:[{required:!0}],initialValue:this.state.data.tel})(l.a.createElement(E.a,{addonBefore:"+86"}))),l.a.createElement(f.a.Item,{label:"\u90ae\u7bb1\uff1a"},t.getFieldDecorator("email",{rules:[{required:!0}],initialValue:this.state.data.email})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1"}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8\uff1a"},t.getFieldDecorator("note",{initialValue:this.state.data.note})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),At=a(172),Mt=(a(1088),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,n.refreshTable(t,0);case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return r=e.sent,e.next=5,P();case 5:l=e.sent,0===t.status&&0===r.status&&0===l.status&&(i=t.data.map((function(e){e.state=e.amount>e.excess?2:e.amount<e.warning?0:1,e.log=[],r.data.forEach((function(t){t.stockid===e.id&&e.log.push(t)})),e.manager=e.log[e.log.length-1].manager;var t=e.log[e.log.length-1].time;return e.latestTime=new Date(t),e.pictures=e.pictures.split(","),e})),c=[],s=[],l.data.forEach((function(e){c.push({text:e.category,value:e.category}),s.push({label:e.category,value:e.category})})),0===a?(n.setState({category:c,options:s,isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:i})}),300)):n.setState({category:c,options:s,data:i}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleDelete=function(e){Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u5e93\u5b58\u8bb0\u5f55"'+e.name+'"\u5417',okText:"\u786e\u8ba4",onOk:function(){var t=Object(x.a)(b.a.mark((function t(){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("/stock/delete",{id:e.id},"GET");case 2:if(0!==t.sent.status){t.next=24;break}return(a=Object(At.a)({},e)).stockid=a.id,a.stockname=a.name,a.manager=pe.user.username,a.time=(new Date).getTime(),a.operation="\u5220\u9664",a.pictures=a.pictures.join(","),delete a.state,delete a.log,delete a.name,delete a.id,delete a.latestTime,t.next=18,_(a);case 18:if(0!==t.sent.status){t.next=24;break}return t.next=22,q();case 22:r=t.sent,n.refreshTable(r,1);case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleEdit=function(e){n.props.history.push({pathname:"/stock/edit",state:{data:e}})},n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=6;break}return e.next=3,q();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,W(t);case 8:e.t0=e.sent;case 9:a=e.t0,n.refreshTable(a,0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleView=function(e){n.props.history.push({pathname:"/stock/view",state:{data:e}})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={isLoading:!0,data:[],category:[],options:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u7f16\u53f7",key:"index",render:function(e,t,a){return l.a.createElement("span",null,a+1)}},{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,a){return l.a.createElement("span",null,l.a.createElement(h.a,{type:"link",onClick:function(){return e.handleView(a)}},t,a.amount<a.warning?l.a.createElement(tt.a,{size:"small",color:"red"},"\u544a\u7f44"):null,a.amount>a.excess?l.a.createElement(tt.a,{size:"small",color:"green"},"\u8fc7\u5269"):null))}},{title:"\u7c7b\u578b",dataIndex:"category",key:"category",filters:this.state.category,onFilter:function(e,t){return e===t.category}},{title:"\u5355\u4ef7",dataIndex:"price",key:"price",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.price-t.price}},{title:"\u5e93\u5b58\u91cf",dataIndex:"amount",key:"amount",sorter:function(e,t){return e.amount-t.amount},filters:[{text:"\u6b63\u5e38",value:0},{text:"\u544a\u7f44",value:1},{text:"\u8fc7\u5269",value:2}],onFilter:function(e,t){return e===t.state}},{title:"\u5355\u4f4d",dataIndex:"unit",key:"unit"},{title:"\u6700\u8fd1\u66f4\u65b0",dataIndex:"latestTime",key:"latestTime",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"})," ",e.getTimeForm(t))},sorter:function(e,t){return e.latestTime-t.latestTime}},{title:"\u64cd\u4f5c\u4eba",dataIndex:"manager",key:"manager"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return l.a.createElement("div",null,l.a.createElement(h.a,{size:"small",type:"primary",onClick:function(){e.handleEdit(a)}},"\u7f16\u8f91"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){e.handleDelete(a)}},"\u5220\u9664"))}}];return l.a.createElement("div",{className:"stock-container"},l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f"]}),l.a.createElement("div",{className:"stock-header"},l.a.createElement(h.a,{type:"primary",style:{marginRight:"40px"},onClick:function(){e.props.history.push("/stock/add")}},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u589e\u5e93\u5b58"),l.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/stock/log")}},"\u4ed3\u5e93\u65e5\u5fd7"),l.a.createElement(E.a.Search,{style:{width:"200px",float:"Right"},placeholder:"\u67e5\u8be2\u5e93\u5b58\u540d\u79f0",onSearch:function(t){return e.handleSearch(t)},enterButton:!0})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.data,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component)),Vt=f.a.create({name:"add-stock-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:0===(t=e.sent).status&&(a=[],t.data.forEach((function(e){a.push(e.category)})),n.setState({category:a}));case 4:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=17;break}return r=a,e.next=4,z(r);case 4:if(0!==(l=e.sent).status){e.next=17;break}return(i=Object(At.a)({},r)).stockname=i.name,i.manager=pe.user.username,i.operation="\u65b0\u589e",i.time=(new Date).getTime(),i.stockid=l.data.insertId,delete i.name,e.next=15,_(i);case 15:0===e.sent.status&&(v.a.success("\u65b0\u589e\u5e93\u5b58\u4fe1\u606f\u6210\u529f\uff0c\u5373\u5c06\u8fd4\u56de\u5e93\u5b58\u5217\u8868\u9875\u9762",2),n.timerID=setTimeout((function(){n.props.history.push("/stock")}),2e3));case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.handleAddClick=function(){n.setState({visible:!0})},n.handleNameChange=function(e){n.setState({categoryAdd:e.target.value})},n.onOk=function(){var e=n.state.category;e.push(n.state.categoryAdd),n.setState({category:e,visible:!1})},n.onCancel=function(){n.setState({visible:!1})},n.state={category:[],categoryAdd:"",visible:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u65b0\u589e\u5e93\u5b58"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u589e\u5e93\u5b58\u8bb0\u5f55"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},this.props.form.getFieldDecorator("name",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"}))),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},this.props.form.getFieldDecorator("category",{rules:[{required:!0}]})(l.a.createElement(Ke.a,{style:{width:"75%"},placeholder:"\u8bf7\u9009\u62e9\u8d27\u7269\u54c1\u7c7b"},this.state.category.map((function(e){return l.a.createElement(Ke.a.Option,{key:e},e)})))),l.a.createElement("div",{style:{display:"inline-block",float:"right"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAddClick},"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(Ye.a,{title:"\u65b0\u589e\u54c1\u7c7b",visible:this.state.visible,okText:"\u786e\u8ba4",onOk:this.onOk,cancelText:"\u53d6\u6d88",onCancel:this.onCancel},l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0",onChange:this.handleNameChange})))),l.a.createElement(f.a.Item,{label:"\u5355\u4ef7"},this.props.form.getFieldDecorator("price",{rules:[{required:!0}]})(l.a.createElement(Ve.a,null)),l.a.createElement("span",{style:{marginLeft:"10px"}},"\u5143")),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},this.props.form.getFieldDecorator("amount",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u6570\u91cf"}))),l.a.createElement(f.a.Item,{label:"\u5355\u4f4d"},this.props.form.getFieldDecorator("unit",{rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u5355\u4f4d"}))),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement(E.a.Group,{compact:!0},l.a.createElement(f.a.Item,null,this.props.form.getFieldDecorator("warning",{rules:[{required:!0}]})(l.a.createElement(Ve.a,{placeholder:"\u4e0b\u9650"}))),l.a.createElement("span",{style:{margin:"8px 20px 0 20px"}},"~"),l.a.createElement(f.a.Item,null,this.props.form.getFieldDecorator("excess",{rules:[{required:!0}]})(l.a.createElement(Ve.a,{placeholder:"\u4e0a\u9650"}))))),l.a.createElement(f.a.Item,{label:"\u56fe\u7247"},this.props.form.getFieldDecorator("pictures",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5546\u54c1\u56fe\u7247"}]})(l.a.createElement(rt,null))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Yt=(a(471),a(174)),Lt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onTabChange=function(e){n.setState({key:e})},n.content=function(e){return e?l.a.createElement("div",null,l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:7,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u540d\u79f0\uff1a")),l.a.createElement(et.a,{span:5},l.a.createElement(f.a.Item,null,e.stockname)),l.a.createElement(et.a,{span:4,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u79cd\u7c7b\uff1a")),l.a.createElement(et.a,{span:8},l.a.createElement(f.a.Item,null,e.category))),l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:7,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u6570\u91cf\uff1a")),l.a.createElement(et.a,{span:5},l.a.createElement(f.a.Item,null,e.amount)),l.a.createElement(et.a,{span:4,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u5355\u4f4d\uff1a")),l.a.createElement(et.a,{span:8},l.a.createElement(f.a.Item,null,e.unit))),l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:7,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u72b6\u6001\uff1a")),l.a.createElement(et.a,{span:5},l.a.createElement(f.a.Item,null,e.amout>e.excess?l.a.createElement(tt.a,{size:"small",color:"blue"},"\u8fc7\u5269"):e.state<e.warning?l.a.createElement(tt.a,{size:"small",color:"red"},"\u544a\u7f44"):l.a.createElement(tt.a,{size:"small",color:"green"},"\u6b63\u5e38"))),l.a.createElement(et.a,{span:4,style:{textAlign:"right"}},l.a.createElement(f.a.Item,null,"\u76d1\u63a7\uff1a")),l.a.createElement(et.a,{span:8},l.a.createElement(f.a.Item,null,"\u4e0b\u9650:",e.warning,"\xa0\xa0 \u4e0a\u9650:",e.excess))),l.a.createElement(Qe.a,null,l.a.createElement(et.a,{span:7},l.a.createElement(f.a.Item,{style:{textAlign:"right"}},"\u56fe\u7247\uff1a")),l.a.createElement(et.a,{span:17},String(e.pictures).split(",").map((function(e,t){return""===e?null:l.a.createElement("img",{key:t,src:"http://localhost:3001/upload/"+e,alt:"\u8d27\u7269\u56fe\u7247",style:{width:"80px",height:"80px",padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid lightgray"}})})))),l.a.createElement(Qe.a,{style:{marginTop:"10px"}},l.a.createElement(et.a,{span:7},l.a.createElement(f.a.Item,{style:{textAlign:"right"}},"\u5907\u6ce8\uff1a")),l.a.createElement(et.a,{span:17},l.a.createElement(f.a.Item,null,e.note?e.note:"\u65e0")))):null},n.state={key:"tab1"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t={tab1:this.content(this.props.info.before),tab2:this.content(this.props.info)};return l.a.createElement(Ye.a,{visible:this.props.visible,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:this.props.onOk,onCancel:this.props.onCancel,footer:null},0===Object.getOwnPropertyNames(this.props.info).length?null:this.props.info.hasOwnProperty("before")?l.a.createElement(Ae.a,{style:{width:"100%",border:"none"},tabList:[{key:"tab1",tab:"\u4fee\u6539\u524d"},{key:"tab2",tab:"\u4fee\u6539\u540e"}],activeTabKey:this.state.key,onTabChange:function(t){return e.onTabChange(t)}},t[this.state.key]):l.a.createElement(Ae.a,{style:{width:"100%",border:"none"},title:l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"10px"}},this.props.info.operation,"\u8bb0\u5f55")},this.content(this.props.info)))}}]),a}(l.a.Component),qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:0===(t=e.sent).status&&(a=(a=t.data.reverse()).map((function(e){if("\u4fee\u6539"===e.operation){var t=a.filter((function(t){return e.time>t.time&&e.stockid===t.stockid&&"\u4fee\u6539"===e.operation}));0===t.length?e.before=a.find((function(t){return t.stockid===e.stockid&&"\u65b0\u589e"===t.operation})):(t=t.sort((function(e,t){return e.time-t.time})),e.before=t.pop())}return e})),n.setState({data:a,log:a}));case 4:case"end":return e.stop()}}),e)}))),n.handleSelectChange=function(e){0===e&&n.setState({log:n.state.data}),n.setState({option:e})},n.getTimePicker=function(){return 1===n.state.option?l.a.createElement(mt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:n.handleDatePickerChange}):2===n.state.option?l.a.createElement(mt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:n.handleWeekPickerChange,format:"YYYY-WW"}):3===n.state.option?l.a.createElement(mt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:n.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(mt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:n.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},n.handleDatePickerChange=function(e,t){var a=new Date(t+" 00:00:00").getTime(),r=new Date(t+" 23:59:59").getTime(),l=n.state.data.filter((function(e){return e.time>=a&&e.time<=r}));n.setState({log:l})},n.handleWeekPickerChange=function(e){var t=Pe()(e).day(0).format("YYYY/MM/DD")+" 00:00:00",a=Pe()(e).day(6).format("YYYY/MM/DD")+" 23:59:59";t=new Date(t).getTime(),a=new Date(a).getTime();var r=n.state.data.filter((function(e){return e.time>t&&e.time<=a}));n.setState({log:r})},n.handleMonthPickerChange=function(e){var t=Pe()(e).startOf("month").format("YYYY-MM-DD")+" 23:59:59",a=Pe()(e).endOf("month").format("YYYY-MM-DD")+" 23:59:59";t=new Date(t).getTime(),a=new Date(a).getTime();var r=n.state.data.filter((function(e){return e.time>=t&&e.time<=a}));n.setState({log:r})},n.handleRangePickerChange=function(e,t){var a=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=n.state.data.filter((function(e){return e.time>=a&&e.time<=r}));n.setState({log:l})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.handleDetail=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n.setState({visible:!0,logInfo:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onOk=function(){n.setState({visible:!1,logInfo:{}})},n.state={data:[],log:[],option:0,visible:!1,logInfo:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{style:{textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(Ke.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",margin:"0 20px 0 10px"}},l.a.createElement(Ke.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4")));return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u5e93\u5b58\u65e5\u5fd7"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u5e93\u5b58\u65e5\u5fd7"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{border:"none",width:"100%"}},l.a.createElement(Yt.a,{style:{margin:"20px 170px"},size:"small",header:t,dataSource:this.state.log,pagination:{pageSize:10},renderItem:function(t){return l.a.createElement(Yt.a.Item,null,l.a.createElement("span",{style:{fontWeight:"bolder",marginLeft:"10px"}},e.getTimeForm(t.time)),l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"20px",width:"60px"}},t.manager),l.a.createElement("span",null,"\u5bf9"),l.a.createElement("span",{style:{margin:"0 20px",width:"80px"}},"\u201c",l.a.createElement("span",{style:{color:"#1DA57A"}},t.before?t.before.stockname:t.stockname),"\u201d"),l.a.createElement("span",null,"\u7684\u5e93\u5b58\u4fe1\u606f\u8fdb\u884c\u4e86"),l.a.createElement("span",{style:"\u5220\u9664"===t.operation?{color:"red"}:{color:"#1DA57A"}},t.operation),l.a.createElement(h.a,{type:"primary",size:"small",style:{marginLeft:"30px"},onClick:function(){return e.handleDetail(t)}},"\u8be6\u60c5"))},bordered:!0}),l.a.createElement(Lt,{visible:this.state.visible,info:this.state.logInfo,onCancel:this.onOk,onOk:this.onOk})))}}]),a}(l.a.Component),Pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=function(){var e=n.props.location.state.data,t=e.log.reverse();t=t.map((function(e){if("\u4fee\u6539"===e.operation){var a=t.filter((function(t){return e.time>t.time&&e.stockid===t.stockid&&"\u4fee\u6539"===e.operation}));0===a.length?e.before=t.find((function(t){return t.stockid===e.stockid&&"\u65b0\u589e"===t.operation})):(a=a.sort((function(e,t){return e.time-t.time})),e.before=a.pop())}return e})),n.setState({data:e,log:t})},n.handleSelectChange=function(e){0===e&&n.setState({log:n.state.data.log}),n.setState({option:e})},n.getTimePicker=function(){return 1===n.state.option?l.a.createElement(mt.a,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:n.handleDatePickerChange}):2===n.state.option?l.a.createElement(mt.a.WeekPicker,{placeholder:"\u8bf7\u9009\u62e9\u5468\u6b21",onChange:n.handleWeekPickerChange,format:"YYYY-WW"}):3===n.state.option?l.a.createElement(mt.a.MonthPicker,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",onChange:n.handleMonthPickerChange,format:"YYYY-MM"}):l.a.createElement(mt.a.RangePicker,{placeholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],onChange:n.handleRangePickerChange,style:{width:"220px",textAlign:"left"}})},n.handleDatePickerChange=function(e,t){var a=new Date(t+" 00:00:00").getTime(),r=new Date(t+" 23:59:59").getTime(),l=n.state.data.log.filter((function(e){return e.time>=a&&e.time<=r}));n.setState({log:l})},n.handleWeekPickerChange=function(e){var t=Pe()(e).day(0).format("YYYY/MM/DD")+" 00:00:00",a=Pe()(e).day(6).format("YYYY/MM/DD")+" 23:59:59";t=new Date(t).getTime(),a=new Date(a).getTime();var r=n.state.data.log.filter((function(e){return e.time>t&&e.time<=a}));n.setState({log:r})},n.handleMonthPickerChange=function(e){var t=Pe()(e).startOf("month").format("YYYY-MM-DD")+" 23:59:59",a=Pe()(e).endOf("month").format("YYYY-MM-DD")+" 23:59:59";t=new Date(t).getTime(),a=new Date(a).getTime();var r=n.state.data.log.filter((function(e){return e.time>=t&&e.time<=a}));n.setState({log:r})},n.handleRangePickerChange=function(e,t){var a=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=n.state.data.log.filter((function(e){return e.time>=a&&e.time<=r}));n.setState({log:l})},n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.handleDetail=function(e){n.setState({visible:!0,logInfo:e})},n.onOk=function(){n.setState({visible:!1})},n.state={data:[],log:[],option:0,visible:!1,logInfo:{}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{style:{textAlign:"right"}},0===this.state.option?null:this.getTimePicker(),l.a.createElement(Ke.a,{defaultValue:"\u6309\u987a\u5e8f\u67e5\u770b",onChange:function(t){return e.handleSelectChange(t)},style:{width:"115px",margin:"0 20px 0 10px"}},l.a.createElement(Ke.a.Option,{value:0},"\u6309\u987a\u5e8f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:1},"\u6309\u65e5\u671f\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:2},"\u6309\u5468\u6b21\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:3},"\u6309\u6708\u4efd\u67e5\u770b"),l.a.createElement(Ke.a.Option,{value:4},"\u81ea\u5b9a\u4e49\u533a\u95f4")));return l.a.createElement("div",{className:"stock-view-container"},l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u8d27\u7269\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u8d27\u7269\u8be6\u60c5"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"}}),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.name)),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.category)),l.a.createElement(f.a.Item,{label:"\u5355\u4ef7"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",this.state.data.price.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.amount)),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u5355\u4f4d"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.unit)),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u72b6\u6001"},l.a.createElement("span",{style:{marginLeft:"20px"}},0===this.state.data.state?l.a.createElement(tt.a,{size:"small",color:"blue"},"\u6b63\u5e38"):1===this.state.data.state?l.a.createElement(tt.a,{size:"small",color:"red"},"\u544a\u7f44"):l.a.createElement(tt.a,{size:"small",color:"green"},"\u8fc7\u5269"))),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement("span",{className:"ant-form-text"},"\u4e0a\u9650\uff1a",this.state.data.excess,"\xa0\xa0\xa0\xa0\xa0\xa0 \u4e0b\u9650\uff1a",this.state.data.warning)),l.a.createElement(f.a.Item,{label:"\u56fe\u7247"},l.a.createElement("span",{className:"ant-form-pictures"},this.state.data.pictures.map((function(e,t){return""===e?null:l.a.createElement("img",{key:t,src:"/upload/"+e,alt:"\u8d27\u7269\u56fe\u7247"})})))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},this.state.data.note?this.state.data.note:"\u65e0"))),l.a.createElement(Yt.a,{style:{margin:"50px 170px"},size:"small",header:t,dataSource:this.state.log,pagination:{pageSize:10},renderItem:function(t){return l.a.createElement(Yt.a.Item,null,l.a.createElement("span",{style:{fontWeight:"bolder",marginLeft:"10px"}},e.getTimeForm(t.time)),l.a.createElement("span",{style:{color:"#1DA57A",marginLeft:"20px",width:"60px"}},t.manager),l.a.createElement("span",null,"\u5bf9"),l.a.createElement("span",{style:{margin:"0 20px",width:"80px"}},"\u201c",l.a.createElement("span",{style:{color:"#1DA57A"}},t.stockname),"\u201d"),l.a.createElement("span",null,"\u7684\u5e93\u5b58\u4fe1\u606f\u8fdb\u884c\u4e86"),l.a.createElement("span",{style:{color:"#1DA57A"}},t.operation),l.a.createElement(h.a,{type:"primary",size:"small",style:{marginLeft:"30px"},onClick:function(){return e.handleDetail(t)}},"\u8be6\u60c5"))},bordered:!0}),l.a.createElement(Lt,{visible:this.state.visible,info:this.state.logInfo,onCancel:this.onOk,onOk:this.onOk})))}}]),a}(l.a.Component),Wt=f.a.create({name:"edit-stock-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:0===(t=e.sent).status&&(a=[],t.data.forEach((function(e){a.push(e.category)})),n.setState({category:a}));case 4:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r,l,i,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=29;break}for(i in r={},l=JSON.parse(JSON.stringify(n.props.location.state.data)),r.id=l.id,a)a.hasOwnProperty(i)&&(r[i]=a[i]);for(s in l.pictures=l.pictures.join(","),c=0,r)r[s]!==l[s]&&(c=1);return console.log(c),e.next=11,O("/stock/update",r,"POST");case 11:if(0!==e.sent.status||1!==c){e.next=27;break}return(o=Object(At.a)({},r)).stockid=o.id,o.stockname=o.name,o.time=(new Date).getTime(),o.operation="\u4fee\u6539",o.manager=pe.user.username,delete o.id,delete o.name,e.next=23,_(o);case 23:0===e.sent.status&&(v.a.success("\u66f4\u65b0\u5e93\u5b58\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u5e93\u5b58\u5217\u8868\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push("/stock")}),2e3)),e.next=29;break;case 27:v.a.success("\u66f4\u65b0\u5e93\u5b58\u4fe1\u606f\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u5e93\u5b58\u5217\u8868\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push("/stock")}),2e3);case 29:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.handleAddClick=function(){n.setState({visible:!0})},n.handleNameChange=function(e){n.setState({categoryAdd:e.target.value})},n.onOk=function(){var e=n.state.category;e.push(n.state.categoryAdd),n.setState({category:e,visible:!1})},n.onCancel=function(){n.setState({visible:!1})},n.state={category:[],categoryAdd:"",visible:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u4fe1\u606f","\u7f16\u8f91\u5e93\u5b58"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u7f16\u8f91\u5e93\u5b58\u8bb0\u5f55"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/stock")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u540d\u79f0"},this.props.form.getFieldDecorator("name",{initialValue:t.name,rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u540d\u79f0"}))),l.a.createElement(f.a.Item,{label:"\u8d27\u7269\u79cd\u7c7b"},this.props.form.getFieldDecorator("category",{initialValue:t.category,rules:[{required:!0}]})(l.a.createElement(Ke.a,{style:{width:"75%"},placeholder:"\u8bf7\u9009\u62e9\u8d27\u7269\u54c1\u7c7b"},this.state.category.map((function(e){return l.a.createElement(Ke.a.Option,{key:e},e)})))),l.a.createElement("div",{style:{display:"inline-block",float:"right"}},l.a.createElement(h.a,{type:"primary",onClick:this.handleAddClick},"\u65b0\u589e\u54c1\u7c7b"),l.a.createElement(Ye.a,{title:"\u65b0\u589e\u54c1\u7c7b",visible:this.state.visible,okText:"\u786e\u8ba4",onOk:this.onOk,cancelText:"\u53d6\u6d88",onCancel:this.onCancel},l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0",onChange:this.handleNameChange})))),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u5355\u4ef7"},this.props.form.getFieldDecorator("price",{initialValue:t.price,rules:[{required:!0}]})(l.a.createElement(Ve.a,null)),l.a.createElement("span",{style:{marginLeft:"10px"}},"\u5143")),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u6570\u91cf"},this.props.form.getFieldDecorator("amount",{initialValue:t.amount,rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u6570\u91cf"}))),l.a.createElement(f.a.Item,{label:"\u5355\u4f4d"},this.props.form.getFieldDecorator("unit",{initialValue:t.unit,rules:[{required:!0}]})(l.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u7269\u5355\u4f4d"}))),l.a.createElement(f.a.Item,{label:"\u5e93\u5b58\u76d1\u63a7"},l.a.createElement(E.a.Group,{compact:!0},l.a.createElement(f.a.Item,null,this.props.form.getFieldDecorator("warning",{initialValue:t.warning,rules:[{required:!0}]})(l.a.createElement(Ve.a,{placeholder:"\u4e0b\u9650"}))),l.a.createElement("span",{style:{margin:"8px 20px 0 20px"}},"~"),l.a.createElement(f.a.Item,null,this.props.form.getFieldDecorator("excess",{initialValue:t.excess,rules:[{required:!0}]})(l.a.createElement(Ve.a,{placeholder:"\u4e0a\u9650"}))))),l.a.createElement(f.a.Item,{label:"\u56fe\u7247"},this.props.form.getFieldDecorator("pictures",{initialValue:t.pictures.join(",")})(l.a.createElement(rt,{imgs:t.pictures.join(",")}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},this.props.form.getFieldDecorator("note",{initialValue:t.note})(l.a.createElement(E.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u5e93\u5b58\u5907\u6ce8"}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),zt=f.a.create({name:"search-inventory-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:t=e.sent,n.refreshTable(t);case 4:case"end":return e.stop()}}),e)}))),n.componentWillUnmount=function(){clearTimeout(n.timerID)},n.refreshTable=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:return a=e.sent,e.next=5,q();case 5:r=e.sent,0===t.status&&0===a.status&&0===r.status&&(l=[],i=t.data.map((function(e){return a.data.forEach((function(t){e.creater===t.id&&(e.creater=t.username,l.push(e.creater))})),e})),l=new Set(l),c=[],l.forEach((function(e){c.push({text:e,value:e})})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,data:i.reverse(),tableData:i,createrFilters:c,dateRange:[NaN,NaN]})}),300));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDeal=function(e){var t={id:e.id,state:1-e.state};Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5c06\u5355\u53f7"PD'+e.id+'"\u8bbe\u7f6e\u4e3a\u5df2\u5904\u7406\u5417',okText:"\u786e\u8ba4",onOk:function(){var a=Object(x.a)(b.a.mark((function a(){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,te(t);case 2:0===a.sent.status&&(r=n.state.data.map((function(t){return t.state=t.id===e.id?1-t.state:t.state,t})),n.setState({data:r}));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}})},n.handleDelete=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye.a.confirm({title:"\u8b66\u544a",content:'\u786e\u5b9a\u8981\u5220\u9664\u8be5\u5e93\u5b58\u8bb0\u5f55"'+t.id+'"\u5417\uff1f',okText:"\u786e\u8ba4",onOk:function(){var e=Object(x.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/inventory/delete",{id:t.id},"GET");case 2:0===e.sent.status&&(a=[],n.state.data.forEach((function(e){e.id!==t.id&&a.push(e)})),n.setState({tableData:a}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cancelText:"\u53d6\u6d88",onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleView=function(e){n.props.history.push({pathname:"/stock/inventory/view",state:{data:e}})},n.handleRangePickerChange=function(e,t){var a=new Date(t[0]).getTime(),r=new Date(t[1]).getTime(),l=[];l.push(a),l.push(r);var i=isNaN(a)||isNaN(r)?n.state.data:n.state.data.filter((function(e){return e.createtime>=a&&e.createtime<=r}));n.state.searchValue&&(i=i.filter((function(e){return String(e.id)===n.state.searchValue}))),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,tableData:i,dateRange:l})}),300)},n.handleSearch=function(){var e=Object(x.a)(b.a.mark((function e(t){var a,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n.state.dateRange),console.log(isNaN(n.state.dateRange[0])),console.log(isNaN(n.state.dateRange[1])),!isNaN(n.state.dateRange[0]&&isNaN(n.state.dateRange[1]))){e.next=16;break}if(t){e.next=11;break}return e.next=7,X();case 7:a=e.sent,n.refreshTable(a),e.next=14;break;case 11:r=n.state.data.filter((function(e){return String(e.id)===t})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,tableData:r,searchValue:t})}),300);case 14:e.next=19;break;case 16:l=n.state.data.filter((function(e){return t?t===String(e.id)&&e.createtime>=n.state.dateRange[0]&&e.createtime<=n.state.dateRange[1]:e.createtime>=n.state.dateRange[0]&&e.createtime<=n.state.dateRange[1]})),n.setState({isLoading:!0}),n.timerID=setTimeout((function(){n.setState({isLoading:!1,tableData:l,searchValue:t})}),300);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getTimeForm=function(e){var t=(e=new Date(e)).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.getVariance=function(e,t){var a=(e-t).toFixed(2);return a>0?l.a.createElement("span",null,"+",a):l.a.createElement("span",null,a)},n.state={isLoading:!0,data:[],tableData:[],createrFilters:[],dateRange:[],searchValue:""},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u76d8\u70b9\u5355\u53f7",dataIndex:"id",key:"id",render:function(t,a){return l.a.createElement(h.a,{type:"link",onClick:function(){e.handleView(a)}},t)}},{title:"\u76d8\u70b9\u65f6\u95f4",dataIndex:"createtime",key:"time",render:function(t){return l.a.createElement("span",null,l.a.createElement(g.a,{type:"clock-circle"}),"  ",e.getTimeForm(t))},sorter:function(e,t){return e.time-t.time}},{title:"\u76d8\u70b9\u4eba",dataIndex:"creater",key:"creater",filters:this.state.createrFilters,onFilter:function(e,t){return e===t.creatername}},{title:"\u9884\u671f\u91d1\u989d",key:"expect",dataIndex:"expect",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.expect-t.expect}},{title:"\u76d8\u70b9\u91d1\u989d",key:"amount",dataIndex:"amount",render:function(e){return l.a.createElement("span",null,"\uffe5",e.toFixed(2))},sorter:function(e,t){return e.amount-t.amount}},{title:"\u5dee\u5f02\u91d1\u989d",key:"variance",render:function(t,a){return e.getVariance(a.amount,a.expect)},sorter:function(e,t){return e.amount-t.amount}},{title:"\u72b6\u6001",key:"state",dataIndex:"state",render:function(e){return 1===e?l.a.createElement(tt.a,{color:"green"},"\u5df2\u5904\u7406"):l.a.createElement(tt.a,{color:"red"},"\u672a\u5904\u7406")},filters:[{text:"\u5df2\u5904\u7406",value:0},{text:"\u672a\u5904\u7406",value:1}],onFilter:function(e,t){return e===t.state}},{title:"\u64cd\u4f5c",key:"operate",render:function(t,a){return 1===a.state?l.a.createElement("div",null,l.a.createElement(h.a,{size:"small",disabled:!0},"\u5904\u7406"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",disabled:!0},"\u5220\u9664")):l.a.createElement("div",null,l.a.createElement(h.a,{size:"small",onClick:function(){return e.handleDeal(a)}},"\u5904\u7406"),l.a.createElement(_e.a,{type:"vertical"}),l.a.createElement(h.a,{size:"small",type:"danger",onClick:function(){return e.handleDelete(a)}},"\u5220\u9664"))}}];return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9"]}),l.a.createElement("div",{className:"stock-header",style:{margin:"20px"}},l.a.createElement(h.a,{type:"primary",style:{marginRight:"40px"},onClick:function(){e.props.history.push("/stock/inventory/add")}},l.a.createElement(g.a,{type:"plus"}),"\u65b0\u5efa\u76d8\u70b9\u5355"),l.a.createElement(E.a.Search,{placeholder:"\u641c\u7d22\u76d8\u70b9\u5355\u53f7",style:{width:"160px",float:"right",marginLeft:"15px"},onSearch:function(t){return e.handleSearch(t)},enterButton:!0}),l.a.createElement(mt.a.RangePicker,{style:{width:"250px",float:"right"},onChange:this.handleRangePickerChange})),this.state.isLoading?l.a.createElement(Ge,null):l.a.createElement(Re.a,{size:"small",style:{margin:"20px"},columns:t,dataSource:this.state.tableData,rowKey:function(e){return e.id},bordered:!0}))}}]),a}(l.a.Component)),Rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getTime=function(e){var t=(e=new Date).getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},e.getVariance=function(e,t){var a=(e-t).toFixed(2);return a>0?l.a.createElement("span",null,"+",a):l.a.createElement("span",null,a)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.state.data;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9","\u76d8\u70b9\u8be6\u60c5"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u67e5\u770b\u76d8\u70b9\u8be6\u60c5"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/stock/inventory")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px",textIndent:"20px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u5355\u53f7"},l.a.createElement("span",{className:"ant-form-text"},t.id)),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u65f6\u95f4"},l.a.createElement("span",{className:"ant-form-text"},this.getTime(t.createtime))),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u4eba"},l.a.createElement("span",{className:"ant-form-text"},t.creater)),l.a.createElement(f.a.Item,{label:"\u9884\u671f\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",t.expect.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},"\uffe5",t.amount.toFixed(2))),l.a.createElement(f.a.Item,{label:"\u5dee\u5f02\u91d1\u989d"},l.a.createElement("span",{className:"ant-form-text"},this.getVariance(t.amount,t.expect))),l.a.createElement(f.a.Item,{label:"\u72b6\u6001"},l.a.createElement("span",{className:"ant-form-text",style:{marginLeft:"20px",textIndent:0}},0===t.state?l.a.createElement(tt.a,{color:"green"},"\u672a\u5904\u7406"):l.a.createElement(tt.a,{color:"red"},"\u5df2\u5904\u7406"))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},l.a.createElement("span",{className:"ant-form-text"},t.note?t.note:"\u65e0")),l.a.createElement(f.a.Item,{label:"\u8be6\u60c5"},l.a.createElement("span",{className:"ant-form-text"},t.detail)))))}}]),a}(l.a.Component),_t=f.a.create({name:"inventory-add-form"})(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).UNSAFE_componentWillMount=Object(x.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:0===(t=e.sent).status&&(a=0,t.data.forEach((function(e){a+=e.amount*e.price})),n.setState({expect:a.toFixed(2)}));case 4:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(){var e=Object(x.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return(r=a).createtime=new Date(r.createtime).getTime(),r.state=0,r.creater=pe.user.id,r.amount=r.amount.toFixed(2),e.next=8,ee(r);case 8:0===e.sent.status&&(v.a.success("\u65b0\u589e\u76d8\u70b9\u8bb0\u5f55\u6210\u529f,\u5373\u5c06\u8fd4\u56de\u76d8\u70b9\u5217\u8868\u9875\u9762"),n.timerID=setTimeout((function(){n.props.history.push("/stock/inventory")}),1500));case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.getTime=function(){var e=new Date,t=e.getMonth()+1;t=t>=10?t:"0"+t;var a=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),l=e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds();return e.getFullYear()+"-"+t+"-"+a+" "+n+":"+r+":"+l},n.state={expect:0},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form;return l.a.createElement("div",null,l.a.createElement(Te,{nav:["\u5e93\u5b58\u7ba1\u7406","\u5e93\u5b58\u76d8\u70b9","\u65b0\u5efa\u76d8\u70b9\u5355"]}),l.a.createElement(Ae.a,{title:l.a.createElement("span",{style:{color:"#1DA57A",fontWeight:"bolder",fontSize:"20px"}},"\u65b0\u5efa\u76d8\u70b9\u5355"),extra:l.a.createElement(h.a,{type:"primary",onClick:function(){e.props.history.push("/stock/inventory")}},"\u8fd4\u56de"),style:{width:"100%",border:"none"}},l.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:10}},{style:{marginTop:"40px"},onSubmit:this.handleSubmit}),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u65e5\u671f"},t.getFieldDecorator("createtime",{rules:[{required:!0}],initialValue:this.getTime()})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u4eba"},t.getFieldDecorator("creater",{rules:[{required:!0}],initialValue:pe.user.username})(l.a.createElement(E.a,{disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u9884\u671f\u91d1\u989d"},t.getFieldDecorator("expect",{rules:[{required:!0}],initialValue:this.state.expect})(l.a.createElement(E.a,{addonBefore:"\uffe5",disabled:!0}))),l.a.createElement(f.a.Item,{label:"\u76d8\u70b9\u91d1\u989d"},t.getFieldDecorator("amount",{rules:[{required:!0}]})(l.a.createElement(Ve.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u76d8\u70b9\u91d1\u989d"}))),l.a.createElement(f.a.Item,{label:"\u8be6\u60c5"},t.getFieldDecorator("detail",{rules:[{required:!0}]})(l.a.createElement(E.a.TextArea,{rows:4}))),l.a.createElement(f.a.Item,{label:"\u5907\u6ce8"},t.getFieldDecorator("note",{initialValue:""})(l.a.createElement(E.a.TextArea,{rows:2}))),l.a.createElement(f.a.Item,null,l.a.createElement(h.a,{style:{margin:"50px 0 0 460px"},type:"primary",htmlType:"submit"},"\u5b8c\u6210\uff0c\u63d0\u4ea4")))))}}]),a}(l.a.Component)),Ht=ve.a.Sider,Ut=ve.a.Content,Gt=ve.a.Footer,Bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=pe.user;return"{}"===JSON.stringify(e)?l.a.createElement(p.a,{to:"/login"}):l.a.createElement(ve.a,null,l.a.createElement(Ht,{style:{height:"100vh",position:"fixed"}},l.a.createElement(Ce,null)),l.a.createElement(ve.a,{id:"right",style:{marginLeft:"200px"}},l.a.createElement(we,null),l.a.createElement(Ut,{style:{margin:"0 20px",paddingBottom:"100px",backgroundColor:"white",minHeight:"500px"}},l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/home",component:Ne}),l.a.createElement(p.b,{path:"/home/view",component:ze}),l.a.createElement(p.b,{path:"/home/edit",component:We}),l.a.createElement(p.b,{exact:!0,path:"/order",component:dt}),l.a.createElement(p.b,{path:"/order/view",component:ht}),l.a.createElement(p.b,{exact:!0,path:"/order/stage",component:ft}),l.a.createElement(p.b,{path:"/order/stage/view",component:ht}),l.a.createElement(p.b,{exact:!0,path:"/product",component:at}),l.a.createElement(p.b,{path:"/product/add",component:it}),l.a.createElement(p.b,{path:"/product/edit",component:st}),l.a.createElement(p.b,{path:"/product/view",component:ut}),l.a.createElement(p.b,{exact:!0,path:"/product/category",component:Be}),l.a.createElement(p.b,{path:"/product/category/add",component:Je}),l.a.createElement(p.b,{path:"/product/category/edit",component:Ze}),l.a.createElement(p.b,{path:"/product/category/view",component:$e}),l.a.createElement(p.b,{exact:!0,path:"/stock",component:Mt}),l.a.createElement(p.b,{path:"/stock/add",component:Vt}),l.a.createElement(p.b,{path:"/stock/view",component:Pt}),l.a.createElement(p.b,{path:"/stock/log",component:qt}),l.a.createElement(p.b,{path:"/stock/edit",component:Wt}),l.a.createElement(p.b,{exact:!0,path:"/stock/inventory",component:zt}),l.a.createElement(p.b,{path:"/stock/inventory/view",component:Rt}),l.a.createElement(p.b,{path:"/stock/inventory/add",component:_t}),l.a.createElement(p.b,{exact:!0,path:"/member",component:gt}),l.a.createElement(p.b,{path:"/member/add",component:bt}),l.a.createElement(p.b,{path:"/member/edit",component:vt}),l.a.createElement(p.b,{path:"/member/view",component:xt}),l.a.createElement(p.b,{exact:!0,path:"/employee",component:kt}),l.a.createElement(p.b,{path:"/employee/add",component:Dt}),l.a.createElement(p.b,{path:"/employee/view",component:It}),l.a.createElement(p.b,{path:"/employee/edit",component:Ot}),l.a.createElement(p.b,{exact:!0,path:"/employee/user",component:Ft}),l.a.createElement(p.b,{path:"/employee/user/add",component:jt}),l.a.createElement(p.b,{path:"/employee/user/edit",component:Nt}),l.a.createElement(p.b,{exact:!0,path:"/employee/role",component:Ct}),l.a.createElement(p.b,{path:"/employee/role/add",component:St}),l.a.createElement(p.b,{path:"/employee/role/edit",component:Tt}),l.a.createElement(p.a,{to:"/home"}))),l.a.createElement(Gt,null,"\u63a8\u8350\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\uff0c\u53ef\u83b7\u5f97\u66f4\u4f73\u7684\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c\u3002")))}}]),a}(l.a.Component),Kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement(p.d,null,l.a.createElement(p.b,{path:"/login",component:be}),l.a.createElement(p.b,{path:"/",component:Bt})))}}]),a}(l.a.Component),Jt=a(489),Zt=a.n(Jt);a(1090);Pe.a.locale("zh-cn");var $t=Ee();pe.user=$t,c.a.render(l.a.createElement(n.a,{locale:Zt.a},l.a.createElement(Kt,null)),document.getElementById("root"))},242:function(e,t,a){e.exports=a.p+"static/media/logo.6c9c9c6a.png"},469:function(e,t,a){},492:function(e,t,a){e.exports=a(1095)},506:function(e,t,a){},658:function(e,t,a){},664:function(e,t,a){},670:function(e,t,a){}},[[492,1,2]]]);
//# sourceMappingURL=main.4cbfa6c4.chunk.js.map